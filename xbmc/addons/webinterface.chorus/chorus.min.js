/*! chorus by Jeremy Graham - built on 03-05-2014 */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=eb.type(a);return"function"===c||eb.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(eb.isFunction(b))return eb.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return eb.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(mb.test(b))return eb.filter(b,a,c);b=eb.filter(b,a)}return eb.grep(a,function(a){return eb.inArray(a,b)>=0!==c})}function e(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function f(a){var b=ub[a]={};return eb.each(a.match(tb)||[],function(a,c){b[c]=!0}),b}function g(){ob.addEventListener?(ob.removeEventListener("DOMContentLoaded",h,!1),a.removeEventListener("load",h,!1)):(ob.detachEvent("onreadystatechange",h),a.detachEvent("onload",h))}function h(){(ob.addEventListener||"load"===event.type||"complete"===ob.readyState)&&(g(),eb.ready())}function i(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(zb,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:yb.test(c)?eb.parseJSON(c):c}catch(e){}eb.data(a,b,c)}else c=void 0}return c}function j(a){var b;for(b in a)if(("data"!==b||!eb.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function k(a,b,c,d){if(eb.acceptData(a)){var e,f,g=eb.expando,h=a.nodeType,i=h?eb.cache:a,j=h?a[g]:a[g]&&g;if(j&&i[j]&&(d||i[j].data)||void 0!==c||"string"!=typeof b)return j||(j=h?a[g]=W.pop()||eb.guid++:g),i[j]||(i[j]=h?{}:{toJSON:eb.noop}),("object"==typeof b||"function"==typeof b)&&(d?i[j]=eb.extend(i[j],b):i[j].data=eb.extend(i[j].data,b)),f=i[j],d||(f.data||(f.data={}),f=f.data),void 0!==c&&(f[eb.camelCase(b)]=c),"string"==typeof b?(e=f[b],null==e&&(e=f[eb.camelCase(b)])):e=f,e}}function l(a,b,c){if(eb.acceptData(a)){var d,e,f=a.nodeType,g=f?eb.cache:a,h=f?a[eb.expando]:eb.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){eb.isArray(b)?b=b.concat(eb.map(b,eb.camelCase)):b in d?b=[b]:(b=eb.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!j(d):!eb.isEmptyObject(d))return}(c||(delete g[h].data,j(g[h])))&&(f?eb.cleanData([a],!0):cb.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function m(){return!0}function n(){return!1}function o(){try{return ob.activeElement}catch(a){}}function p(a){var b=Kb.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function q(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==xb?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==xb?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||eb.nodeName(d,b)?f.push(d):eb.merge(f,q(d,b));return void 0===b||b&&eb.nodeName(a,b)?eb.merge([a],f):f}function r(a){Eb.test(a.type)&&(a.defaultChecked=a.checked)}function s(a,b){return eb.nodeName(a,"table")&&eb.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function t(a){return a.type=(null!==eb.find.attr(a,"type"))+"/"+a.type,a}function u(a){var b=Vb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function v(a,b){for(var c,d=0;null!=(c=a[d]);d++)eb._data(c,"globalEval",!b||eb._data(b[d],"globalEval"))}function w(a,b){if(1===b.nodeType&&eb.hasData(a)){var c,d,e,f=eb._data(a),g=eb._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)eb.event.add(b,c,h[c][d])}g.data&&(g.data=eb.extend({},g.data))}}function x(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!cb.noCloneEvent&&b[eb.expando]){e=eb._data(b);for(d in e.events)eb.removeEvent(b,d,e.handle);b.removeAttribute(eb.expando)}"script"===c&&b.text!==a.text?(t(b).text=a.text,u(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),cb.html5Clone&&a.innerHTML&&!eb.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Eb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function y(b,c){var d,e=eb(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:eb.css(e[0],"display");return e.detach(),f}function z(a){var b=ob,c=_b[a];return c||(c=y(a,b),"none"!==c&&c||($b=($b||eb("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=($b[0].contentWindow||$b[0].contentDocument).document,b.write(),b.close(),c=y(a,b),$b.detach()),_b[a]=c),c}function A(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}function B(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=mc.length;e--;)if(b=mc[e]+c,b in a)return b;return d}function C(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=eb._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&Cb(d)&&(f[g]=eb._data(d,"olddisplay",z(d.nodeName)))):(e=Cb(d),(c&&"none"!==c||!e)&&eb._data(d,"olddisplay",e?c:eb.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function D(a,b,c){var d=ic.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function E(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=eb.css(a,c+Bb[f],!0,e)),d?("content"===c&&(g-=eb.css(a,"padding"+Bb[f],!0,e)),"margin"!==c&&(g-=eb.css(a,"border"+Bb[f]+"Width",!0,e))):(g+=eb.css(a,"padding"+Bb[f],!0,e),"padding"!==c&&(g+=eb.css(a,"border"+Bb[f]+"Width",!0,e)));return g}function F(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=ac(a),g=cb.boxSizing&&"border-box"===eb.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=bc(a,b,f),(0>e||null==e)&&(e=a.style[b]),dc.test(e))return e;d=g&&(cb.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+E(a,b,c||(g?"border":"content"),d,f)+"px"}function G(a,b,c,d,e){return new G.prototype.init(a,b,c,d,e)}function H(){return setTimeout(function(){nc=void 0}),nc=eb.now()}function I(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Bb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function J(a,b,c){for(var d,e=(tc[b]||[]).concat(tc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function K(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&Cb(a),p=eb._data(a,"fxshow");c.queue||(h=eb._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,eb.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=eb.css(a,"display"),k="none"===j?eb._data(a,"olddisplay")||z(a.nodeName):j,"inline"===k&&"none"===eb.css(a,"float")&&(cb.inlineBlockNeedsLayout&&"inline"!==z(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",cb.shrinkWrapBlocks()||l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],pc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||eb.style(a,d)}else j=void 0;if(eb.isEmptyObject(m))"inline"===("none"===j?z(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=eb._data(a,"fxshow",{}),f&&(p.hidden=!o),o?eb(a).show():l.done(function(){eb(a).hide()}),l.done(function(){var b;eb._removeData(a,"fxshow");for(b in m)eb.style(a,b,m[b])});for(d in m)g=J(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function L(a,b){var c,d,e,f,g;for(c in a)if(d=eb.camelCase(c),e=b[d],f=a[c],eb.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=eb.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function M(a,b,c){var d,e,f=0,g=sc.length,h=eb.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=nc||H(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:eb.extend({},b),opts:eb.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:nc||H(),duration:c.duration,tweens:[],createTween:function(b,c){var d=eb.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(L(k,j.opts.specialEasing);g>f;f++)if(d=sc[f].call(j,a,k,j.opts))return d;return eb.map(k,J,j),eb.isFunction(j.opts.start)&&j.opts.start.call(a,j),eb.fx.timer(eb.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function N(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(tb)||[];if(eb.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function O(a,b,c,d){function e(h){var i;return f[h]=!0,eb.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rc;return e(b.dataTypes[0])||!f["*"]&&e("*")}function P(a,b){var c,d,e=eb.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&eb.extend(!0,a,c),a}function Q(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function R(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function S(a,b,c,d){var e;if(eb.isArray(b))eb.each(b,function(b,e){c||Vc.test(a)?d(a,e):S(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==eb.type(b))d(a,b);else for(e in b)S(a+"["+e+"]",b[e],c,d)}function T(){try{return new a.XMLHttpRequest}catch(b){}}function U(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function V(a){return eb.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var W=[],X=W.slice,Y=W.concat,Z=W.push,$=W.indexOf,_={},ab=_.toString,bb=_.hasOwnProperty,cb={},db="1.11.1",eb=function(a,b){return new eb.fn.init(a,b)},fb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,gb=/^-ms-/,hb=/-([\da-z])/gi,ib=function(a,b){return b.toUpperCase()};eb.fn=eb.prototype={jquery:db,constructor:eb,selector:"",length:0,toArray:function(){return X.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:X.call(this)},pushStack:function(a){var b=eb.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return eb.each(this,a,b)},map:function(a){return this.pushStack(eb.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:W.sort,splice:W.splice},eb.extend=eb.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||eb.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(eb.isPlainObject(c)||(b=eb.isArray(c)))?(b?(b=!1,f=a&&eb.isArray(a)?a:[]):f=a&&eb.isPlainObject(a)?a:{},g[d]=eb.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},eb.extend({expando:"jQuery"+(db+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===eb.type(a)},isArray:Array.isArray||function(a){return"array"===eb.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!eb.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==eb.type(a)||a.nodeType||eb.isWindow(a))return!1;try{if(a.constructor&&!bb.call(a,"constructor")&&!bb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(cb.ownLast)for(b in a)return bb.call(a,b);for(b in a);return void 0===b||bb.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?_[ab.call(a)]||"object":typeof a},globalEval:function(b){b&&eb.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(gb,"ms-").replace(hb,ib)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(fb,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?eb.merge(d,"string"==typeof a?[a]:a):Z.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if($)return $.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return Y.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(e=a[b],b=a,a=e),eb.isFunction(a)?(c=X.call(arguments,2),d=function(){return a.apply(b||this,c.concat(X.call(arguments)))},d.guid=a.guid=a.guid||eb.guid++,d):void 0},now:function(){return+new Date},support:cb}),eb.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){_["[object "+b+"]"]=b.toLowerCase()});var jb=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=sb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return _.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName&&b.getElementsByClassName)return _.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ub,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=tb.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return _.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ib,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&typeof a.getElementsByTagName!==V&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?bb.call(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):_.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return bb.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ib,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Z.call(i));r=q(r)}_.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V="undefined",W=1<<31,X={}.hasOwnProperty,Y=[],Z=Y.pop,$=Y.push,_=Y.push,ab=Y.slice,bb=Y.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},cb="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",db="[\\x20\\t\\r\\n\\f]",eb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",fb=eb.replace("w","w#"),gb="\\["+db+"*("+eb+")(?:"+db+"*([*^$|!~]?=)"+db+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+fb+"))|)"+db+"*\\]",hb=":("+eb+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+gb+")*)|.*)\\)|)",ib=new RegExp("^"+db+"+|((?:^|[^\\\\])(?:\\\\.)*)"+db+"+$","g"),jb=new RegExp("^"+db+"*,"+db+"*"),kb=new RegExp("^"+db+"*([>+~]|"+db+")"+db+"*"),lb=new RegExp("="+db+"*([^\\]'\"]*?)"+db+"*\\]","g"),mb=new RegExp(hb),nb=new RegExp("^"+fb+"$"),ob={ID:new RegExp("^#("+eb+")"),CLASS:new RegExp("^\\.("+eb+")"),TAG:new RegExp("^("+eb.replace("w","w*")+")"),ATTR:new RegExp("^"+gb),PSEUDO:new RegExp("^"+hb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+db+"*(even|odd|(([+-]|)(\\d*)n|)"+db+"*(?:([+-]|)"+db+"*(\\d+)|))"+db+"*\\)|)","i"),bool:new RegExp("^(?:"+cb+")$","i"),needsContext:new RegExp("^"+db+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+db+"*((?:-\\d)?\\d*)"+db+"*\\)|)(?=[^-]|$)","i")},pb=/^(?:input|select|textarea|button)$/i,qb=/^h\d$/i,rb=/^[^{]+\{\s*\[native \w/,sb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tb=/[+~]/,ub=/'|\\/g,vb=new RegExp("\\\\([\\da-f]{1,6}"+db+"?|("+db+")|.)","ig"),wb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{_.apply(Y=ab.call(O.childNodes),O.childNodes),Y[O.childNodes.length].nodeType}catch(xb){_={apply:Y.length?function(a,b){$.apply(a,ab.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c=a?a.ownerDocument||a:O,d=c.defaultView;return c!==G&&9===c.nodeType&&c.documentElement?(G=c,H=c.documentElement,I=!y(c),d&&d!==d.top&&(d.addEventListener?d.addEventListener("unload",function(){F()},!1):d.attachEvent&&d.attachEvent("onunload",function(){F()})),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=rb.test(c.getElementsByClassName)&&e(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),v.getById=e(function(a){return H.appendChild(a).id=N,!c.getElementsByName||!c.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if(typeof b.getElementById!==V&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(vb,wb);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==V?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==V&&I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=rb.test(c.querySelectorAll))&&(e(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&J.push("[*^$]="+db+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+db+"*(?:value|"+cb+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),e(function(a){var b=c.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+db+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=rb.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",hb)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=rb.test(H.compareDocumentPosition),M=b||rb.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!v.sortDetached&&b.compareDocumentPosition(a)===d?a===c||a.ownerDocument===O&&M(O,a)?-1:b===c||b.ownerDocument===O&&M(O,b)?1:D?bb.call(D,a)-bb.call(D,b):0:4&d?-1:1)}:function(a,b){if(a===b)return E=!0,0;var d,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===c?-1:b===c?1:f?-1:h?1:D?bb.call(D,a)-bb.call(D,b):0;if(f===h)return g(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},c):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(lb,"='$1']"),!(!v.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&X.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:ob,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(vb,wb),a[3]=(a[3]||a[4]||a[5]||"").replace(vb,wb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return ob.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&mb.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(vb,wb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+db+")"+a+"("+db+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=bb.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ib,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return nb.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(vb,wb).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qb.test(a.nodeName)},input:function(a){return pb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=jb.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=kb.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ib," ")}),h=h.slice(d.length));for(g in w.filter)!(e=ob[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));
if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(vb,wb),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=ob.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(vb,wb),tb.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return _.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,tb.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(cb,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);eb.find=jb,eb.expr=jb.selectors,eb.expr[":"]=eb.expr.pseudos,eb.unique=jb.uniqueSort,eb.text=jb.getText,eb.isXMLDoc=jb.isXML,eb.contains=jb.contains;var kb=eb.expr.match.needsContext,lb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,mb=/^.[^:#\[\.,]*$/;eb.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?eb.find.matchesSelector(d,a)?[d]:[]:eb.find.matches(a,eb.grep(b,function(a){return 1===a.nodeType}))},eb.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(eb(a).filter(function(){for(b=0;e>b;b++)if(eb.contains(d[b],this))return!0}));for(b=0;e>b;b++)eb.find(a,d[b],c);return c=this.pushStack(e>1?eb.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&kb.test(a)?eb(a):a||[],!1).length}});var nb,ob=a.document,pb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,qb=eb.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:pb.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||nb).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof eb?b[0]:b,eb.merge(this,eb.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:ob,!0)),lb.test(c[1])&&eb.isPlainObject(b))for(c in b)eb.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=ob.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return nb.find(a);this.length=1,this[0]=d}return this.context=ob,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):eb.isFunction(a)?"undefined"!=typeof nb.ready?nb.ready(a):a(eb):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),eb.makeArray(a,this))};qb.prototype=eb.fn,nb=eb(ob);var rb=/^(?:parents|prev(?:Until|All))/,sb={children:!0,contents:!0,next:!0,prev:!0};eb.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!eb(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),eb.fn.extend({has:function(a){var b,c=eb(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(eb.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=kb.test(a)||"string"!=typeof a?eb(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&eb.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?eb.unique(f):f)},index:function(a){return a?"string"==typeof a?eb.inArray(this[0],eb(a)):eb.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(eb.unique(eb.merge(this.get(),eb(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),eb.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return eb.dir(a,"parentNode")},parentsUntil:function(a,b,c){return eb.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return eb.dir(a,"nextSibling")},prevAll:function(a){return eb.dir(a,"previousSibling")},nextUntil:function(a,b,c){return eb.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return eb.dir(a,"previousSibling",c)},siblings:function(a){return eb.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return eb.sibling(a.firstChild)},contents:function(a){return eb.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:eb.merge([],a.childNodes)}},function(a,b){eb.fn[a]=function(c,d){var e=eb.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=eb.filter(d,e)),this.length>1&&(sb[a]||(e=eb.unique(e)),rb.test(a)&&(e=e.reverse())),this.pushStack(e)}});var tb=/\S+/g,ub={};eb.Callbacks=function(a){a="string"==typeof a?ub[a]||f(a):eb.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(c=a.memory&&f,d=!0,g=h||0,h=0,e=i.length,b=!0;i&&e>g;g++)if(i[g].apply(f[0],f[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var d=i.length;!function f(b){eb.each(b,function(b,c){var d=eb.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=i.length:c&&(h=d,k(c))}return this},remove:function(){return i&&eb.each(arguments,function(a,c){for(var d;(d=eb.inArray(c,i,d))>-1;)i.splice(d,1),b&&(e>=d&&e--,g>=d&&g--)}),this},has:function(a){return a?eb.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],e=0,this},disable:function(){return i=j=c=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,c){return!i||d&&!j||(c=c||[],c=[a,c.slice?c.slice():c],b?j.push(c):k(c)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},eb.extend({Deferred:function(a){var b=[["resolve","done",eb.Callbacks("once memory"),"resolved"],["reject","fail",eb.Callbacks("once memory"),"rejected"],["notify","progress",eb.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return eb.Deferred(function(c){eb.each(b,function(b,f){var g=eb.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&eb.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?eb.extend(a,d):d}},e={};return d.pipe=d.then,eb.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=X.call(arguments),g=f.length,h=1!==g||a&&eb.isFunction(a.promise)?g:0,i=1===h?a:eb.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?X.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&eb.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var vb;eb.fn.ready=function(a){return eb.ready.promise().done(a),this},eb.extend({isReady:!1,readyWait:1,holdReady:function(a){a?eb.readyWait++:eb.ready(!0)},ready:function(a){if(a===!0?!--eb.readyWait:!eb.isReady){if(!ob.body)return setTimeout(eb.ready);eb.isReady=!0,a!==!0&&--eb.readyWait>0||(vb.resolveWith(ob,[eb]),eb.fn.triggerHandler&&(eb(ob).triggerHandler("ready"),eb(ob).off("ready")))}}}),eb.ready.promise=function(b){if(!vb)if(vb=eb.Deferred(),"complete"===ob.readyState)setTimeout(eb.ready);else if(ob.addEventListener)ob.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1);else{ob.attachEvent("onreadystatechange",h),a.attachEvent("onload",h);var c=!1;try{c=null==a.frameElement&&ob.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!eb.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}g(),eb.ready()}}()}return vb.promise(b)};var wb,xb="undefined";for(wb in eb(cb))break;cb.ownLast="0"!==wb,cb.inlineBlockNeedsLayout=!1,eb(function(){var a,b,c,d;c=ob.getElementsByTagName("body")[0],c&&c.style&&(b=ob.createElement("div"),d=ob.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xb&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",cb.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=ob.createElement("div");if(null==cb.deleteExpando){cb.deleteExpando=!0;try{delete a.test}catch(b){cb.deleteExpando=!1}}a=null}(),eb.acceptData=function(a){var b=eb.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var yb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,zb=/([A-Z])/g;eb.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?eb.cache[a[eb.expando]]:a[eb.expando],!!a&&!j(a)},data:function(a,b,c){return k(a,b,c)},removeData:function(a,b){return l(a,b)},_data:function(a,b,c){return k(a,b,c,!0)},_removeData:function(a,b){return l(a,b,!0)}}),eb.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=eb.data(f),1===f.nodeType&&!eb._data(f,"parsedAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=eb.camelCase(d.slice(5)),i(f,d,e[d])));eb._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){eb.data(this,a)}):arguments.length>1?this.each(function(){eb.data(this,a,b)}):f?i(f,a,eb.data(f,a)):void 0},removeData:function(a){return this.each(function(){eb.removeData(this,a)})}}),eb.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=eb._data(a,b),c&&(!d||eb.isArray(c)?d=eb._data(a,b,eb.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=eb.queue(a,b),d=c.length,e=c.shift(),f=eb._queueHooks(a,b),g=function(){eb.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return eb._data(a,c)||eb._data(a,c,{empty:eb.Callbacks("once memory").add(function(){eb._removeData(a,b+"queue"),eb._removeData(a,c)})})}}),eb.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?eb.queue(this[0],a):void 0===b?this:this.each(function(){var c=eb.queue(this,a,b);eb._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&eb.dequeue(this,a)})},dequeue:function(a){return this.each(function(){eb.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=eb.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=eb._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Ab=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Bb=["Top","Right","Bottom","Left"],Cb=function(a,b){return a=b||a,"none"===eb.css(a,"display")||!eb.contains(a.ownerDocument,a)},Db=eb.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===eb.type(c)){e=!0;for(h in c)eb.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,eb.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(eb(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Eb=/^(?:checkbox|radio)$/i;!function(){var a=ob.createElement("input"),b=ob.createElement("div"),c=ob.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",cb.leadingWhitespace=3===b.firstChild.nodeType,cb.tbody=!b.getElementsByTagName("tbody").length,cb.htmlSerialize=!!b.getElementsByTagName("link").length,cb.html5Clone="<:nav></:nav>"!==ob.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),cb.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",cb.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",cb.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,cb.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){cb.noCloneEvent=!1}),b.cloneNode(!0).click()),null==cb.deleteExpando){cb.deleteExpando=!0;try{delete b.test}catch(d){cb.deleteExpando=!1}}}(),function(){var b,c,d=ob.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(cb[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),cb[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Fb=/^(?:input|select|textarea)$/i,Gb=/^key/,Hb=/^(?:mouse|pointer|contextmenu)|click/,Ib=/^(?:focusinfocus|focusoutblur)$/,Jb=/^([^.]*)(?:\.(.+)|)$/;eb.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=eb._data(a);if(q){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=eb.guid++),(g=q.events)||(g=q.events={}),(k=q.handle)||(k=q.handle=function(a){return typeof eb===xb||a&&eb.event.triggered===a.type?void 0:eb.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(tb)||[""],h=b.length;h--;)f=Jb.exec(b[h])||[],n=p=f[1],o=(f[2]||"").split(".").sort(),n&&(j=eb.event.special[n]||{},n=(e?j.delegateType:j.bindType)||n,j=eb.event.special[n]||{},l=eb.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&eb.expr.match.needsContext.test(e),namespace:o.join(".")},i),(m=g[n])||(m=g[n]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,o,k)!==!1||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),eb.event.global[n]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=eb.hasData(a)&&eb._data(a);if(q&&(k=q.events)){for(b=(b||"").match(tb)||[""],j=b.length;j--;)if(h=Jb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=eb.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||eb.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)eb.event.remove(a,n+b[j],c,d,!0);eb.isEmptyObject(k)&&(delete q.handle,eb._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||ob],n=bb.call(b,"type")?b.type:b,o=bb.call(b,"namespace")?b.namespace.split("."):[];if(h=k=d=d||ob,3!==d.nodeType&&8!==d.nodeType&&!Ib.test(n+eb.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),g=n.indexOf(":")<0&&"on"+n,b=b[eb.expando]?b:new eb.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:eb.makeArray(c,[b]),j=eb.event.special[n]||{},e||!j.trigger||j.trigger.apply(d,c)!==!1)){if(!e&&!j.noBubble&&!eb.isWindow(d)){for(i=j.delegateType||n,Ib.test(i+n)||(h=h.parentNode);h;h=h.parentNode)m.push(h),k=h;k===(d.ownerDocument||ob)&&m.push(k.defaultView||k.parentWindow||a)}for(l=0;(h=m[l++])&&!b.isPropagationStopped();)b.type=l>1?i:j.bindType||n,f=(eb._data(h,"events")||{})[b.type]&&eb._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&eb.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=n,!e&&!b.isDefaultPrevented()&&(!j._default||j._default.apply(m.pop(),c)===!1)&&eb.acceptData(d)&&g&&d[n]&&!eb.isWindow(d)){k=d[g],k&&(d[g]=null),eb.event.triggered=n;try{d[n]()}catch(p){}eb.event.triggered=void 0,k&&(d[g]=k)}return b.result}},dispatch:function(a){a=eb.event.fix(a);var b,c,d,e,f,g=[],h=X.call(arguments),i=(eb._data(this,"events")||{})[a.type]||[],j=eb.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=eb.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(d.namespace))&&(a.handleObj=d,a.data=d.data,c=((eb.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,h),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?eb(c,this).index(i)>=0:eb.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[eb.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Hb.test(e)?this.mouseHooks:Gb.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new eb.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||ob),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||ob,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==o()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===o()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return eb.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return eb.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=eb.extend(new eb.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?eb.event.trigger(e,null,b):eb.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},eb.removeEvent=ob.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===xb&&(a[d]=null),a.detachEvent(d,c))},eb.Event=function(a,b){return this instanceof eb.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?m:n):this.type=a,b&&eb.extend(this,b),this.timeStamp=a&&a.timeStamp||eb.now(),void(this[eb.expando]=!0)):new eb.Event(a,b)},eb.Event.prototype={isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=m,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=m,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=m,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},eb.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){eb.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!eb.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),cb.submitBubbles||(eb.event.special.submit={setup:function(){return eb.nodeName(this,"form")?!1:void eb.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=eb.nodeName(b,"input")||eb.nodeName(b,"button")?b.form:void 0;c&&!eb._data(c,"submitBubbles")&&(eb.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),eb._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&eb.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return eb.nodeName(this,"form")?!1:void eb.event.remove(this,"._submit")}}),cb.changeBubbles||(eb.event.special.change={setup:function(){return Fb.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(eb.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),eb.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),eb.event.simulate("change",this,a,!0)})),!1):void eb.event.add(this,"beforeactivate._change",function(a){var b=a.target;Fb.test(b.nodeName)&&!eb._data(b,"changeBubbles")&&(eb.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||eb.event.simulate("change",this.parentNode,a,!0)}),eb._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return eb.event.remove(this,"._change"),!Fb.test(this.nodeName)}}),cb.focusinBubbles||eb.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){eb.event.simulate(b,a.target,eb.event.fix(a),!0)};eb.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=eb._data(d,b);e||d.addEventListener(a,c,!0),eb._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=eb._data(d,b)-1;e?eb._data(d,b,e):(d.removeEventListener(a,c,!0),eb._removeData(d,b))}}}),eb.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=n;else if(!d)return this;return 1===e&&(g=d,d=function(a){return eb().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=eb.guid++)),this.each(function(){eb.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,eb(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=n),this.each(function(){eb.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){eb.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?eb.event.trigger(a,b,c,!0):void 0}});var Kb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Lb=/ jQuery\d+="(?:null|\d+)"/g,Mb=new RegExp("<(?:"+Kb+")[\\s/>]","i"),Nb=/^\s+/,Ob=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pb=/<([\w:]+)/,Qb=/<tbody/i,Rb=/<|&#?\w+;/,Sb=/<(?:script|style|link)/i,Tb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ub=/^$|\/(?:java|ecma)script/i,Vb=/^true\/(.*)/,Wb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:cb.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Yb=p(ob),Zb=Yb.appendChild(ob.createElement("div"));Xb.optgroup=Xb.option,Xb.tbody=Xb.tfoot=Xb.colgroup=Xb.caption=Xb.thead,Xb.th=Xb.td,eb.extend({clone:function(a,b,c){var d,e,f,g,h,i=eb.contains(a.ownerDocument,a);if(cb.html5Clone||eb.isXMLDoc(a)||!Mb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Zb.innerHTML=a.outerHTML,Zb.removeChild(f=Zb.firstChild)),!(cb.noCloneEvent&&cb.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||eb.isXMLDoc(a)))for(d=q(f),h=q(a),g=0;null!=(e=h[g]);++g)d[g]&&x(e,d[g]);if(b)if(c)for(h=h||q(a),d=d||q(f),g=0;null!=(e=h[g]);g++)w(e,d[g]);else w(a,f);return d=q(f,"script"),d.length>0&&v(d,!i&&q(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=p(b),n=[],o=0;l>o;o++)if(f=a[o],f||0===f)if("object"===eb.type(f))eb.merge(n,f.nodeType?[f]:f);else if(Rb.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Pb.exec(f)||["",""])[1].toLowerCase(),k=Xb[i]||Xb._default,h.innerHTML=k[1]+f.replace(Ob,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!cb.leadingWhitespace&&Nb.test(f)&&n.push(b.createTextNode(Nb.exec(f)[0])),!cb.tbody)for(f="table"!==i||Qb.test(f)?"<table>"!==k[1]||Qb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)eb.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(eb.merge(n,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else n.push(b.createTextNode(f));for(h&&m.removeChild(h),cb.appendChecked||eb.grep(q(n,"input"),r),o=0;f=n[o++];)if((!d||-1===eb.inArray(f,d))&&(g=eb.contains(f.ownerDocument,f),h=q(m.appendChild(f),"script"),g&&v(h),c))for(e=0;f=h[e++];)Ub.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=eb.expando,i=eb.cache,j=cb.deleteExpando,k=eb.event.special;null!=(c=a[g]);g++)if((b||eb.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?eb.event.remove(c,d):eb.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==xb?c.removeAttribute(h):c[h]=null,W.push(e))}}}),eb.fn.extend({text:function(a){return Db(this,function(a){return void 0===a?eb.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ob).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?eb.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||eb.cleanData(q(c)),c.parentNode&&(b&&eb.contains(c.ownerDocument,c)&&v(q(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&eb.cleanData(q(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&eb.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return eb.clone(this,a,b)})},html:function(a){return Db(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(Lb,""):void 0;if(!("string"!=typeof a||Sb.test(a)||!cb.htmlSerialize&&Mb.test(a)||!cb.leadingWhitespace&&Nb.test(a)||Xb[(Pb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Ob,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(eb.cleanData(q(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,eb.cleanData(q(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Y.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=eb.isFunction(m);if(n||j>1&&"string"==typeof m&&!cb.checkClone&&Tb.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(h=eb.buildFragment(a,this[0].ownerDocument,!1,this),c=h.firstChild,1===h.childNodes.length&&(h=c),c)){for(f=eb.map(q(h,"script"),t),e=f.length;j>i;i++)d=h,i!==l&&(d=eb.clone(d,!0,!0),e&&eb.merge(f,q(d,"script"))),b.call(this[i],d,i);if(e)for(g=f[f.length-1].ownerDocument,eb.map(f,u),i=0;e>i;i++)d=f[i],Ub.test(d.type||"")&&!eb._data(d,"globalEval")&&eb.contains(g,d)&&(d.src?eb._evalUrl&&eb._evalUrl(d.src):eb.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Wb,"")));h=c=null}return this}}),eb.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){eb.fn[a]=function(a){for(var c,d=0,e=[],f=eb(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),eb(f[d])[b](c),Z.apply(e,c.get());return this.pushStack(e)}});var $b,_b={};!function(){var a;cb.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=ob.getElementsByTagName("body")[0],c&&c.style?(b=ob.createElement("div"),d=ob.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xb&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(ob.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var ac,bc,cc=/^margin/,dc=new RegExp("^("+Ab+")(?!px)[a-z%]+$","i"),ec=/^(top|right|bottom|left)$/;a.getComputedStyle?(ac=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},bc=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ac(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||eb.contains(a.ownerDocument,a)||(g=eb.style(a,b)),dc.test(g)&&cc.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):ob.documentElement.currentStyle&&(ac=function(a){return a.currentStyle
},bc=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ac(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),dc.test(g)&&!ec.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"}),function(){function b(){var b,c,d,e;c=ob.getElementsByTagName("body")[0],c&&c.style&&(b=ob.createElement("div"),d=ob.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f=g=!1,i=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(b,null)||{}).top,g="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,e=b.appendChild(ob.createElement("div")),e.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",b.style.width="1px",i=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=b.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",h=0===e[0].offsetHeight,h&&(e[0].style.display="",e[1].style.display="none",h=0===e[0].offsetHeight),c.removeChild(d))}var c,d,e,f,g,h,i;c=ob.createElement("div"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=c.getElementsByTagName("a")[0],d=e&&e.style,d&&(d.cssText="float:left;opacity:.5",cb.opacity="0.5"===d.opacity,cb.cssFloat=!!d.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",cb.clearCloneStyle="content-box"===c.style.backgroundClip,cb.boxSizing=""===d.boxSizing||""===d.MozBoxSizing||""===d.WebkitBoxSizing,eb.extend(cb,{reliableHiddenOffsets:function(){return null==h&&b(),h},boxSizingReliable:function(){return null==g&&b(),g},pixelPosition:function(){return null==f&&b(),f},reliableMarginRight:function(){return null==i&&b(),i}}))}(),eb.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var fc=/alpha\([^)]*\)/i,gc=/opacity\s*=\s*([^)]*)/,hc=/^(none|table(?!-c[ea]).+)/,ic=new RegExp("^("+Ab+")(.*)$","i"),jc=new RegExp("^([+-])=("+Ab+")","i"),kc={position:"absolute",visibility:"hidden",display:"block"},lc={letterSpacing:"0",fontWeight:"400"},mc=["Webkit","O","Moz","ms"];eb.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bc(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":cb.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=eb.camelCase(b),i=a.style;if(b=eb.cssProps[h]||(eb.cssProps[h]=B(i,h)),g=eb.cssHooks[b]||eb.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=jc.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(eb.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||eb.cssNumber[h]||(c+="px"),cb.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=eb.camelCase(b);return b=eb.cssProps[h]||(eb.cssProps[h]=B(a.style,h)),g=eb.cssHooks[b]||eb.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=bc(a,b,d)),"normal"===f&&b in lc&&(f=lc[b]),""===c||c?(e=parseFloat(f),c===!0||eb.isNumeric(e)?e||0:f):f}}),eb.each(["height","width"],function(a,b){eb.cssHooks[b]={get:function(a,c,d){return c?hc.test(eb.css(a,"display"))&&0===a.offsetWidth?eb.swap(a,kc,function(){return F(a,b,d)}):F(a,b,d):void 0},set:function(a,c,d){var e=d&&ac(a);return D(a,c,d?E(a,b,d,cb.boxSizing&&"border-box"===eb.css(a,"boxSizing",!1,e),e):0)}}}),cb.opacity||(eb.cssHooks.opacity={get:function(a,b){return gc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=eb.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===eb.trim(f.replace(fc,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=fc.test(f)?f.replace(fc,e):f+" "+e)}}),eb.cssHooks.marginRight=A(cb.reliableMarginRight,function(a,b){return b?eb.swap(a,{display:"inline-block"},bc,[a,"marginRight"]):void 0}),eb.each({margin:"",padding:"",border:"Width"},function(a,b){eb.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Bb[d]+b]=f[d]||f[d-2]||f[0];return e}},cc.test(a)||(eb.cssHooks[a+b].set=D)}),eb.fn.extend({css:function(a,b){return Db(this,function(a,b,c){var d,e,f={},g=0;if(eb.isArray(b)){for(d=ac(a),e=b.length;e>g;g++)f[b[g]]=eb.css(a,b[g],!1,d);return f}return void 0!==c?eb.style(a,b,c):eb.css(a,b)},a,b,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Cb(this)?eb(this).show():eb(this).hide()})}}),eb.Tween=G,G.prototype={constructor:G,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(eb.cssNumber[c]?"":"px")},cur:function(){var a=G.propHooks[this.prop];return a&&a.get?a.get(this):G.propHooks._default.get(this)},run:function(a){var b,c=G.propHooks[this.prop];return this.pos=b=this.options.duration?eb.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):G.propHooks._default.set(this),this}},G.prototype.init.prototype=G.prototype,G.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=eb.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){eb.fx.step[a.prop]?eb.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[eb.cssProps[a.prop]]||eb.cssHooks[a.prop])?eb.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},eb.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},eb.fx=G.prototype.init,eb.fx.step={};var nc,oc,pc=/^(?:toggle|show|hide)$/,qc=new RegExp("^(?:([+-])=|)("+Ab+")([a-z%]*)$","i"),rc=/queueHooks$/,sc=[K],tc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=qc.exec(b),f=e&&e[3]||(eb.cssNumber[a]?"":"px"),g=(eb.cssNumber[a]||"px"!==f&&+d)&&qc.exec(eb.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,eb.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};eb.Animation=eb.extend(M,{tweener:function(a,b){eb.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],tc[c]=tc[c]||[],tc[c].unshift(b)},prefilter:function(a,b){b?sc.unshift(a):sc.push(a)}}),eb.speed=function(a,b,c){var d=a&&"object"==typeof a?eb.extend({},a):{complete:c||!c&&b||eb.isFunction(a)&&a,duration:a,easing:c&&b||b&&!eb.isFunction(b)&&b};return d.duration=eb.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in eb.fx.speeds?eb.fx.speeds[d.duration]:eb.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){eb.isFunction(d.old)&&d.old.call(this),d.queue&&eb.dequeue(this,d.queue)},d},eb.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Cb).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=eb.isEmptyObject(a),f=eb.speed(b,c,d),g=function(){var b=M(this,eb.extend({},a),f);(e||eb._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=eb.timers,g=eb._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&eb.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=eb._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=eb.timers,g=d?d.length:0;for(c.finish=!0,eb.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),eb.each(["toggle","show","hide"],function(a,b){var c=eb.fn[b];eb.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(I(b,!0),a,d,e)}}),eb.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){eb.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),eb.timers=[],eb.fx.tick=function(){var a,b=eb.timers,c=0;for(nc=eb.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||eb.fx.stop(),nc=void 0},eb.fx.timer=function(a){eb.timers.push(a),a()?eb.fx.start():eb.timers.pop()},eb.fx.interval=13,eb.fx.start=function(){oc||(oc=setInterval(eb.fx.tick,eb.fx.interval))},eb.fx.stop=function(){clearInterval(oc),oc=null},eb.fx.speeds={slow:600,fast:200,_default:400},eb.fn.delay=function(a,b){return a=eb.fx?eb.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=ob.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=ob.createElement("select"),e=c.appendChild(ob.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",cb.getSetAttribute="t"!==b.className,cb.style=/top/.test(d.getAttribute("style")),cb.hrefNormalized="/a"===d.getAttribute("href"),cb.checkOn=!!a.value,cb.optSelected=e.selected,cb.enctype=!!ob.createElement("form").enctype,c.disabled=!0,cb.optDisabled=!e.disabled,a=ob.createElement("input"),a.setAttribute("value",""),cb.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),cb.radioValue="t"===a.value}();var uc=/\r/g;eb.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=eb.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,eb(this).val()):a,null==e?e="":"number"==typeof e?e+="":eb.isArray(e)&&(e=eb.map(e,function(a){return null==a?"":a+""})),b=eb.valHooks[this.type]||eb.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=eb.valHooks[e.type]||eb.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(uc,""):null==c?"":c)}}}),eb.extend({valHooks:{option:{get:function(a){var b=eb.find.attr(a,"value");return null!=b?b:eb.trim(eb.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(cb.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&eb.nodeName(c.parentNode,"optgroup"))){if(b=eb(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=eb.makeArray(b),g=e.length;g--;)if(d=e[g],eb.inArray(eb.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),eb.each(["radio","checkbox"],function(){eb.valHooks[this]={set:function(a,b){return eb.isArray(b)?a.checked=eb.inArray(eb(a).val(),b)>=0:void 0}},cb.checkOn||(eb.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var vc,wc,xc=eb.expr.attrHandle,yc=/^(?:checked|selected)$/i,zc=cb.getSetAttribute,Ac=cb.input;eb.fn.extend({attr:function(a,b){return Db(this,eb.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){eb.removeAttr(this,a)})}}),eb.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===xb?eb.prop(a,b,c):(1===f&&eb.isXMLDoc(a)||(b=b.toLowerCase(),d=eb.attrHooks[b]||(eb.expr.match.bool.test(b)?wc:vc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=eb.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void eb.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(tb);if(f&&1===a.nodeType)for(;c=f[e++];)d=eb.propFix[c]||c,eb.expr.match.bool.test(c)?Ac&&zc||!yc.test(c)?a[d]=!1:a[eb.camelCase("default-"+c)]=a[d]=!1:eb.attr(a,c,""),a.removeAttribute(zc?c:d)},attrHooks:{type:{set:function(a,b){if(!cb.radioValue&&"radio"===b&&eb.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),wc={set:function(a,b,c){return b===!1?eb.removeAttr(a,c):Ac&&zc||!yc.test(c)?a.setAttribute(!zc&&eb.propFix[c]||c,c):a[eb.camelCase("default-"+c)]=a[c]=!0,c}},eb.each(eb.expr.match.bool.source.match(/\w+/g),function(a,b){var c=xc[b]||eb.find.attr;xc[b]=Ac&&zc||!yc.test(b)?function(a,b,d){var e,f;return d||(f=xc[b],xc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,xc[b]=f),e}:function(a,b,c){return c?void 0:a[eb.camelCase("default-"+b)]?b.toLowerCase():null}}),Ac&&zc||(eb.attrHooks.value={set:function(a,b,c){return eb.nodeName(a,"input")?void(a.defaultValue=b):vc&&vc.set(a,b,c)}}),zc||(vc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},xc.id=xc.name=xc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},eb.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:vc.set},eb.attrHooks.contenteditable={set:function(a,b,c){vc.set(a,""===b?!1:b,c)}},eb.each(["width","height"],function(a,b){eb.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),cb.style||(eb.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var Bc=/^(?:input|select|textarea|button|object)$/i,Cc=/^(?:a|area)$/i;eb.fn.extend({prop:function(a,b){return Db(this,eb.prop,a,b,arguments.length>1)},removeProp:function(a){return a=eb.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),eb.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!eb.isXMLDoc(a),f&&(b=eb.propFix[b]||b,e=eb.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=eb.find.attr(a,"tabindex");return b?parseInt(b,10):Bc.test(a.nodeName)||Cc.test(a.nodeName)&&a.href?0:-1}}}}),cb.hrefNormalized||eb.each(["href","src"],function(a,b){eb.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),cb.optSelected||(eb.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),eb.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){eb.propFix[this.toLowerCase()]=this}),cb.enctype||(eb.propFix.enctype="encoding");var Dc=/[\t\r\n\f]/g;eb.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(eb.isFunction(a))return this.each(function(b){eb(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(tb)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Dc," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=eb.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(eb.isFunction(a))return this.each(function(b){eb(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(tb)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Dc," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?eb.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(eb.isFunction(a)?function(c){eb(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=eb(this),f=a.match(tb)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===xb||"boolean"===c)&&(this.className&&eb._data(this,"__className__",this.className),this.className=this.className||a===!1?"":eb._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Dc," ").indexOf(b)>=0)return!0;return!1}}),eb.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){eb.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),eb.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Ec=eb.now(),Fc=/\?/,Gc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;eb.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=eb.trim(b+"");return e&&!eb.trim(e.replace(Gc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():eb.error("Invalid JSON: "+b)},eb.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||eb.error("Invalid XML: "+b),c};var Hc,Ic,Jc=/#.*$/,Kc=/([?&])_=[^&]*/,Lc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nc=/^(?:GET|HEAD)$/,Oc=/^\/\//,Pc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Qc={},Rc={},Sc="*/".concat("*");try{Ic=location.href}catch(Tc){Ic=ob.createElement("a"),Ic.href="",Ic=Ic.href}Hc=Pc.exec(Ic.toLowerCase())||[],eb.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ic,type:"GET",isLocal:Mc.test(Hc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":eb.parseJSON,"text xml":eb.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?P(P(a,eb.ajaxSettings),b):P(eb.ajaxSettings,a)},ajaxPrefilter:N(Qc),ajaxTransport:N(Rc),ajax:function(a,b){function c(a,b,c,d){var e,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),j=void 0,g=d||"",v.readyState=a>0?4:0,e=a>=200&&300>a||304===a,c&&(s=Q(l,v,c)),s=R(l,s,v,e),e?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(eb.lastModified[f]=u),u=v.getResponseHeader("etag"),u&&(eb.etag[f]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,e=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",e?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,i&&n.trigger(e?"ajaxSuccess":"ajaxError",[v,l,e?k:r]),p.fireWith(m,[v,w]),i&&(n.trigger("ajaxComplete",[v,l]),--eb.active||eb.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=eb.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?eb(m):eb.event,o=eb.Deferred(),p=eb.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!k)for(k={};b=Lc.exec(g);)k[b[1].toLowerCase()]=b[2];b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return j&&j.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||Ic)+"").replace(Jc,"").replace(Oc,Hc[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=eb.trim(l.dataType||"*").toLowerCase().match(tb)||[""],null==l.crossDomain&&(d=Pc.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Hc[1]&&d[2]===Hc[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Hc[3]||("http:"===Hc[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=eb.param(l.data,l.traditional)),O(Qc,l,b,v),2===t)return v;i=l.global,i&&0===eb.active++&&eb.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Nc.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fc.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Kc.test(f)?f.replace(Kc,"$1_="+Ec++):f+(Fc.test(f)?"&":"?")+"_="+Ec++)),l.ifModified&&(eb.lastModified[f]&&v.setRequestHeader("If-Modified-Since",eb.lastModified[f]),eb.etag[f]&&v.setRequestHeader("If-None-Match",eb.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Sc+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)v.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(e in{success:1,error:1,complete:1})v[e](l[e]);if(j=O(Rc,l,b,v)){v.readyState=1,i&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,j.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return eb.get(a,b,c,"json")},getScript:function(a,b){return eb.get(a,void 0,b,"script")}}),eb.each(["get","post"],function(a,b){eb[b]=function(a,c,d,e){return eb.isFunction(c)&&(e=e||d,d=c,c=void 0),eb.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),eb.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){eb.fn[b]=function(a){return this.on(b,a)}}),eb._evalUrl=function(a){return eb.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},eb.fn.extend({wrapAll:function(a){if(eb.isFunction(a))return this.each(function(b){eb(this).wrapAll(a.call(this,b))});if(this[0]){var b=eb(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(eb.isFunction(a)?function(b){eb(this).wrapInner(a.call(this,b))}:function(){var b=eb(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=eb.isFunction(a);return this.each(function(c){eb(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){eb.nodeName(this,"body")||eb(this).replaceWith(this.childNodes)}).end()}}),eb.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!cb.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||eb.css(a,"display"))},eb.expr.filters.visible=function(a){return!eb.expr.filters.hidden(a)};var Uc=/%20/g,Vc=/\[\]$/,Wc=/\r?\n/g,Xc=/^(?:submit|button|image|reset|file)$/i,Yc=/^(?:input|select|textarea|keygen)/i;eb.param=function(a,b){var c,d=[],e=function(a,b){b=eb.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=eb.ajaxSettings&&eb.ajaxSettings.traditional),eb.isArray(a)||a.jquery&&!eb.isPlainObject(a))eb.each(a,function(){e(this.name,this.value)});else for(c in a)S(c,a[c],b,e);return d.join("&").replace(Uc,"+")},eb.fn.extend({serialize:function(){return eb.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=eb.prop(this,"elements");return a?eb.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!eb(this).is(":disabled")&&Yc.test(this.nodeName)&&!Xc.test(a)&&(this.checked||!Eb.test(a))}).map(function(a,b){var c=eb(this).val();return null==c?null:eb.isArray(c)?eb.map(c,function(a){return{name:b.name,value:a.replace(Wc,"\r\n")}}):{name:b.name,value:c.replace(Wc,"\r\n")}}).get()}}),eb.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&T()||U()}:T;var Zc=0,$c={},_c=eb.ajaxSettings.xhr();a.ActiveXObject&&eb(a).on("unload",function(){for(var a in $c)$c[a](void 0,!0)}),cb.cors=!!_c&&"withCredentials"in _c,_c=cb.ajax=!!_c,_c&&eb.ajaxTransport(function(a){if(!a.crossDomain||cb.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Zc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete $c[g],b=void 0,f.onreadystatechange=eb.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=$c[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),eb.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return eb.globalEval(a),a}}}),eb.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),eb.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=ob.head||eb("head")[0]||ob.documentElement;return{send:function(d,e){b=ob.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ad=[],bd=/(=)\?(?=&|$)|\?\?/;eb.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ad.pop()||eb.expando+"_"+Ec++;return this[a]=!0,a}}),eb.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=eb.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bd,"$1"+e):b.jsonp!==!1&&(b.url+=(Fc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||eb.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ad.push(e)),g&&eb.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),eb.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||ob;var d=lb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=eb.buildFragment([a],b,e),e&&e.length&&eb(e).remove(),eb.merge([],d.childNodes))};var cd=eb.fn.load;eb.fn.load=function(a,b,c){if("string"!=typeof a&&cd)return cd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=eb.trim(a.slice(h,a.length)),a=a.slice(0,h)),eb.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&eb.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?eb("<div>").append(eb.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},eb.expr.filters.animated=function(a){return eb.grep(eb.timers,function(b){return a===b.elem}).length};var dd=a.document.documentElement;eb.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=eb.css(a,"position"),l=eb(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=eb.css(a,"top"),i=eb.css(a,"left"),j=("absolute"===k||"fixed"===k)&&eb.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),eb.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},eb.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){eb.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,eb.contains(b,e)?(typeof e.getBoundingClientRect!==xb&&(d=e.getBoundingClientRect()),c=V(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===eb.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),eb.nodeName(a[0],"html")||(c=a.offset()),c.top+=eb.css(a[0],"borderTopWidth",!0),c.left+=eb.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-eb.css(d,"marginTop",!0),left:b.left-c.left-eb.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||dd;a&&!eb.nodeName(a,"html")&&"static"===eb.css(a,"position");)a=a.offsetParent;return a||dd})}}),eb.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);eb.fn[a]=function(d){return Db(this,function(a,d,e){var f=V(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?eb(f).scrollLeft():e,c?e:eb(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),eb.each(["top","left"],function(a,b){eb.cssHooks[b]=A(cb.pixelPosition,function(a,c){return c?(c=bc(a,b),dc.test(c)?eb(a).position()[b]+"px":c):void 0})}),eb.each({Height:"height",Width:"width"},function(a,b){eb.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){eb.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Db(this,function(b,c,d){var e;return eb.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?eb.css(b,c,g):eb.style(b,c,d,g)
},b,f?d:void 0,f,null)}})}),eb.fn.size=function(){return this.length},eb.fn.andSelf=eb.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return eb});var ed=a.jQuery,fd=a.$;return eb.noConflict=function(b){return a.$===eb&&(a.$=fd),b&&a.jQuery===eb&&(a.jQuery=ed),eb},typeof b===xb&&(a.jQuery=a.$=eb),eb}),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.4.4";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?null:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;d.computed>g&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(b||x.identity);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;e>c.call(d,a[h])?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(i.apply(d,arguments))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=Array(b),d=0;b>d;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);d>e;)f[e++]=a,a+=c;return f},x.bind=function(a,b){if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));var c=h.call(arguments,2);return function(){return a.apply(b,c.concat(h.call(arguments)))}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);return 0===b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return 0>=a?b():function(){return 1>--a?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var E=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==b+"";case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=E(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&E(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return E(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=x.invert(F.escape);var G={escape:RegExp("["+x.keys(F.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(F.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(G[a],function(b){return F[a][b]})}}),x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),L.call(this,c.apply(x,a))}})};var H=0;x.uniqueId=function(a){var b=++H+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(K,function(a){return"\\"+J[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var L=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],L.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return L.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var a,b=this,c=b.Backbone,d=[],e=d.push,f=d.slice,g=d.splice;a="undefined"!=typeof exports?exports:b.Backbone={},a.VERSION="1.0.0";var h=b._;h||"undefined"==typeof require||(h=require("underscore")),a.$=b.jQuery||b.Zepto||b.ender||b.$,a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=a.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!k(this,"once",a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,i,j,l,m;if(!this._events||!k(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:h.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=f.length;m>l;l++)e=f[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(j.test(c)){for(var f=c.split(j),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},l=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m={listenTo:"on",listenToOnce:"once"};h.each(m,function(a,b){i[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=h.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),i.bind=i.on,i.unbind=i.off,h.extend(a,i);var n=a.Model=function(a,b){var c,d=a||{};b||(b={}),this.cid=h.uniqueId("c"),this.attributes={},h.extend(this,h.pick(b,o)),b.parse&&(d=this.parse(d,b)||{}),(c=h.result(this,"defaults"))&&(d=h.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},o=["url","urlRoot","collection"];h.extend(n.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,i,j,k,l;if(null==a)return this;if("object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,i=c.silent,g=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=h.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(l[d],b)||g.push(d),h.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!i){g.length&&(this._pending=!0);for(var m=0,n=g.length;n>m;m++)this.trigger("change:"+g[m],this,l[g[m]],c)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)h.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d){return b.set(b.parse(d,a),a)?(c&&c(b,d,a),void b.trigger("sync",b,d,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g=this.attributes;if(null==a||"object"==typeof a?(d=a,c=b):(d={})[a]=b,!(!d||c&&c.wait||this.set(d,c)))return!1;if(c=h.extend({validate:!0},c),!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=h.extend({},g,d)),void 0===c.parse&&(c.parse=!0);var i=this,j=c.success;return c.success=function(a){i.attributes=g;var b=i.parse(a,c);return c.wait&&(b=h.extend(d||{},b)),h.isObject(b)&&!i.set(b,c)?!1:(j&&j(i,a,c),void i.trigger("sync",i,a,c))},L(this,c),e=this.isNew()?"create":c.patch?"patch":"update","patch"===e&&(c.attrs=d),f=this.sync(e,this,c),d&&c.wait&&(this.attributes=g),f},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a),b.isNew()||b.trigger("sync",b,e,a)},this.isNew())return a.success(),!1;L(this,a);var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||K();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},h.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,h.extend(b||{},{validationError:c})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(a){n.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.attributes),h[a].apply(h,b)}});var q=a.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,h.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,merge:!1,remove:!1};h.extend(q.prototype,i,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,h.defaults(b||{},s))},remove:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d>c;c++)f=this.get(a[c]),f&&(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f));return this},set:function(a,b){b=h.defaults(b||{},r),b.parse&&(a=this.parse(a,b)),h.isArray(a)||(a=a?[a]:[]);var c,d,f,i,j,k=b.at,l=this.comparator&&null==k&&b.sort!==!1,m=h.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(c=0,d=a.length;d>c;c++)(f=this._prepareModel(a[c],b))&&((i=this.get(f))?(b.remove&&(p[i.cid]=!0),b.merge&&(i.set(f.attributes,b),l&&!j&&i.hasChanged(m)&&(j=!0))):b.add&&(n.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)));if(b.remove){for(c=0,d=this.length;d>c;++c)p[(f=this.models[c]).cid]||o.push(f);o.length&&this.remove(o,b)}if(n.length&&(l&&(j=!0),this.length+=n.length,null!=k?g.apply(this.models,[k,0].concat(n)):e.apply(this.models,n)),j&&this.sort({silent:!0}),b.silent)return this;for(c=0,d=n.length;d>c;c++)(f=n[c]).trigger("add",f,this,b);return j&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,d,c)},pluck:function(a){return h.invoke(this.models,"get",a)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?"reset":"set";c[e](d,a),b&&b(c,d,a),c.trigger("sync",c,d,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?h.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(e){b.wait&&c.add(a,b),d&&d(a,e,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var t=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(t,function(a){q.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var u=["groupBy","countBy","sortBy"];h.each(u,function(a){q.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var v=a.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(v.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(b,c){return this.$el&&this.undelegateEvents(),this.$el=b instanceof a.$?b:a.$(b),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(h.isFunction(c)||(c=this[a[b]]),c){var d=b.match(w),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,c):this.$el.on(e,f,c)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a)),h.extend(this,h.pick(a,x)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),!1);else{var b=h.extend({},h.result(this,"attributes"));this.id&&(b.id=h.result(this,"id")),this.className&&(b["class"]=h.result(this,"className"));var c=a.$("<"+h.result(this,"tagName")+">").attr(b);this.setElement(c,!1)}}}),a.sync=function(b,c,d){var e=y[b];h.defaults(d||(d={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=h.result(c,"url")||K()),null!=d.data||!c||"create"!==b&&"update"!==b&&"patch"!==b||(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"===f.type||d.emulateJSON||(f.processData=!1),"PATCH"!==f.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=d.xhr=a.ajax(h.extend(f,d));return c.trigger("request",c,i,d),i};var y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var z=a.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,C=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(z.prototype,i,{initialize:function(){},route:function(b,c,d){h.isRegExp(b)||(b=this._routeToRegExp(b)),h.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return a.history.route(b,function(f){var g=e._extractParameters(b,f);d&&d.apply(e,g),e.trigger.apply(e,["route:"+c].concat(g)),e.trigger("route",c,g),a.history.trigger("route",e,c,g)}),this},navigate:function(b,c){return a.history.navigate(b,c),this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var a,b=h.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(D,"\\$&").replace(A,"(?:$1)?").replace(B,function(a,b){return b?a:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return h.map(c,function(a){return a?decodeURIComponent(a):null})}});var E=a.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,G=/^\/+|\/+$/g,H=/msie [\w.]+/,I=/\/$/;E.started=!1,h.extend(E.prototype,i,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(I,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(F,"")},start:function(b){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=h.extend({},{root:"/"},this.options,b),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=H.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(G,"/"),e&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&g&&f.hash&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment+f.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!E.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),a.history=new E;var J=function(a,b){var c,d=this;c=a&&h.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)
},h.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&h.extend(c.prototype,a),c.__super__=d.prototype,c};n.extend=q.extend=z.extend=v.extend=E.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}}}.call(this),function(a,b,c,d,e,f,g){"use strict";"object"==typeof d?e.exports=f(c("underscore"),c("backbone"),c("jquery")):"function"==typeof b&&b.amd?b(["../","backbone","jquery"],function(b,c,d){return b=b===g?a._:b,c=c===g?a.Backbone:c,d=d===g?a.$:d,a.Backbone=f(b,c,d)}):a.returnExportsGlobal=f(a._,a.Backbone,a.$)}(this,this.define,this.require,this.exports,this.module,function(a,b,c,d){"use strict";var e=function(b){this.options=b!==d?b:{},this.namespaceDelimiter=b!==d&&b.namespaceDelimiter!==d?b.namespaceDelimiter:this.namespaceDelimiter,this.contentType=b!==d&&b.contentType!==d?b.contentType:this.contentType,a.bindAll(this)},f=b.Model.prototype.constructor,g=b.sync,h={};return e.prototype={options:{},charset:"iso-8859-1",namespace:"",namespaceDelimiter:"/",contentType:"application/json",url:null,responseID:null,exceptions:{404:{code:-1,message:"404"},500:{code:-2,message:"500"},typeMissmatch:{code:-3,message:"Type missmatch"},badResponseId:{code:-4,message:"Bad response ID"},noResponse:{code:-5,message:"No response"},noDefError:{code:-6,message:"No error defined"},renderError:function(a,b){return{code:b!==d?-7:b,message:a?"No error defined":a}}},onSuccess:function(b,c,e){if(a.isFunction(b)===!0){if(null===e||e===d)return this.handleExceptions(this.exceptions.noResponse),this;null!==e&&c!==String(e.id)&&this.handleExceptions(this.exceptions.badResponseId),b.apply(this,[e.result,e.error])}else this.onError(e)},onError:function(a,b){return null===b||b===d?(this.handleExceptions(this.exceptions.noResponse),this):void this.handleExceptions(null!==b.error&&d!==b.error?b.error:this.exceptions.noDefError)},query:function(b,e,f){var g=String((new Date).getTime()),h=null;return this.responseID=g,h=a.isArray(e)&&a.isString(b)?c.ajax({contentType:this.contentType+"; charset="+this.charset,type:"POST",dataType:"json",url:this.url,data:JSON.stringify({jsonrpc:"2.0",method:this.namespace+this.namespaceDelimiter+b,id:g,params:e}),statusCode:{404:a.bind(function(){this.handleExceptions(this.exceptions[404])},this),500:a.bind(function(){this.handleExceptions(this.exceptions[500])},this)},success:a.bind(function(a,b,c){null!==a&&a.error!==d?this.onError(f,a,b,c):this.onSuccess(f,g,a,b,c)},this),error:a.bind(function(a,b,c){404!==a.status&&500!==a.status&&this.onError(f,a,b,c)},this)}):this.handleExceptions(this.exceptions.typeMissmatch)},checkMethods:function(c,e,f,g,i,j,k){var l=null,m=!1,n=null,o=[],p={},q=null;return g="delete"===g?"remove":g,a.isArray(f.methods[g])||a.isFunction(f.methods[g])?(a.isFunction(f.methods[g])?(a.isString(h[f.get("_rpcId")])||a.each(h[f.get("_rpcId")],function(a,b){f.get(b)!==a&&(p[b]=!0)}),h[f.get("_rpcId")]=f.toJSON(),l=a.bind(f.methods[g],f)(p,i)):l=f.methods[g],a.isArray(l[0])&&(m=!0),m!==!0?(q=a.clone(l),n=q.shift(),q.length>0?a.each(q,function(c){""===c?o.push(""):f instanceof b.Collection?f[c]!==d?o.push(a.isFunction(f[c])?f[c]():f[c]):i[c]!==d&&o.push(i[c]):f.get(c)!==d?o.push(f.get(c)):(i[c]!==d&&o.push(i[c]),console.log(c))}):o=[],c(n,o,j,k)):(a.each(l,function(b){var d=a.clone(b);return n=null,o=[],n=d.shift(),a.each(d,function(a){o.push(f.get(a))}),c(n,o,j,k)}),null)):this.handleExceptions(this.exceptions.typeMissmatch)},invoke:function(c,e,f){var g={success:function(b){e.trigger("called:"+c,e,b),f!==d&&a.isFunction(f.success)&&f.success(e,b)},error:function(b,e){b.trigger("error",b,e),b.trigger("error:"+c,b,e),f!==d&&a.isFunction(f.error)&&f.error(b,e)}};return b.sync(c,e,g),this},defaultExceptionHandler:function(a){throw"Error code: "+a.code+" - message: "+a.message},handleExceptions:function(b){var c=a.isFunction(this.options.exceptionHandler)?this.options.exceptionHandler:this.defaultExceptionHandler;return c.call(this,b),this}},b.Rpc=e,b.Model=b.Model.extend({constructor:function(){this.rpc!==d&&a.isFunction(this.rpc.invoke)===!0&&this.methods!==d&&a.each(this.methods,a.bind(function(b,c){1!=={read:1,create:1,remove:1,update:1}[c]&&(this[c]=a.bind(function(a){return this.rpc.invoke(c,this,a),this},this))},this)),f.apply(this,arguments)}}),b.sync=function(c){var e=null,f=function(g,i,j){var k=function(c,e){return null!==e&&e!==d?(j.error(i,e),this):(i instanceof b.Collection&&c!==d&&null!==c&&("object"==typeof c[0]?a.each(c,function(b,d){b._rpcId=a.uniqueId("rpc_"),c[d]=b,h[b._rpcId]=b}):a.each(c,function(a,b){h[b]=a})),i instanceof b.Model&&c!==d&&null!==c&&(c._rpcId=a.uniqueId("rpc_"),h[c._rpcId]=c),(c===d||null===c)&&(c=[]),i.parsers!==d&&i.parsers[g]!==d&&a.isFunction(i.parsers[g])&&i.parsers[g].apply(i,[c]),void j.success(c))},l=function(a){j.error(i,a)};if(i.rpc instanceof c){if(e=i.rpc,e.url=a.isFunction(i.url)?i.url():i.url,a.isString(i.namespace)===!0&&(e.namespace=i.namespace),i.methods===d)throw"Backbone.Rpc Error: No Method(s) given!";return"object"!=typeof i.params&&(i.params={}),e.checkMethods(e.query,i.params,i,g,j,k,l)}return f.previous.apply(i,arguments)};return f.previous=g,f}(e),b}),!function(a){a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),!function(a){var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){function b(){a(".dropdown-backdrop").remove(),a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(){var d,e,f=a(this);if(!f.is(".disabled, :disabled"))return d=c(f),e=d.hasClass("open"),b(),e||("ontouchstart"in document.documentElement&&a('<div class="dropdown-backdrop"/>').insertBefore(a(this)).on("click",b),d.toggleClass("open")),f.focus(),!1},keydown:function(b){var e,f,g,h,i;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(g=c(e),h=g.hasClass("open"),!h||h&&27==b.keyCode)return 27==b.which&&g.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",g),f.length&&(i=f.index(f.filter(":focus")),38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<f.length-1&&i++,~i||(i=0),f.eq(i).focus())}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),!function(a){function b(b,c){var d,e=a.proxy(this.process,this),f=a(a(b).is("body")?window:b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=f.on("scroll.scroll-spy.data-api",e),this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b,c=this;this.offsets=a([]),this.targets=a([]),b=this.$body.find(this.selector).map(function(){var b=a(this),d=b.data("target")||b.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},process:function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f="object"==typeof c&&c;e||d.data("scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b,c,d,e=this.element,f=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,"")),e.parent("li").hasClass("active")||(b=f.find(".active:last a")[0],d=a.Event("show",{relatedTarget:b}),e.trigger(d),d.isDefaultPrevented()||(c=a(g),this.activate(e.parent("li"),f),this.activate(c,c.parent(),function(){e.trigger({type:"shown",relatedTarget:b})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};return this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="affix affix-top affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=g&&e.top+this.$element.height()>=c-g?"bottom":null!=h&&h>=d?"top":!1,this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?e.top-d:null,this.$element.removeClass(i).addClass("affix"+(b?"-"+b:"")))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),!function(a){var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){d.trigger("closed").remove()}var d,e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),d=a(f),b&&b.preventDefault(),d.length||(d=e.hasClass("alert")?e:e.parent()),d.trigger(b=a.Event("close")),b.isDefaultPrevented()||(d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,c):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f="object"==typeof c&&c;e||d.data("button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning&&!this.$element.hasClass("in")){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in"),d&&d.length){if(e=d.data("collapse"),e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;!this.transitioning&&this.$element.hasClass("in")&&(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),"object"==typeof c&&c);e||d.data("collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":d.data();d[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(!(b>this.$items.length-1||0>b))return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(b,c){var d,e=this.$element.find(".item.active"),f=c||e[b](),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(this.sliding=!0,g&&this.pause(),f=f.length?f:this.$element.find(".item")[i](),d=a.Event("slide",{relatedTarget:f[0],direction:h}),!f.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(j.$indicators.children()[j.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(d),d.isDefaultPrevented())return;f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),this.$element.one(a.support.transition.end,function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger("slid")},0)})}else{if(this.$element.trigger(d),d.isDefaultPrevented())return;e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return g&&this.cycle(),this}}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d,e=a(this),f=a(e.attr("data-target")||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),g=a.extend({},f.data(),e.data());f.carousel(g),(d=e.attr("data-slide-to"))&&f.data("carousel").pause().to(d).cycle(),b.preventDefault()})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var b;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(b=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,b?this.process(b):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(){var b=this.$menu.find(".active").removeClass("active"),c=b.next();c.length||(c=a(this.$menu.find("li")[0])),c.addClass("active")},prev:function(){var a=this.$menu.find(".active").removeClass("active"),b=a.prev();b.length||(b=this.$menu.find("li").last()),b.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()
}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var b=a(this);b.data("typeahead")||b.typeahead(b.data())})}(window.jQuery),!function(){var a,b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:this.escapeExpression(a.label),children:0,disabled:a.disabled}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},a.prototype.escapeExpression=function(a){var b,c;return null==a||a===!1?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},a}(),d.select_to_array=function(a){var b,c,e,f,g;for(c=new d,g=a.childNodes,e=0,f=g.length;f>e;e++)b=g[e],c.add_node(b);return c.parsed},b=function(){function a(b,c){this.form_field=b,this.options=null!=c?c:{},a.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},a.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||a.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||a.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||a.default_no_result_text},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(){var a=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},a.prototype.input_blur=function(){var a=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return a.blur_test()},100))},a.prototype.results_option_build=function(a){var b,c,d,e,f;for(b="",f=this.results_data,d=0,e=f.length;e>d;d++)c=f[d],b+=c.group?this.result_add_group(c):this.result_add_option(c),(null!=a?a.first:void 0)&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(c.text));return b},a.prototype.result_add_option=function(a){var b,c;return a.search_match?this.include_option_in_results(a)?(b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=""!==a.style.cssText?' style="'+a.style+'"':"",'<li class="'+b.join(" ")+'"'+c+' data-option-array-index="'+a.array_index+'">'+a.search_text+"</li>"):"":""},a.prototype.result_add_group=function(a){return a.search_match||a.group_match?a.active_options>0?'<li class="group-result">'+a.search_text+"</li>":"":""},a.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing?this.winnow_results():void 0},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.winnow_results=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;for(this.no_results_clear(),e=0,g=this.get_search_text(),a=g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),d=this.search_contains?"":"^",c=new RegExp(d+a,"i"),j=new RegExp(a,"i"),m=this.results_data,k=0,l=m.length;l>k;k++)b=m[k],b.search_match=!1,f=null,this.include_option_in_results(b)&&(b.group&&(b.group_match=!1,b.active_options=0),null!=b.group_array_index&&this.results_data[b.group_array_index]&&(f=this.results_data[b.group_array_index],0===f.active_options&&f.search_match&&(e+=1),f.active_options+=1),(!b.group||this.group_search)&&(b.search_text=b.group?b.label:b.html,b.search_match=this.search_string_match(b.search_text,c),b.search_match&&!b.group&&(e+=1),b.search_match?(g.length&&(h=b.search_text.search(j),i=b.search_text.substr(0,h+g.length)+"</em>"+b.search_text.substr(h+g.length),b.search_text=i.substr(0,h)+"<em>"+i.substr(h)),null!=f&&(f.group_match=!0)):null!=b.group_array_index&&this.results_data[b.group_array_index].search_match&&(b.search_match=!0)));return this.result_clear_highlight(),1>e&&g.length?(this.update_results_content(""),this.no_results(g)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},a.prototype.search_string_match=function(a,b){var c,d,e,f;if(b.test(a))return!0;if(this.enable_split_word_search&&(a.indexOf(" ")>=0||0===a.indexOf("["))&&(d=a.replace(/\[|\]/g,"").split(" "),d.length))for(e=0,f=d.length;f>e;e++)if(c=d[e],b.test(c))return!0},a.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},a.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},a.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},a.prototype.include_option_in_results=function(a){return this.is_multiple&&!this.display_selected_options&&a.selected?!1:!this.display_disabled_options&&a.disabled?!1:a.empty?!1:!0},a.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},a.default_multiple_text="Select Some Options",a.default_single_text="Select an Option",a.default_no_result_text="No results match",a}(),a=jQuery,a.fn.extend({chosen:function(d){return b.browser_is_supported()?this.each(function(){var b,e;b=a(this),e=b.data("chosen"),"destroy"===d&&e?e.destroy():e||b.data("chosen",new c(this,d))}):this}}),c=function(b){function c(){return e=c.__super__.constructor.apply(this,arguments)}return g(c,b),c.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},c.prototype.set_up_html=function(){var b,c;return b=["chosen-container"],b.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chosen-rtl"),c={"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=a("<div />",c),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},c.prototype.register_observers=function(){var a=this;return this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.is_multiple?this.search_choices.bind("click.chosen",function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()})},c.prototype.destroy=function(){return a(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},c.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},c.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chosen-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},c.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},c.prototype.search_results_mousewheel=function(a){var b,c,d;return b=-(null!=(c=a.originalEvent)?c.wheelDelta:void 0)||(null!=(d=a.originialEvent)?d.detail:void 0),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},c.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},c.prototype.close_field=function(){return a(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},c.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},c.prototype.test_active_click=function(b){return this.container.is(a(b.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},c.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=d.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},c.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},c.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},c.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},c.prototype.update_results_content=function(a){return this.search_results.html(a)},c.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},c.prototype.set_tab_index=function(){var a;return this.form_field.tabIndex?(a=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=a):void 0},c.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()}):void 0},c.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},c.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0},c.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},c.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},c.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span>"+b.html+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{"class":"search-choice-close","data-option-array-index":b.array_index}),d.bind("click.chosen",function(a){return e.choice_destroy_link_click(a)}),c.append(d)),this.search_container.before(c)},c.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},c.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},c.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},c.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},c.prototype.result_select=function(a){var b,c,d;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),d=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[d].selected=!1),this.result_single_selected=b),b.addClass("result-selected"),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):this.single_set_selected_text(c.text),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},c.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(a)},c.prototype.result_deselect=function(a){var b;return b=this.results_data[a],this.form_field.options[b.options_index].disabled?!1:(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)},c.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},c.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html()},c.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null!=a?this.result_do_highlight(a):void 0},c.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c)},c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},c.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()},c.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},c.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},c.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},c.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},c.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return b=a("<div />",{style:f}),b.text(this.search_field.val()),a("body").append(b),h=b.width()+25,b.remove(),c=this.container.outerWidth(),h>c-10&&(h=c-10),this.search_field.css({width:h+"px"})}},c}(b)}.call(this),function(a){null==a.isNumeric&&(a.isNumeric=function(a){return null!=a&&a.constructor===Number}),null==a.isFunction&&(a.isFunction=function(a){return null!=a&&a instanceof Function});var b=a(window),c=a(document),d={defaultConfig:{animate:!1,cellW:100,cellH:100,delay:0,engine:"giot",fixSize:null,gutterX:15,gutterY:15,selector:":only-child",draggable:!1,rightToLeft:!1,bottomToTop:!1,onStartSet:function(){},onGapFound:function(){},onComplete:function(){},onResize:function(){},onSetBlock:function(){}},plugin:{},totalGrid:1,transition:!1,loadBlock:function(b,c){var d=c.runtime,e=a(b),f=null,g=d.gutterX,h=d.gutterY,i=e.data("fixSize"),j=d.lastId++ +"-"+this.totalGrid;if(!e.hasClass("fw-float")){e.attr({id:j,"data-delay":b.index}),c.animate&&this.transition&&this.setTransition(b,""),null==e.attr("data-height")&&e.attr("data-height",e.height()),null==e.attr("data-width")&&e.attr("data-width",e.width());var k=1*e.attr("data-height"),l=1*e.attr("data-width"),m=e.attr("data-fixPos"),n=d.cellH,o=d.cellW,p=l?Math.round((l+g)/o):0,q=k?Math.round((k+h)/n):0;return i||"auto"!=c.cellH||(e.width(o*p-g),b.style.height="",k=e.height(),q=k?Math.round((k+h)/n):0),i||"auto"!=c.cellW||(e.height(n*q-h),b.style.width="",l=e.width(),p=l?Math.round((l+g)/o):0),null!=i&&(p>d.limitCol||q>d.limitRow)?f=null:(q&&q<d.minHoB&&(d.minHoB=q),p&&p<d.minWoB&&(d.minWoB=p),q>d.maxHoB&&(d.maxHoB=q),p>d.maxWoB&&(d.maxWoB=p),0==l&&(p=0),0==k&&(q=0),f={id:j,width:p,height:q,fixSize:i},m&&(m=m.split("-"),f.y=1*m[0],f.x=1*m[1],f.width=null!=i?p:Math.min(p,d.limitCol-f.x),f.height=null!=i?q:Math.min(q,d.limitRow-f.y),d.holes.push({top:f.y,left:f.x,width:f.width,height:f.height}),this.setBlock(f,c))),null==e.attr("data-state")?e.attr("data-state","init"):e.attr("data-state","move"),m?null:f}},setBlock:function(a,b){var c=b.runtime,d=c.gutterX,e=c.gutterY,f=a.height,g=a.width,h=c.cellH,i=c.cellW,j=a.x,k=a.y;b.rightToLeft&&(j=c.limitCol-j-g),b.bottomToTop&&(k=c.limitRow-k-f);var l={fixSize:a.fixSize,top:k*h,left:j*i,width:i*g-d,height:h*f-e};return l.top=1*l.top.toFixed(2),l.left=1*l.left.toFixed(2),l.width=1*l.width.toFixed(2),l.height=1*l.height.toFixed(2),a.id&&++c.length&&(c.blocks[a.id]=l),l},showBlock:function(b,c){function d(){if(j&&h.attr("data-state","start"),c.animate&&i.transition&&i.setTransition(b,k),g)g.fixSize&&(g.height=1*h.attr("data-height"),g.width=1*h.attr("data-width")),h.css({opacity:1,width:g.width,height:g.height}),h[f]({top:g.top,left:g.left}),e.length-=1;else{var a=h.position();h[f]({left:a.left+h.width()/2,top:a.top+h.height()/2,width:0,height:0,opacity:0})}null!=h.attr("data-nested")&&i.nestedGrid(b,c),c.onSetBlock.call(b,g,c),0==e.length&&c.onComplete.call(b,g,c)}var e=c.runtime,f=c.animate&&!this.transition?"animate":"css",g=e.blocks[b.id],h=a(b),i=this,j="move"!=h.attr("data-state"),k=j?"width 0.5s, height 0.5s":"top 0.5s, left 0.5s, width 0.5s, height 0.5s, opacity 0.5s";b.delay&&clearTimeout(b.delay),h.hasClass("fw-float")||(i.setTransition(b,""),b.style.position="absolute",c.onStartSet.call(b,g,c),c.delay>0?b.delay=setTimeout(d,c.delay*h.attr("data-delay")):d())},nestedGrid:function(b,c){var d,e=a(b),f=c.runtime,g=e.attr("data-gutterX")||c.gutterX,h=e.attr("data-gutterY")||c.gutterY,i=e.attr("data-method")||"fitZone",j=e.attr("data-nested")||":only-child",k=e.attr("data-cellH")||c.cellH,l=e.attr("data-cellW")||c.cellW,m=f.blocks[b.id];if(m)switch(d=new freewall(e),d.reset({cellH:k,cellW:l,gutterX:1*g,gutterY:1*h,selector:j}),i){case"fitHeight":d[i](m.height);break;case"fitWidth":d[i](m.width);break;case"fitZone":d[i](m.width,m.height)}},adjustBlock:function(b,c){var d=c.runtime,e=d.gutterX,f=d.gutterY,g=a("#"+b.id),h=d.cellH,i=d.cellW;(c.cellH="auto")&&(g.width(b.width*i-e),g.get(0).style="",b.height=Math.round((g.height()+f)/h))},adjustUnit:function(b,c,d){var e=d.gutterX,f=d.gutterY,g=d.runtime,h=d.cellW,i=d.cellH;if(a.isFunction(h)&&(h=h(b)),h=1*h,!a.isNumeric(h)&&(h=1),a.isFunction(i)&&(i=i(c)),i=1*i,!a.isNumeric(i)&&(i=1),a.isNumeric(b)){1>h&&(h*=b);var j=Math.max(1,Math.floor(b/h));a.isNumeric(e)||(e=(b-j*h)/Math.max(1,j-1),e=Math.max(0,e)),j=Math.floor((b+e)/h),g.cellW=(b+e)/j,g.cellS=g.cellW/h,g.gutterX=e,g.limitCol=j}if(a.isNumeric(c)){1>i&&(i*=c);var k=Math.max(1,Math.floor(c/i));a.isNumeric(f)||(f=(c-k*i)/Math.max(1,k-1),f=Math.max(0,f)),k=Math.floor((c+f)/i),g.cellH=(c+f)/k,g.cellS=g.cellH/i,g.gutterY=f,g.limitRow=k}a.isNumeric(b)||(1>h&&(h=g.cellH),g.cellW=1!=h?h*g.cellS:1,g.gutterX=e,g.limitCol=666666),a.isNumeric(c)||(1>i&&(i=g.cellW),g.cellH=1!=i?i*g.cellS:1,g.gutterY=f,g.limitRow=666666)},resetGrid:function(a){a.blocks={},a.length=0,a.cellH=0,a.cellW=0,a.lastId=1,a.matrix={},a.totalCol=0,a.totalRow=0},setDragable:function(b,d){var e=!1,f={sX:0,sY:0,top:0,left:0,proxy:null,end:function(){},move:function(){},start:function(){}};a(b).each(function(){function b(a){return a.stopPropagation(),a=a.originalEvent,a.touches&&(e=!0,a=a.changedTouches[0]),2!=a.button&&3!=a.which&&(i.start.call(j,a),i.sX=a.clientX,i.sY=a.clientY,i.top=parseInt(k.css("top"))||0,i.left=parseInt(k.css("left"))||0,c.bind("mouseup touchend",h),c.bind("mousemove touchmove",g)),!1}function g(a){a=a.originalEvent,e&&(a=a.changedTouches[0]),k.css({top:i.top-(i.sY-a.clientY),left:i.left-(i.sX-a.clientX)}),i.move.call(j,a)}function h(a){a=a.originalEvent,e&&(a=a.changedTouches[0]),i.end.call(j,a),c.unbind("mouseup touchend",h),c.unbind("mousemove touchmove",g)}var i=a.extend({},f,d),j=i.proxy||this,k=a(j),l=k.css("position");"absolute"!=l&&k.css("position","relative"),a(this).find("iframe, form, input, textarea, .ignore-drag").each(function(){a(this).on("touchstart mousedown",function(a){a.stopPropagation()})}),c.unbind("mouseup touchend",h),c.unbind("mousemove touchmove",g),k.unbind("mousedown touchstart").bind("mousedown touchstart",b)})
},setTransition:function(b,c){var d=b.style,e=a(b);!this.transition&&e.stop?e.stop():null!=d.webkitTransition?d.webkitTransition=c:null!=d.MozTransition?d.MozTransition=c:null!=d.msTransition?d.msTransition=c:null!=d.OTransition?d.OTransition=c:d.transition=c},getFreeArea:function(a,b,c){for(var d=Math.min(a+c.maxHoB,c.limitRow),e=Math.min(b+c.maxWoB,c.limitCol),f=e,g=d,h=c.matrix,i=a;g>i;++i)for(var j=b;e>j;++j)1==h[i+"-"+j]&&j>b&&f>j&&(f=j);for(var i=a;d>i;++i)for(var j=b;f>j;++j)1==h[i+"-"+j]&&i>a&&g>i&&(g=i);return{top:a,left:b,width:f-b,height:g-a}},setWallSize:function(a,b){var c=Math.max(1,a.totalRow),d=Math.max(1,a.totalCol),e=a.gutterY,f=a.gutterX,g=a.cellH,h=a.cellW,i=h*d-f,j=g*c-e;b.attr({"data-total-col":d,"data-total-row":c,"data-wall-width":Math.ceil(i),"data-wall-height":Math.ceil(j)}),a.limitCol<a.limitRow&&!b.attr("data-height")&&b.height(Math.ceil(j))}},e={giot:function(a,b){function c(a,b,c,d){for(var e=a;a+d>e;){for(var f=b;b+c>f;)o[e+"-"+f]=!0,++f>j&&(j=f);++e>k&&(k=e)}}var e=b.runtime,f=e.limitRow,g=e.limitCol,h=0,i=0,j=e.totalCol,k=e.totalRow,l={},m=e.holes,n=null,o=e.matrix,p=Math.max(g,f),q=null,r=null,s=f>g?1:0,t=null,u=Math.min(g,f);if(m.length)for(var v=0;v<m.length;++v)c(m[v].top,m[v].left,m[v].width,m[v].height);for(var w=0;p>w&&a.length;++w){s?i=w:h=w,t=null;for(var x=0;u>x&&a.length;++x)if(s?h=x:i=x,!e.matrix[i+"-"+h]){q=d.getFreeArea(i,h,e),n=null;for(var v=0;v<a.length;++v)if(!(a[v].height>q.height||a[v].width>q.width)){n=a.splice(v,1)[0];break}if(null==n&&null==b.fixSize){if(t&&!s&&e.minHoB>q.height){t.height+=q.height,c(t.y,t.x,t.width,t.height),d.setBlock(t,b);continue}if(t&&s&&e.minWoB>q.width){t.width+=q.width,c(t.y,t.x,t.width,t.height),d.setBlock(t,b);continue}for(var v=0;v<a.length;++v)if(null==a[v].fixSize){n=a.splice(v,1)[0],s?(n.width=q.width,"auto"==b.cellH&&d.adjustBlock(n,b),n.height=Math.min(n.height,q.height)):(n.height=q.height,n.width=Math.min(n.width,q.width));break}}if(null!=n)l[n.id]={id:n.id,x:h,y:i,width:n.width,height:n.height,fixSize:n.fixSize},t=l[n.id],c(t.y,t.x,t.width,t.height),d.setBlock(t,b);else{var r={x:h,y:i,fixSize:0};if(s){r.width=q.width,r.height=0;for(var y=h-1,z=i;o[z+"-"+y];)o[z+"-"+h]=!0,r.height+=1,z+=1}else{r.height=q.height,r.width=0;for(var z=i-1,y=h;o[z+"-"+y];)o[i+"-"+y]=!0,r.width+=1,y+=1}b.onGapFound(d.setBlock(r,b),b)}}}e.matrix=o,e.totalRow=k,e.totalCol=j}};window.freewall=function(c){function f(b){var c=(k.gutterX,k.gutterY,k.cellH),e=k.cellW;d.setDragable(b,{start:function(){j.animate&&d.transition&&d.setTransition(this,""),a(this).css("z-index",9999).addClass("fw-float")},move:function(){var b=a(this).position(),d=Math.round(b.top/c),f=Math.round(b.left/e),g=Math.round(a(this).width()/e),h=Math.round(a(this).height()/c);d=Math.min(Math.max(0,d),k.limitRow-h),f=Math.min(Math.max(0,f),k.limitCol-g),i.setHoles([{top:d,left:f,width:g,height:h}]),i.refresh()},end:function(){var b=a(this).position(),d=Math.round(b.top/c),f=Math.round(b.left/e),g=Math.round(a(this).width()/e),h=Math.round(a(this).height()/c);d=Math.min(Math.max(0,d),k.limitRow-h),f=Math.min(Math.max(0,f),k.limitCol-g),a(this).css({zIndex:"auto",top:d*c,left:f*e}).removeClass("fw-float"),i.fillHoles()}})}var g=a(c);"static"==g.css("position")&&g.css("position","relative");var h=Number.MAX_VALUE,i=this;d.totalGrid+=1;var j=a.extend({},d.defaultConfig),k={blocks:{},events:{},matrix:{},holes:[],cellW:0,cellH:0,cellS:1,filter:"",lastId:0,length:0,maxWoB:0,maxHoB:0,minWoB:h,minHoB:h,running:0,gutterX:15,gutterY:15,totalCol:0,totalRow:0,limitCol:666666,limitRow:666666,currentMethod:null,currentArguments:[]};j.runtime=k;var l=document.body.style;d.transition||(null!=l.webkitTransition||null!=l.MozTransition||null!=l.msTransition||null!=l.OTransition||null!=l.transition)&&(d.transition=!0),a.extend(i,{addCustomEvent:function(a,b){var c=k.events;return a=a.toLowerCase(),!c[a]&&(c[a]=[]),b.eid=c[a].length,c[a].push(b),this},appendBlock:function(b){var c=a(b).appendTo(g),h=null,l=[];c.each(function(a,b){b.index=++a,(h=d.loadBlock(b,j))&&(l.push(h),i.fireEvent("onBlockLoad",b,j))}),e[j.engine](l,j),d.setWallSize(k,g),c.each(function(a,b){j.draggable&&f(b),d.showBlock(b,j),i.fireEvent("onBlockShow",b,j)})},container:g,fillHoles:function(){return k.holes=[],this},filter:function(a){return k.filter=a,this.refresh(),this},fireEvent:function(a,b,c){var d=k.events;if(a=a.toLowerCase(),d[a]&&d[a].length)for(var e=0;e<d[a].length;++e)d[a][e].call(b,c);return this},fitHeight:function(a){var c,h=g.find(j.selector).removeAttr("id"),l=null,m=[];a=a?a:g.height()||b.height(),k.currentMethod=arguments.callee,k.currentArguments=arguments,d.resetGrid(k),d.adjustUnit("auto",a,j),c=k.filter?h.filter(k.filter).addClass("fw-filter"):h.removeClass("fw-filter"),i.fireEvent("onGridReady",g,j),c.each(function(a,b){b.index=++a,(l=d.loadBlock(b,j))&&(m.push(l),i.fireEvent("onBlockLoad",b,j))}),i.fireEvent("onGridLoad",g,j),e[j.engine](m,j),d.setWallSize(k,g),i.fireEvent("onGridArrange",g,j),h.each(function(a,b){j.draggable&&f(b),d.showBlock(b,j),i.fireEvent("onBlockShow",b,j)}),i.fireEvent("onGridShow",g,j)},fitWidth:function(a){var c,h=g.find(j.selector).removeAttr("id"),l=null,m=[];a=a?a:g.width()||b.width(),k.currentMethod=arguments.callee,k.currentArguments=arguments,d.resetGrid(k),d.adjustUnit(a,"auto",j),c=k.filter?h.filter(k.filter).addClass("fw-filter"):h.removeClass("fw-filter"),i.fireEvent("onGridReady",g,j),c.each(function(a,b){b.index=++a,(l=d.loadBlock(b,j))&&(m.push(l),i.fireEvent("onBlockLoad",b,j))}),i.fireEvent("onGridLoad",g,j),e[j.engine](m,j),d.setWallSize(k,g),i.fireEvent("onGridArrange",g,j),h.each(function(a,b){j.draggable&&f(b),d.showBlock(b,j),i.fireEvent("onBlockShow",b,j)}),i.fireEvent("onGridShow",g,j)},fitZone:function(a,c){var h,l=g.find(j.selector).removeAttr("id"),m=null,n=[];c=c?c:g.height()||b.height(),a=a?a:g.width()||b.width(),k.currentMethod=arguments.callee,k.currentArguments=arguments,d.resetGrid(k),d.adjustUnit(a,c,j),h=k.filter?l.filter(k.filter).addClass("fw-filter"):l.removeClass("fw-filter"),i.fireEvent("onGridReady",g,j),h.each(function(a,b){b.index=++a,(m=d.loadBlock(b,j))&&(n.push(m),i.fireEvent("onBlockLoad",b,j))}),i.fireEvent("onGridLoad",g,j),e[j.engine](n,j),d.setWallSize(k,g),i.fireEvent("onGridArrange",g,j),l.each(function(a,b){j.draggable&&f(b),d.showBlock(b,j),i.fireEvent("onBlockShow",b,j)}),i.fireEvent("onGridShow",g,j)},fixPos:function(b){return a(b.block).attr({"data-fixPos":b.top+"-"+b.left}),this},fixSize:function(b){return null!=b.width&&a(b.block).attr({"data-width":b.width}),null!=b.height&&a(b.block).attr({"data-height":b.height}),this},prepend:function(a){return g.prepend(a),this.refresh(),this},refresh:function(){var a=arguments.length?arguments:k.currentArguments;return null==k.currentMethod&&(k.currentMethod=this.fitWidth),k.currentMethod.apply(this,Array.prototype.slice.call(a,0)),this},reset:function(b){return a.extend(j,b),this},setHoles:function(a){return k.holes=a,this},unFilter:function(){return delete k.filter,this.refresh(),this}}),g.attr("data-min-width",80*Math.floor(b.width()/80));for(var m in d.plugin)d.plugin.hasOwnProperty(m)&&d.plugin[m].call(i,j,g);b.resize(function(){k.running||(k.running=1,setTimeout(function(){k.running=0,j.onResize.call(i,g)},122),g.attr("data-min-width",80*Math.floor(b.width()/80)))})},freewall.createPlugin=function(b){return a.extend(d.plugin,b),{addConfig:function(b){a.extend(d.defaultConfig,b)}}},freewall.createEngine=function(b){a.extend(e,b)},freewall.getMethod=function(a){return d[a]}}(window.Zepto||window.jQuery),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,this.each(h?function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}:function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&n>h(c+d)&&(i.horizontal="center"),m>p&&p>h(e+f)&&(i.vertical="middle"),i.important=g(h(c),h(d))>g(h(e),h(f))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||h(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>h(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||h(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||l>h(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}
},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;return e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=b.pageX,j=b.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,h-p>r||q>i+p||j-p>t||s>k+p||!a.contains(n.snapElements[l].item.ownerDocument,n.snapElements[l].item)?(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1):("inner"!==o.snapMode&&(d=p>=Math.abs(j-t),e=p>=Math.abs(k-s),f=p>=Math.abs(h-r),g=p>=Math.abs(i-q),d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=p>=Math.abs(j-s),e=p>=Math.abs(k-t),f=p>=Math.abs(h-q),g=p>=Math.abs(i-r),d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=this.data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(c){a(this).css("zIndex",b+c)}),this.css("zIndex",b+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}a.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b=this.options,c=b.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,c=a.ui.ddmanager.droppables[this.options.scope];c.length>b;b++)c[b]===this&&c.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"===b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"ui-droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope===d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(a,c,d){if(!c.offset)return!1;var e,f,g=(a.positionAbs||a.position.absolute).left,h=g+a.helperProportions.width,i=(a.positionAbs||a.position.absolute).top,j=i+a.helperProportions.height,k=c.offset.left,l=k+c.proportions.width,m=c.offset.top,n=m+c.proportions.height;switch(d){case"fit":return g>=k&&l>=h&&i>=m&&n>=j;case"intersect":return g+a.helperProportions.width/2>k&&l>h-a.helperProportions.width/2&&i+a.helperProportions.height/2>m&&n>j-a.helperProportions.height/2;case"pointer":return e=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,f=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,b(f,m,c.proportions.height)&&b(e,k,c.proportions.width);case"touch":return(i>=m&&n>=i||j>=m&&n>=j||m>i&&j>n)&&(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions.height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions={width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===e}),f.length&&(d=a.data(f[0],"ui-droppable"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){function b(a){return parseInt(a,10)||0}function c(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;b.length>c;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(c){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=b(this.helper.css("left")),e=b(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),g.maxWidth>d&&(g.maxWidth=d),g.maxHeight>f&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,d=this.axis,e=c(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=c(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=c(a.width)&&b.minWidth&&b.minWidth>a.width,h=c(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(d),l=/nw|ne|n/.test(d);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;this._proportionallyResizeElements.length>a;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;c.length>b;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(c=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=b(c.css("padding"+e))}),j.containerOffset=c.offset(),j.containerPosition=c.position(),j.containerSize={height:c.innerHeight()-d[3],width:c.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=g.parentData.left),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))
},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&m>c.maxWidth,p=c.maxHeight&&n>c.maxHeight,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(b.size.width=m,b.size.height=n,b.position.top=f.top-l,b.position.left=f.left-k)}})}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?j=!(c.left>h||f>c.right||c.top>i||g>c.bottom):"fit"===e.tolerance&&(j=c.left>f&&h>c.right&&c.top>g&&i>c.bottom),j?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}function c(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||c(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d?!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e)?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var c="x"===this.options.axis||b(this.positionAbs.top+this.offset.click.top,a.top,a.height),d="y"===this.options.axis||b(this.positionAbs.left+this.offset.click.left,a.left,a.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"===g||"down"===f?2:1:f&&("down"===f?2:1):!1},_intersectsWithSides:function(a){var c=b(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=b(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&d||"left"===f&&!d:e&&("down"===e&&c||"up"===e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c,d,e,f,g=[],h=[],i=this._connectWith();if(i&&b)for(c=i.length-1;c>=0;c--)for(e=a(i[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&h.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f]);for(h.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),c=h.length-1;c>=0;c--)h[c][0].each(function(){g.push(this)});return a(g)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(d){var e,f,g,h,i,j,k,l,m,n,o=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(o&&a.contains(this.containers[e].element[0],o.element[0]))continue;o=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",d,this._uiHash(this)),this.containers[e].containerCache.over=0);if(o)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(g=1e4,h=null,n=o.floating||c(this.currentItem),i=n?"left":"top",j=n?"width":"height",k=this.positionAbs[i]+this.offset.click[i],f=this.items.length-1;f>=0;f--)a.contains(this.containers[p].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!n||b(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(l=this.items[f].item.offset()[i],m=!1,Math.abs(l-k)>Math.abs(l+this.items[f][j]-k)&&(m=!0,l+=this.items[f][j]),g>Math.abs(l-k)&&(g=Math.abs(l-k),h=this.items[f],this.direction=m?"up":"down"));if(!h&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;h?this._rearrange(d,h,null,!0):this._rearrange(d,null,this.containers[p].element,!0),this._trigger("change",d,this._uiHash()),this.containers[p]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){this.reverting=!1;var c,d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(c in this._storedCSS)("auto"===this._storedCSS[c]||"static"===this._storedCSS[c])&&(this._storedCSS[c]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||d.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),c=this.containers.length-1;c>=0;c--)b||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),c=0;d.length>c;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(c=0;d.length>c;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}(jQuery),function(a){var b,c,d,e,f="ui-button ui-widget ui-state-default ui-corner-all",g="ui-state-hover ui-state-active ",h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",i=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},j=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,i),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");
var g=this,h=this.options,k="checkbox"===this.type||"radio"===this.type,l=k?"":"ui-state-active",m="ui-state-focus";null===h.label&&(h.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){h.disabled||this===b&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){h.disabled||a(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){g.buttonElement.addClass(m)}).bind("blur"+this.eventNamespace,function(){g.buttonElement.removeClass(m)}),k&&(this.element.bind("change"+this.eventNamespace,function(){e||g.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){h.disabled||(e=!1,c=a.pageX,d=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){h.disabled||(c!==a.pageX||d!==a.pageY)&&(e=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return h.disabled||e?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(h.disabled||e)return!1;a(this).addClass("ui-state-active"),g.buttonElement.attr("aria-pressed","true");var b=g.element[0];j(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),b=this,void g.document.one("mouseup",function(){b=null}))}).bind("mouseup"+this.eventNamespace,function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){return h.disabled?!1:void((b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" "+g+" "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?void(b?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?j(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(h),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(a){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},c={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c=this;this._isOpen&&this._trigger("beforeClose",b)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||a(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,b){var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return c&&!b&&this._trigger("focus",a),c},open:function(){var b=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var a=this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(e.focus(1),b.preventDefault()):(d.focus(1),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){d.position=[f.position.left-c.document.scrollLeft(),f.position.top-c.document.scrollTop()],a(this).removeClass("ui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){d.height=a(this).height(),d.width=a(this).width(),a(this).removeClass("ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(d){var e=this,f=!1,g={};a.each(d,function(a,d){e._setOption(a,d),a in b&&(f=!0),a in c&&(g[a]=d)}),f&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=this,c=this.widgetFullName;a.ui.dialog.overlayInstances||this._delay(function(){a.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(d){b._allowInteraction(d)||(d.preventDefault(),a(".ui-dialog:visible:last .ui-dialog-content").data(c)._focusTabbable())})}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),a.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(a.ui.dialog.overlayInstances--,a.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),a.ui.dialog.overlayInstances=0,a.uiBackCompat!==!1&&a.widget("ui.dialog",a.ui.dialog,{_position:function(){var b,c=this.options.position,d=[],e=[0,0];c?(("string"==typeof c||"object"==typeof c&&"0"in c)&&(d=c.split?c.split(" "):[c[0],c[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),c={my:d[0]+(0>e[0]?e[0]:"+"+e[0])+" "+d[1]+(0>e[1]?e[1]:"+"+e[1]),at:d.join(" ")}),c=a.extend({},a.ui.dialog.prototype.options.position,c)):c=a.ui.dialog.prototype.options.position,b=this.uiDialog.is(":visible"),b||this.uiDialog.show(),this.uiDialog.position(c),b||this.uiDialog.hide()}})}(jQuery),function(a,b){a.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(a){return a===b?this.options.value:(this.options.value=this._constrainedValue(a),this._refreshValue(),b)},_constrainedValue:function(a){return a===b&&(a=this.options.value),this.indeterminate=a===!1,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(b),this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b)),this._super(a,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(c.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}})}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):this.range=a([])},_setupEvents:function(){var a=this.handles.add(this.range).filter("a");this._off(a),this._on(a,this._handleEvents),this._hoverable(a),this._focusable(a)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;d.length>f;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;c.length>d;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(this._valueMin()>=a)return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(c){var d,e,f,g,h=a(c.target).data("ui-slider-handle-index");switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(c.target).addClass("ui-state-active"),d=this._start(c,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),c.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(c,h,f)},click:function(a){a.preventDefault()},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}(jQuery),function(a,b){function c(){return++e}function d(a){return a.hash.length>1&&decodeURIComponent(a.href.replace(f,""))===decodeURIComponent(location.href.replace(f,""))}var e=0,f=/#.*$/;a.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(c.active):a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var c=this.options.active,d=this.options.collapsible,e=location.hash.substring(1);return null===c&&(e&&this.tabs.each(function(d,f){return a(f).attr("aria-controls")===e?(c=d,!1):b}),null===c&&(c=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===c||-1===c)&&(c=this.tabs.length?0:!1)),c!==!1&&(c=this.tabs.index(this.tabs.eq(c)),-1===c&&(c=d?!1:0)),!d&&c===!1&&this.anchors.length&&(c=0),c},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(c){var d=a(this.document[0].activeElement).closest("li"),e=this.tabs.index(d),f=!0;if(!this._handlePageNav(c)){switch(c.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:e++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:f=!1,e--;break;case a.ui.keyCode.END:e=this.anchors.length-1;break;case a.ui.keyCode.HOME:e=0;break;case a.ui.keyCode.SPACE:return c.preventDefault(),clearTimeout(this.activating),this._activate(e),b;case a.ui.keyCode.ENTER:return c.preventDefault(),clearTimeout(this.activating),this._activate(e===this.options.active?!1:e),b;default:return}c.preventDefault(),clearTimeout(this.activating),e=this._focusNextTab(e,f),c.ctrlKey||(d.attr("aria-selected","false"),this.tabs.eq(e).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",e)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(c){return c.altKey&&c.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):c.altKey&&c.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):b
},_findNextTab:function(b,c){function d(){return b>e&&(b=0),0>b&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,c){return"active"===a?(this._activate(c),b):"disabled"===a?(this._setupDisabled(c),b):(this._super(a,c),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",c),c||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(c),"heightStyle"===a&&this._setupHeightStyle(c),b)},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+c()},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,e){var f,g,h,i=a(e).uniqueId().attr("id"),j=a(e).closest("li"),k=j.attr("aria-controls");d(e)?(f=e.hash,g=b.element.find(b._sanitizeSelector(f))):(h=b._tabId(j),f="#"+h,g=b.element.find(f),g.length||(g=b._createPanel(h),g.insertAfter(b.panels[c-1]||b.tablist)),g.attr("aria-live","polite")),g.length&&(b.panels=b.panels.add(g)),k&&j.data("ui-tabs-aria-controls",k),j.attr({"aria-controls":f.substring(1),"aria-labelledby":i}),g.attr("aria-labelledby",i)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),e()),h.attr({"aria-expanded":"false","aria-hidden":"true"}),c.oldTab.attr("aria-selected","false"),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr({"aria-expanded":"true","aria-hidden":"false"}),c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var d=this.options.disabled;d!==!1&&(c===b?d=!1:(c=this._getIndex(c),d=a.isArray(d)?a.map(d,function(a){return a!==c?a:null}):a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(d!==!0){if(c===b)d=!0;else{if(c=this._getIndex(c),-1!==a.inArray(c,d))return;d=a.isArray(d)?a.merge([c],d).sort():[c]}this._setupDisabled(d)}},load:function(b,c){b=this._getIndex(b);var e=this,f=this.tabs.eq(b),g=f.find(".ui-tabs-anchor"),h=this._getPanelForTab(f),i={tab:f,panel:h};d(g[0])||(this.xhr=a.ajax(this._ajaxSettings(g,c,i)),this.xhr&&"canceled"!==this.xhr.statusText&&(f.addClass("ui-tabs-loading"),h.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){h.html(a),e._trigger("load",c,i)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&e.panels.stop(!1,!0),f.removeClass("ui-tabs-loading"),h.removeAttr("aria-busy"),a===e.xhr&&delete e.xhr},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}})}(jQuery),function(a,b,c){"use strict";a.fn.backstretch=function(d,f){return(d===c||0===d.length)&&a.error("No images were supplied for Backstretch"),0===a(b).scrollTop()&&b.scrollTo(0,0),this.each(function(){var b=a(this),c=b.data("backstretch");if(c){if("string"==typeof d&&"function"==typeof c[d])return void c[d](f);f=a.extend(c.options,f),c.destroy(!0)}c=new e(this,d,f),b.data("backstretch",c)})},a.backstretch=function(b,c){return a("body").backstretch(b,c).data("backstretch")},a.expr[":"].backstretch=function(b){return a(b).data("backstretch")!==c},a.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var d={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999}},e=function(c,e,g){this.options=a.extend({},a.fn.backstretch.defaults,g||{}),this.images=a.isArray(e)?e:[e],a.each(this.images,function(){a("<img />")[0].src=this}),this.isBody=c===document.body,this.$container=a(c),this.$root=this.isBody?a(f?b:document):this.$container;var h=this.$container.children(".backstretch").first();if(this.$wrap=h.length?h:a('<div class="backstretch"></div>').css(d.wrap).appendTo(this.$container),!this.isBody){var i=this.$container.css("position"),j=this.$container.css("zIndex");this.$container.css({position:"static"===i?"relative":i,zIndex:"auto"===j?0:j,background:"none"}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&f?"fixed":"absolute"}),this.index=0,this.show(this.index),a(b).on("resize.backstretch",a.proxy(this.resize,this)).on("orientationchange.backstretch",a.proxy(function(){this.isBody&&0===b.pageYOffset&&(b.scrollTo(0,1),this.resize())},this))};e.prototype={resize:function(){try{var a,c={left:0,top:0},d=this.isBody?this.$root.width():this.$root.innerWidth(),e=d,f=this.isBody?b.innerHeight?b.innerHeight:this.$root.height():this.$root.innerHeight(),g=e/this.$img.data("ratio");g>=f?(a=(g-f)/2,this.options.centeredY&&(c.top="-"+a+"px")):(g=f,e=g*this.$img.data("ratio"),a=(e-d)/2,this.options.centeredX&&(c.left="-"+a+"px")),this.$wrap.css({width:d,height:f}).find("img:not(.deleteable)").css({width:e,height:g}).css(c)}catch(h){}return this},show:function(b){if(!(Math.abs(b)>this.images.length-1)){var c=this,e=c.$wrap.find("img").addClass("deleteable"),f={relatedTarget:c.$container[0]};return c.$container.trigger(a.Event("backstretch.before",f),[c,b]),this.index=b,clearInterval(c.interval),c.$img=a("<img />").css(d.img).bind("load",function(d){var g=this.width||a(d.target).width(),h=this.height||a(d.target).height();a(this).data("ratio",g/h),a(this).fadeIn(c.options.speed||c.options.fade,function(){e.remove(),c.paused||c.cycle(),a(["after","show"]).each(function(){c.$container.trigger(a.Event("backstretch."+this,f),[c,b])})}),c.resize()}).appendTo(c.$wrap),c.$img.attr("src",c.images[b]),c}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return this.images.length>1&&(clearInterval(this.interval),this.interval=setInterval(a.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(c){a(b).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),c||this.$wrap.remove(),this.$container.removeData("backstretch")}};var f=function(){var a=navigator.userAgent,c=navigator.platform,d=a.match(/AppleWebKit\/([0-9]+)/),e=!!d&&d[1],f=a.match(/Fennec\/([0-9]+)/),g=!!f&&f[1],h=a.match(/Opera Mobi\/([0-9]+)/),i=!!h&&h[1],j=a.match(/MSIE ([0-9]+)/),k=!!j&&j[1];return!((c.indexOf("iPhone")>-1||c.indexOf("iPad")>-1||c.indexOf("iPod")>-1)&&e&&534>e||b.operamini&&"[object OperaMini]"==={}.toString.call(b.operamini)||h&&7458>i||a.indexOf("Android")>-1&&e&&533>e||g&&6>g||"palmGetResource"in b&&e&&534>e||a.indexOf("MeeGo")>-1&&a.indexOf("NokiaBrowser/8.5.0")>-1||k&&6>=k)}()}(jQuery,window),!function(a){"use strict";a.fn.smack=function(b){b=a.extend({},{edge:"bottom"},b),b=a.extend({},{threshold:"top"===b.edge?0:1,deferred:new a.Deferred},b);var c=a(this),d=c.data("bum-smack")||{};return d[b.edge]=b,d.scrollTop=c.scrollTop(),c.data("bum-smack",d),c.off("scroll.smack").on("scroll.smack",function(){var b,e,f,g,h=c.scrollTop(),i=c[0]===window?c.height():c.innerHeight(),j=c[0]===window?a(document).height():c[0].scrollHeight,k=h>d.scrollTop?"down":h<d.scrollTop?"up":!1,l=h+i;d.scrollTop=h,"down"===k&&d.bottom&&(b=-1!==d.bottom.threshold.toString().toLowerCase().indexOf("px"),g=b?j-parseInt(d.bottom.threshold,10):Math.floor(j*d.bottom.threshold),l>=g&&(d.bottom.deferred.resolve(),d.bottom=!1,c.data("bum-smack",d))),"up"===k&&d.top&&(e=-1!==d.top.threshold.toString().toLowerCase().indexOf("px"),f=e?parseInt(d.top.threshold,10):Math.floor(j*d.top.threshold),f>=h&&(d.top.deferred.resolve(),d.top=!1,c.data("bum-smack",d))),d.top||d.bottom||c.off("scroll.smack")}),b.deferred.promise()}}(window.jQuery),function($,undefined){$.extend({jsonRPC:{version:"2.0",endPoint:null,namespace:null,setup:function(a){return this._validateConfigParams(a),this.endPoint=a.endPoint,this.namespace=a.namespace,this.cache=a.cache!==undefined?cache:!0,this},withOptions:function(a,b){if(this._validateConfigParams(a),b===undefined)throw"No callback specified";origParams={endPoint:this.endPoint,namespace:this.namespace},this.setup(a),b.call(this),this.setup(origParams)},request:function(a,b){return b===undefined&&(b={id:1}),b.id===undefined&&(b.id=1),b.cache===undefined&&(b.cache=this.cache),this._validateRequestMethod(a),this._validateRequestParams(b.params),this._validateRequestCallbacks(b.success,b.error),this._doRequest(JSON.stringify(this._requestDataObj(a,b.params,b.id)),b),!0},batchRequest:function(a,b){if(b===undefined&&(b={}),!$.isArray(a)||0===a.length)throw"Invalid requests supplied for jsonRPC batchRequest. Must be an array object that contain at least a method attribute";var c=this;$.each(a,function(a,b){c._validateRequestMethod(b.method),c._validateRequestParams(b.params),b.id===undefined&&(b.id=a+1)}),this._validateRequestCallbacks(b.success,b.error);for(var d,e=[],f=0;f<a.length;f++)d=a[f],e.push(this._requestDataObj(d.method,d.params,d.id));this._doRequest(JSON.stringify(e),b)},_validateConfigParams:function(a){if(a===undefined)throw"No params specified";if(a.endPoint&&"string"!=typeof a.endPoint)throw"endPoint must be a string";if(a.namespace&&"string"!=typeof a.namespace)throw"namespace must be a string"},_validateRequestMethod:function(a){if("string"!=typeof a)throw"Invalid method supplied for jsonRPC request";return!0},_validateRequestParams:function(a){if(null!==a&&a!==undefined&&"object"!=typeof a&&!$.isArray(a))throw"Invalid params supplied for jsonRPC request. It must be empty, an object or an array.";return!0},_validateRequestCallbacks:function(a,b){if(a!==undefined&&"function"!=typeof a)throw"Invalid success callback supplied for jsonRPC request";if(b!==undefined&&"function"!=typeof b)throw"Invalid error callback supplied for jsonRPC request";return!0},_doRequest:function(a,b){var c=this;$.ajax({type:"POST",async:!1!==b.async,dataType:"json",contentType:"application/json",url:this._requestUrl(b.endPoint||b.url,b.cache),data:a,cache:b.cache,processData:!1,error:function(a){c._requestError.call(c,a,b.error)},success:function(a){c._requestSuccess.call(c,a,b.success,b.error)}})},_requestUrl:function(a,b){return a=a||this.endPoint,b||(a+=a.indexOf("?")<0?"?tm="+(new Date).getTime():"&tm="+(new Date).getTime()),a},_requestDataObj:function(a,b,c){var d={jsonrpc:this.version,method:this.namespace?this.namespace+"."+a:a,id:c};return b!==undefined&&(d.params=b),d},_requestError:function(json,error){if(error!==undefined&&"function"==typeof error)if("string"==typeof json.responseText)try{error(eval("("+json.responseText+")"))}catch(e){error(this._response())}else error(this._response())},_requestSuccess:function(a,b,c){var d=this._response(a);return d.error&&"function"==typeof c?void c(d):void("function"==typeof b&&b(d))},_response:function(json){if(json===undefined)return{error:"Internal server error",version:"2.0"};try{if("string"==typeof json&&(json=eval("("+json+")")),$.isArray(json)&&json.length>0&&"2.0"!==json[0].jsonrpc||!$.isArray(json)&&"2.0"!==json.jsonrpc)throw"Version error";return json}catch(e){return{error:"Internal server error: "+e,version:"2.0"}}}}})}(jQuery),function(a,b,c,d){var e=a(b);a.fn.lazyload=function(c){function f(){var b=0;h.each(function(){var c=a(this);if(!(i.skip_invisible&&!c.is(":visible")||a.abovethetop(this,i)||a.leftofbegin(this,i)))if(a.belowthefold(this,i)||a.rightoffold(this,i)){if(++b>i.failure_limit)return!1}else c.trigger("appear"),b=0})}var g,h=this,i={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return c&&(d!==c.failurelimit&&(c.failure_limit=c.failurelimit,delete c.failurelimit),d!==c.effectspeed&&(c.effect_speed=c.effectspeed,delete c.effectspeed),a.extend(i,c)),g=i.container===d||i.container===b?e:a(i.container),0===i.event.indexOf("scroll")&&g.bind(i.event,function(){return f()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,c.one("appear",function(){if(!this.loaded){if(i.appear){var d=h.length;i.appear.call(b,d,i)}a("<img />").bind("load",function(){c.hide().attr("src",c.data(i.data_attribute))[i.effect](i.effect_speed),b.loaded=!0;var d=a.grep(h,function(a){return!a.loaded});if(h=a(d),i.load){var e=h.length;i.load.call(b,e,i)}}).attr("src",c.data(i.data_attribute))}}),0!==i.event.indexOf("scroll")&&c.bind(i.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){f()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent.persisted&&h.each(function(){a(this).trigger("appear")})}),a(b).load(function(){f()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?e.height()+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var e,f=b||window.event,g=[].slice.call(arguments,1),h=0,i=0,j=0,k=0,l=0;return b=a.event.fix(f),b.type="mousewheel",f.wheelDelta&&(h=f.wheelDelta),f.detail&&(h=-1*f.detail),f.deltaY&&(j=-1*f.deltaY,h=j),f.deltaX&&(i=f.deltaX,h=-1*i),void 0!==f.wheelDeltaY&&(j=f.wheelDeltaY),void 0!==f.wheelDeltaX&&(i=-1*f.wheelDeltaX),k=Math.abs(h),(!c||c>k)&&(c=k),l=Math.max(Math.abs(j),Math.abs(i)),(!d||d>l)&&(d=l),e=h>0?"floor":"ceil",h=Math[e](h/c),i=Math[e](i/d),j=Math[e](j/d),g.unshift(b,h,i,j),(a.event.dispatch||a.event.handle).apply(this,g)}var c,d,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],f="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(a.event.fixHooks)for(var g=e.length;g;)a.event.fixHooks[e[--g]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=f.length;a;)this.addEventListener(f[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=f.length;a;)this.removeEventListener(f[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a){"use strict";"object"==typeof exports?a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";var b={},c=0;a.fn.once=function(d,e){"string"!=typeof d&&(d in b||(b[d]=++c),e||(e=d),d="jquery-once-"+b[d]);var f=d+"-processed",g=this.not("."+f).addClass(f);return a.isFunction(e)?g.each(e):g},a.fn.removeOnce=function(b,c){var d=b+"-processed",e=this.filter("."+d).removeClass(d);return a.isFunction(c)?e.each(c):e}}),function(a){function b(a){return"object"==typeof a?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1,limit:!0},c.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!=a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return/webkit/i.test(navigator.userAgent)||"BackCompat"==d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"==d&&(d=9e9),f=a.extend({},c.defaults,f),e=e||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this._scrollable().each(function(){function g(a){j.animate(l,e,f.easing,a&&function(){a.call(this,k,f)})}if(null!=d){var h,i=this,j=a(i),k=d,l={},m=j.is("html,body");switch(typeof k){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(k)){k=b(k);break}if(k=a(k,this),!k.length)return;case"object":(k.is||k.style)&&(h=(k=a(k)).offset())}a.each(f.axis.split(""),function(a,b){var d="x"==b?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=i[n],p=c.max(i,b);if(h)l[n]=h[e]+(m?0:o-j.offset()[e]),f.margin&&(l[n]-=parseInt(k.css("margin"+d))||0,l[n]-=parseInt(k.css("border"+d+"Width"))||0),l[n]+=f.offset[e]||0,f.over[e]&&(l[n]+=k["x"==b?"width":"height"]()*f.over[e]);else{var q=k[e];l[n]=q.slice&&"%"==q.slice(-1)?parseFloat(q)/100*p:q}f.limit&&/^\d+$/.test(l[n])&&(l[n]=l[n]<=0?0:Math.min(l[n],p)),!a&&f.queue&&(o!=l[n]&&g(f.onAfterFirst),delete l[n])}),g(f.onAfter)}}).end()},c.max=function(b,c){var d="x"==c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(jQuery),function(a,b){var c,d;if("localStorage"in window)try{d="undefined"==typeof window.localStorage?b:window.localStorage,c="undefined"==typeof d||"undefined"==typeof window.JSON?!1:!0}catch(e){c=!1}a.totalStorage=function(b,c){return a.totalStorage.impl.init(b,c)},a.totalStorage.setItem=function(b,c){return a.totalStorage.impl.setItem(b,c)},a.totalStorage.getItem=function(b){return a.totalStorage.impl.getItem(b)},a.totalStorage.getAll=function(){return a.totalStorage.impl.getAll()},a.totalStorage.deleteItem=function(b){return a.totalStorage.impl.deleteItem(b)},a.totalStorage.impl={init:function(a,b){return"undefined"!=typeof b?this.setItem(a,b):this.getItem(a)},setItem:function(b,e){if(!c)try{return a.cookie(b,e),e}catch(f){console.log("Local Storage not supported by this browser. Install the cookie plugin on your site to take advantage of the same functionality. You can get it at https://github.com/carhartl/jquery-cookie")}var g=JSON.stringify(e);return d.setItem(b,g),this.parseResult(g)},getItem:function(b){if(!c)try{return this.parseResult(a.cookie(b))}catch(e){return null}return b=d.getItem(b),this.parseResult(b)},deleteItem:function(b){if(!c)try{return a.cookie(b,null),!0}catch(e){return!1}return d.removeItem(b),!0},getAll:function(){var b=[];if(c)for(var e in d)e.length&&b.push({key:e,value:this.parseResult(d.getItem(e))});else try{var f=document.cookie.split(";");for(e=0;e<f.length;e++){var g=f[e].split("=")[0];b.push({key:g,value:this.parseResult(a.cookie(g))})}}catch(h){return null}return b},parseResult:function(a){var b;try{b=JSON.parse(a),"undefined"==typeof b&&(b=a),"true"==b&&(b=!0),"false"==b&&(b=!1),parseFloat(b)==b&&"object"!=typeof b&&(b=parseFloat(b))}catch(c){b=a}return b}}}(jQuery);var swfobject=function(){function a(){if(!E){if(G.ie&&G.win){var a=m("span");try{var b=x.getElementsByTagName("body")[0].appendChild(a);b.parentNode.removeChild(b)}catch(c){return}}E=!0,B&&(clearInterval(B),B=null);for(var d=z.length,e=0;d>e;e++)z[e]()}}function b(a){E?a():z[z.length]=a}function c(a){if(typeof w.addEventListener!=q)w.addEventListener("load",a,!1);else if(typeof x.addEventListener!=q)x.addEventListener("load",a,!1);else if(typeof w.attachEvent!=q)w.attachEvent("onload",a);else if("function"==typeof w.onload){var b=w.onload;w.onload=function(){b(),a()}}else w.onload=a}function d(){for(var a=A.length,b=0;a>b;b++){var c=A[b].id;if(G.pv[0]>0){var d=l(c);d&&(A[b].width=d.getAttribute("width")?d.getAttribute("width"):"0",A[b].height=d.getAttribute("height")?d.getAttribute("height"):"0",n(A[b].swfVersion)?(G.webkit&&G.webkit<312&&e(d),p(c,!0)):A[b].expressInstall&&!F&&n("6.0.65")&&(G.win||G.mac)?g(A[b]):h(d))}else p(c,!0)}}function e(a){var b=a.getElementsByTagName(r)[0];if(b){var c=m("embed"),d=b.attributes;if(d)for(var e=d.length,f=0;e>f;f++)"data"==d[f].nodeName.toLowerCase()?c.setAttribute("src",d[f].nodeValue):c.setAttribute(d[f].nodeName,d[f].nodeValue);var g=b.childNodes;if(g)for(var h=g.length,i=0;h>i;i++)1==g[i].nodeType&&"param"==g[i].nodeName.toLowerCase()&&c.setAttribute(g[i].getAttribute("name"),g[i].getAttribute("value"));a.parentNode.replaceChild(c,a)}}function f(a){G.ie&&G.win&&n("8.0.0")&&w.attachEvent("onunload",function(){var b=l(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=function(){});b.parentNode.removeChild(b)}})}function g(a){F=!0;var b=l(a.id);if(b){if(a.altContentId){var c=l(a.altContentId);c&&(C=c,D=a.altContentId)}else C=i(b);!/%$/.test(a.width)&&parseInt(a.width,10)<310&&(a.width="310"),!/%$/.test(a.height)&&parseInt(a.height,10)<137&&(a.height="137"),x.title=x.title.slice(0,47)+" - Flash Player Installation";var d=G.ie&&G.win?"ActiveX":"PlugIn",e=x.title,f="MMredirectURL="+w.location+"&MMplayerType="+d+"&MMdoctitle="+e,g=a.id;if(G.ie&&G.win&&4!=b.readyState){var h=m("div");g+="SWFObjectNew",h.setAttribute("id",g),b.parentNode.insertBefore(h,b),b.style.display="none",w.attachEvent("onload",function(){b.parentNode.removeChild(b)})}j({data:a.expressInstall,id:v,width:a.width,height:a.height},{flashvars:f},g)}}function h(a){if(G.ie&&G.win&&4!=a.readyState){var b=m("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(i(a),b),a.style.display="none",w.attachEvent("onload",function(){a.parentNode.removeChild(a)})}else a.parentNode.replaceChild(i(a),a)}function i(a){var b=m("div");if(G.win&&G.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(r)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"param"==d[f].nodeName.toLowerCase()||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function j(a,b,c){var d,e=l(c);if(typeof a.id==q&&(a.id=c),G.ie&&G.win){var g="";for(var h in a)a[h]!=Object.prototype[h]&&("data"==h?b.movie=a[h]:"styleclass"==h.toLowerCase()?g+=' class="'+a[h]+'"':"classid"!=h&&(g+=" "+h+'="'+a[h]+'"'));var i="";for(var j in b)b[j]!=Object.prototype[j]&&(i+='<param name="'+j+'" value="'+b[j]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+i+"</object>",f(a.id),d=l(a.id)}else if(G.webkit&&G.webkit<312){var n=m("embed");n.setAttribute("type",u);for(var o in a)a[o]!=Object.prototype[o]&&("data"==o?n.setAttribute("src",a[o]):"styleclass"==o.toLowerCase()?n.setAttribute("class",a[o]):"classid"!=o&&n.setAttribute(o,a[o]));for(var p in b)b[p]!=Object.prototype[p]&&"movie"!=p&&n.setAttribute(p,b[p]);e.parentNode.replaceChild(n,e),d=n}else{var s=m(r);s.setAttribute("type",u);for(var t in a)a[t]!=Object.prototype[t]&&("styleclass"==t.toLowerCase()?s.setAttribute("class",a[t]):"classid"!=t&&s.setAttribute(t,a[t]));for(var v in b)b[v]!=Object.prototype[v]&&"movie"!=v&&k(s,v,b[v]);e.parentNode.replaceChild(s,e),d=s}return d}function k(a,b,c){var d=m("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function l(a){return x.getElementById(a)}function m(a){return x.createElement(a)}function n(a){var b=G.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10),c[2]=parseInt(c[2],10),b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function o(a,b){if(!G.ie||!G.mac){var c=x.getElementsByTagName("head")[0],d=m("style");if(d.setAttribute("type","text/css"),d.setAttribute("media","screen"),G.ie&&G.win||typeof x.createTextNode==q||d.appendChild(x.createTextNode(a+" {"+b+"}")),c.appendChild(d),G.ie&&G.win&&typeof x.styleSheets!=q&&x.styleSheets.length>0){var e=x.styleSheets[x.styleSheets.length-1];typeof e.addRule==r&&e.addRule(a,b)}}}function p(a,b){var c=b?"visible":"hidden";E?l(a).style.visibility=c:o("#"+a,"visibility:"+c)}{var q="undefined",r="object",s="Shockwave Flash",t="ShockwaveFlash.ShockwaveFlash",u="application/x-shockwave-flash",v="SWFObjectExprInst",w=window,x=document,y=navigator,z=[],A=[],B=null,C=null,D=null,E=!1,F=!1,G=function(){var a=typeof x.getElementById!=q&&typeof x.getElementsByTagName!=q&&typeof x.createElement!=q&&typeof x.appendChild!=q&&typeof x.replaceChild!=q&&typeof x.removeChild!=q&&typeof x.cloneNode!=q,b=[0,0,0],c=null;if(typeof y.plugins!=q&&typeof y.plugins[s]==r)c=y.plugins[s].description,c&&(c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),b[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),b[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),b[2]=/r/.test(c)?parseInt(c.replace(/^.*r(.*)$/,"$1"),10):0);else if(typeof w.ActiveXObject!=q){var d=null,e=!1;try{d=new ActiveXObject(t+".7")}catch(f){try{d=new ActiveXObject(t+".6"),b=[6,0,21],d.AllowScriptAccess="always"}catch(f){6==b[0]&&(e=!0)}if(!e)try{d=new ActiveXObject(t)}catch(f){}}if(!e&&d)try{c=d.GetVariable("$version"),c&&(c=c.split(" ")[1].split(","),b=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(f){}}var g=y.userAgent.toLowerCase(),h=y.platform.toLowerCase(),i=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,j=!1,k=/win/.test(h?h:g),l=/mac/.test(h?h:g);return{w3cdom:a,pv:b,webkit:i,ie:j,win:k,mac:l}}();!function(){if(G.w3cdom){if(b(d),G.ie&&G.win)try{x.write("<script id=__ie_ondomload defer=true src=//:></script>");var e=l("__ie_ondomload");e&&(e.onreadystatechange=function(){"complete"==this.readyState&&(this.parentNode.removeChild(this),a())})}catch(f){}G.webkit&&typeof x.readyState!=q&&(B=setInterval(function(){/loaded|complete/.test(x.readyState)&&a()
},10)),typeof x.addEventListener!=q&&x.addEventListener("DOMContentLoaded",a,null),c(a)}}()}return{registerObject:function(a,b,c){if(G.w3cdom&&a&&b){var d={};d.id=a,d.swfVersion=b,d.expressInstall=c?c:!1,A[A.length]=d,p(a,!1)}},getObjectById:function(a){var b=null;if(G.w3cdom&&E){var c=l(a);if(c){var d=c.getElementsByTagName(r)[0];!d||d&&typeof c.SetVariable!=q?b=c:typeof d.SetVariable!=q&&(b=d)}}return b},embedSWF:function(a,c,d,e,f,h,i,k,l){if(G.w3cdom&&a&&c&&d&&e&&f)if(d+="",e+="",n(f)){p(c,!1);var m=typeof l==r?l:{};m.data=a,m.width=d,m.height=e;var o=typeof k==r?k:{};if(typeof i==r)for(var s in i)i[s]!=Object.prototype[s]&&(typeof o.flashvars!=q?o.flashvars+="&"+s+"="+i[s]:o.flashvars=s+"="+i[s]);b(function(){j(m,o,c),m.id==c&&p(c,!0)})}else h&&!F&&n("6.0.65")&&(G.win||G.mac)&&(p(c,!1),b(function(){var a={};a.id=a.altContentId=c,a.width=d,a.height=e,a.expressInstall=h,g(a)}))},getFlashPlayerVersion:function(){return{major:G.pv[0],minor:G.pv[1],release:G.pv[2]}},hasFlashPlayerVersion:n,createSWF:function(a,b,c){return G.w3cdom&&E?j(a,b,c):void 0},createCSS:function(a,b){G.w3cdom&&o(a,b)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=x.location.search||x.location.hash;if(null==a)return b;if(b)for(var c=b.substring(1).split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return c[d].substring(c[d].indexOf("=")+1);return""},expressInstallCallback:function(){if(F&&C){var a=l(v);a&&(a.parentNode.replaceChild(C,a),D&&(p(D,!0),G.ie&&G.win&&(C.style.display="block")),C=null,D=null,F=!1)}}}}(),notificationTimoutObj={};$(window).on("shellReady",function(){$.get("addon.xml",function(a){app.addonData=$(a).find("addon").attr(),app.helpers.dialogInit()})}),$(document).ready(function(){app.helpers={},app.helpers.scroller={},app.helpers.getSelector=function(a){var b={content:"#content",title:"#title",dialog:"#dialog",sidebar1:"#sidebar-first",sidebar2:"#sidebar-second"};return b[a]},app.helpers.errorHandler=function(a,b){console.log(b),"undefined"!=typeof b[0]&&"Internal server error"==b[0].error||console.log("%c Bam! Error occurred ("+a+")",app.helpers.consoleStyle(4),b)},app.helpers.consoleStyle=function(a){var b={background:"#ccc",padding:"0 5px",color:"#444","font-weight":"bold","font-size":"110%"},c=[],d=[{background:"#D8FEFE"},{background:"#CCFECD"},{background:"#FFFDD9"},{background:"#FAE9F1"},{background:"#FFCECD"}];void 0!==a&&(b=$.extend(b,d[a]));for(var e in b)c.push(e+": "+b[e]);return c.join("; ")},app.helpers.varSet=function(a,b){app.vars[a]=b},app.helpers.varGet=function(a,b){return void 0!==app.vars[a]?app.vars[a]:b},app.helpers.arg=function(a){var b=location.hash,c=b.substring(1).split("/");return"undefined"!=typeof a?"undefined"==typeof c[a]?"":c[a]:c},app.helpers.getParameterByName=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},app.helpers.shuffle=function(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a},app.helpers.aphabeticalSort=function(a,b){var c=a,d=b;return"string"==typeof a&&(c=a.toLowerCase(),d=b.toLowerCase()),d>c?-1:c>d?1:0},app.helpers.isInt=function(a){return app.helpers.exists(a)?parseFloat(a)==parseInt(a)&&!isNaN(a):!1},app.helpers.getRandomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},app.helpers.numPad=function(a,b){var c="000000000"+a;return c.substr(c.length-b)},app.helpers.secToTime=function(a){var b=parseInt(a/3600)%24,c=parseInt(a/60)%60,d=a%60;return{hours:b,minutes:c,seconds:d}},app.helpers.timeToSec=function(a){var b=3600*parseInt(a.hours),c=60*parseInt(a.minutes);return parseInt(b)+parseInt(c)+parseInt(a.seconds)},app.helpers.formatTime=function(a){return void 0===a?0:(a.hours>0?a.hours+":":"")+(a.hours>0&&a.minutes<10?"0":"")+(a.minutes>0?a.minutes+":":"")+((a.minutes>0||a.hours>0)&&a.seconds<10?"0":"")+a.seconds},app.helpers.exists=function(a){return"undefined"!=typeof a},app.helpers.rating=function(a){return Math.round(10*a)/10},app.helpers.buildUrls=function(a,b,c){return $.each(a,function(d,e){a[d].url=app.helpers.buildUrl(b,e[c])}),a},app.helpers.buildUrl=function(a,b,c){return"song"==a||"file"==a?"#":"episode"==a?"#tvshow/"+c.tvshowid+"/"+c.season+"/"+b:"#"+a+"/"+b},app.helpers.setFirstSidebarContent=function(a,b){b="undefined"!=typeof b&&b===!0;var c=app.helpers.getFirstSidebarContent();b?c.append(a):c.html(a),app.helpers.firstSidebarBinds()},app.helpers.getFirstSidebarContent=function(){app.helpers.toggleSidebar("open");var a=$(app.helpers.getSelector("sidebar1"));return $(".sidebar-content",a)},app.helpers.firstSidebarBinds=function(){var a=app.helpers.getFirstSidebarContent();app.helpers.toggleSidebar("open"),$("img.lazy").lazyload({effect:"fadeIn",container:a}),a.trigger("scroll")},app.helpers.toggleSidebar=function(a){var b="sidebar",c="no-sidebar",d=$("body");void 0===a?d.toggleClass(b).toggleClass(c):("open"==a&&d.addClass(b).removeClass(c),"close"==a&&d.addClass(c).removeClass(b))},app.helpers.getSongKey=function(a){var b={type:"file"==a.songid||"undefined"==typeof a.songid?"file":"songid"};return b.id="file"==b.type?a.file:a.songid,b},app.helpers.parseArtistsArray=function(a){var b,c=[];for(var d in a.artist)b=void 0!==a.artistid?'<a href="#artist/'+a.artistid[d]+'">'+a.artist[d]+"</a>":a.artist[d],c.push(b);return c.join(", ")},app.helpers.parseArtistSummary=function(a){var b={songs:0,albums:0,time:0};for(var c in a.models){b.albums++;for(var d in a.models[c].attributes.songs)b.songs++,b.time=b.time+parseInt(a.models[c].attributes.songs[d].attributes.duration)}var e=[];return e.push(b.songs+" Songs"),e.push(b.albums+" Albums"),e.push(Math.floor(b.time/60)+" Mins"),e.join("<br />")},app.helpers.createPaginationRange=function(a,b){var c=void 0!==a?parseInt(a):0,d=c*app.itemsPerPage,e=d+app.itemsPerPage;return b&&b===!0&&(d=0),{end:e,start:d}},app.helpers.createPaginationRange=function(a,b){var c=void 0!==a?parseInt(a):0,d=c*app.itemsPerPage,e=d+app.itemsPerPage;return b&&b===!0&&(d=0),{end:e,start:d}},app.helpers.getSort=function(){var a=app.helpers.arg(3),b=a.split(":"),c={};return""===a||2!=b.length?(c.method="title",c.order="ascending"):(c.method=b[0],c.order=b[1]),c.ignorearticle=!0,c},app.helpers.getSortParams=function(){var a=app.helpers.getSort();return a.method+":"+a.order},app.helpers.getBrowser=function(){var a="other";return window.opera||navigator.userAgent.indexOf(" OPR/")>=0?a="opera":"undefined"!=typeof InstallTrigger?a="firefox":Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0?a="safari":window.chrome&&"opera"!=a?a="chrome":document.documentMode&&(a="ie"),a},app.helpers.applyBackstretch=function(a,b){if("#"==location.hash||""===location.hash&&app.audioStreaming.getPlayer()==b){var c=$(".backstretch img"),d=c.attr("src"),e=app.image.url(a,"fanart");c.length>0&&d!=e&&$.backstretch(e)}},app.helpers.dialogInit=function(a){var b={autoOpen:!1,height:"auto",width:350,modal:!0,resizable:!1};b=jQuery.extend(b,a),$(app.helpers.getSelector("dialog")).dialog(b)},app.helpers.dialog=function(a,b){var c=$(app.helpers.getSelector("dialog"));c.hasClass("ui-dialog-content")||app.helpers.dialogInit(),c.dialog("option","title"," "),c.dialog("option","height","auto"),c.dialog("option","buttons",{}),c.html(a),c.dialog("option",b),c.bind("dialogopen",function(){$(".ui-widget-overlay, .ui-dialog").css("position","fixed"),$(".dialog-menu a:last").addClass("last"),c.keypress(function(a){if(a.keyCode==$.ui.keyCode.ENTER){var b=$(this).parent(),c=b.find(".bind-enter"),d=0===c.length?b.find(".ui-dialog-buttonpane button:first"):c;b.find(".ui-dialog-buttonpane button").length>0&&d.trigger("click")}})}),c.dialog("open")},app.helpers.dialogClose=function(){$(app.helpers.getSelector("dialog")).dialog("close")},app.helpers.confirm=function(a,b){var c={title:"Are you sure?",buttons:{OK:function(){b(),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}};app.helpers.dialog(a,c)},app.helpers.prompt=function(a,b){var c={title:"Prompt",buttons:{OK:function(){var a=$("#promptText").val();""!==a&&(b(a),$(this).dialog("close"))},Cancel:function(){$(this).dialog("close")}}};a+='<div class="form-item"><input type="text" class="form-text" id="promptText" /></div>',app.helpers.dialog(a,c)},app.helpers.info=function(a,b){var c={title:a,buttons:{OK:function(){$(this).dialog("close")}}};app.helpers.dialog(b,c)},app.helpers.aboutDialog=function(){var a={title:"About this thing",buttons:{"Cool!":function(){$(this).dialog("close")},ChangeLog:function(){document.location="#xbmc/changelog",$(this).dialog("close")}}};app.helpers.applyTemplate("About",app.addonData,function(b){app.helpers.dialog(b,a)})},app.helpers.menuDialog=function(a){var b=$('<ul class="dialog-menu dialog-menu-'+a.key+'"></ul>'),c=$('<li class="item"></li>'),d={};$.each(a.items,function(a,e){d=c.clone(),d.html(e.title).addClass(e.class),d.on("click",function(){app.helpers.dialogClose(),e.callback&&e.callback()}),b.append(d)}),app.helpers.dialog(b,{title:a.title})},app.helpers.makeDropdown=function(a){var b={key:"untitled",items:[],pull:"left",omitwrapper:!1,buttonIcon:"fa-ellipsis-v",buttonText:""},c="",d=$.extend(b,a);d.omitwrapper||(c+='<div class="'+d.key+'-actions list-actions">'),c+='<button class="'+d.key+'-menu btn dropdown-toggle" data-toggle="dropdown"> <i class="fa '+d.buttonIcon+'"></i>'+d.buttonText+"</button>",c+='<ul class="dropdown-menu pull-'+d.pull+'">';for(var e in d.items){var f=d.items[e];c+=void 0===f.url?'<li class="'+f.class+'">'+f.title+"</li>":'<li><a href="'+f.url+'" class="'+f.class+'">'+f.title+"</a></li>"}return c+="</ul>",d.omitwrapper||(c+="</div>"),c},app.helpers.menuTemplates=function(a,b){var c={};switch(a){case"song":c={title:void 0!==b.label&&""!==b.label?b.label:""!==b.album?b.album:"",key:"song",omitwrapper:!0,items:[{url:"#","class":"song-custom-playlist",title:"Add to custom playlist",callback:function(){parseInt(b.songid)>0?app.playlists.playlistAddItems("lists","new","song",b.songid):app.playlists.saveCustomPlayListsDialog("local",[b],!1,!1)}}]},parseInt(b.songid)>0&&(c.items.push({url:"#","class":"song-download",title:"Download song",callback:function(){app.AudioController.downloadFile(b.file,function(a){window.location=a})}}),c.items.push({url:"#","class":"song-browser-play",title:"Play in browser",callback:function(){b.songid&&app.playlists.playlistAddItems("local","replace","song",b.songid)}}));break;case"album":c={title:""!==b.album?b.album:b.label,key:"album",omitwrapper:!0,items:[{url:"#","class":"album-add-xbmc",title:"Add to XBMC",callback:function(){app.playlists.playlistAddItems("xbmc","append","album",b.albumid)}},{url:"#","class":"album-add-local",title:"Play in browser",callback:function(){app.playlists.playlistAddItems("local","replace","album",b.albumid)}},{url:"#","class":"album-add-lists",title:"Save to lists",callback:function(){app.playlists.playlistAddItems("lists","new","album",b.albumid)}}]};break;case"artist":c={title:b.label,key:"artist",omitwrapper:!0,items:[{url:"#","class":"artist-add-xbmc",title:"Add to XBMC",callback:function(){app.playlists.playlistAddItems("xbmc","append","artist",b.artistid)}},{url:"#","class":"artist-add-local",title:"Play in browser",callback:function(){app.playlists.playlistAddItems("local","replace","artist",b.artistid)}},{url:"#","class":"artist-add-lists",title:"Save to lists",callback:function(){app.playlists.playlistAddItems("lists","new","artist",b.artistid)}}]};break;case"movie":c={title:b.label,key:"movie",omitwrapper:!0,items:[{url:"#","class":"movie-download",title:"Download Movie",callback:function(){app.AudioController.downloadFile(b.file,function(a){window.location=a})}}]};break;case"playlistShell":c={key:"playlist",pull:"right",items:[{"class":"dropdown-header",title:"Current Playlist"},{url:"#","class":"clear-playlist",title:"Clear Playlist"},{url:"#","class":"refresh-playlist",title:"Refresh Playlist"},{url:"#","class":"party-mode",title:'Party Mode <i class="fa fa-check"></i>'},{"class":"dropdown-header",title:"Audio"},{url:"#","class":"save-playlist",title:"Save XBMC Playlist"},{url:"#","class":"new-custom-playlist",title:"New Browser Playlist"}]}}return c},app.helpers.loadTemplates=function(a,b){var c=[];$.each(a,function(a,b){app[b]?c.push($.get("tpl/"+b+".html",function(a){app[b].prototype.template=_.template(a)},"html")):alert(b+" not found")}),$.when.apply(null,c).done(b)},app.helpers.loadTemplate=function(a,b){$.get("tpl/"+a+".html",function(c){app.tpl[a]=c,b&&b(app.tpl[a])})},app.helpers.applyTemplate=function(a,b,c){var d="";"undefined"!=typeof app.tpl[a]?(d=_.template(app.tpl[a],b),c(d)):app.helpers.loadTemplate(a,function(a){d=_.template(a,b),c(d)})},app.helpers.nearbottom=function(){var a=$(window),b=0+$(document).height()-a.scrollTop()-a.height(),c=600;return c>b},app.nl2br=function(a,b){var c=b||"undefined"==typeof b?"<br />":"<br>";return(a+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+c+"$2")},app.notification=function(a){var b=$("#notify");a!==!1&&""!==a&&(b.find(".content").html(a),b.removeClass("hidden").parent().removeClass("hidden"),clearTimeout(notificationTimoutObj),notificationTimoutObj=setTimeout(app.notificationHide,6e3))},app.notificationHide=function(){$notify=$("#notify").addClass("hidden").parent().addClass("hidden")},app.helpers.addScrollBar=function(a,b){scrollbarSettings={cursorwidth:8,cursorminheight:37,touchbehavior:!1,cursorcolor:"#606768"},settings=$.extend(scrollbarSettings,b)},app.storage={nameSpace:"chorus::",set:function(a,b){$.totalStorage(this.nameSpace+a,b)},get:function(a,b){var c=$.totalStorage(this.nameSpace+a);return void 0!==c&&""!==c?c:b}}}),function(a){$.fn.attr=function(){if(0===arguments.length){if(0===this.length)return null;var b={};return $.each(this[0].attributes,function(){b[this.name]=this.value}),b}return a.apply(this,arguments)}}($.fn.attr);var app={views:{},models:{},cached:{},counts:{503:0,"503total":0},state:"notconnected",jsonRpcUrl:"/jsonrpc",itemsPerPage:60,nextPageLoading:!1,playingInterval:!1,vars:{lastHash:"#",defaultImage:"theme/images/default.png"},albumFilters:[],songFilters:[],templates:["HomeView","ContactView","ShellView","ArtistView","ArtistSummaryView","ArtistListItemView","ArtistsView","AlbumView","AlbumItemView","SongView","AristsRandView","ArtistLargeItemView","AlbumItemSmallView","AlbumArtistView","PlaylistItemView","PlaylistCustomListItemView","CustomPlaylistSongView","FilesView","FileView","MovieListItemView","MovieView","TvshowListItemView","TvSeasonListItemView","TvshowView","RemoteView","PvrChannelListItem"],tpl:{}};app.Router=Backbone.Router.extend({routes:{"":"home",contact:"contact","artist/:id":"artist","artist/:id/:task":"artist",artists:"artists","album/:id":"album","music/radio":"pvr",albums:"music",mymusic:"music","music/:page":"music","music/:page/:id":"music","playlist/:id":"playlist","search/:q":"search",search:"searchLanding","scan/:type":"scan",thumbsup:"thumbsup",files:"files","movies/page/:num/:sort":"moviesPage","movies/:tag/:id":"moviesTag","movie-genre/:tag":"movieGenre","movies/:tag":"moviesTag",movies:"moviesLanding",mymovies:"moviesLanding","movie/:id":"movie","tv/page/:num/:sort":"tvshows",tv:"tvshowsLanding","tv/live":"pvr",mytv:"tvshowsLanding","tv/:tag/:id":"tvshowTag","tv/:tag":"tvshowTag","tvshow/:id":"tvshow","tvshow/:tvid/:seas":"season","tvshow/:tv/:s/:e":"episode","xbmc/:op":"xbmc",remote:"remoteControl",playlists:"playlists"},initialize:function(){app.shellView=new app.ShellView,$("body").html(app.shellView.render().el),$(window).trigger("shellReady"),this.$content=$("#content")},home:function(){var a="",b=app.playerState.xbmc.getNowPlaying();if(this.$content.html(""),app.ui.setTitle(""),app.shellView.selectMenuItem("home","no-sidebar"),"local"==app.audioStreaming.getPlayer()){var c=app.audioStreaming.getNowPlayingSong();a=void 0===c.fanart?"":c.fanart}else a=void 0===b||void 0===b.item||void 0===b.item.fanart?"":b.item.fanart;if(0===$(".backstretch").length){var d=app.image.url(a,"fanart");$.backstretch(d)}},search:function(a){$("#search").val(a),app.shellView.search(a)},searchLanding:function(){var a=$("#search");a.val().length>0?app.shellView.search(a.val()):(this.$content.html('<div class="loading-box">Type to search</div>'),app.shellView.selectMenuItem("search","no-sidebar"),a.focus())},artist:function(a,b){"undefined"==typeof b&&(b="view"),app.ui.setLoading("Artist"),app.artistsView=new app.ArtistsView,app.artistsView.render();var c=new app.Artist({id:parseInt(a),fields:app.fields.get("artist")}),d=this;c.fetch({success:function(a){d.$content.html(new app.ArtistView({model:a}).render().el),app.ui.setTitle("Artists",{addATag:"#artists",icon:"microphone",subTitle:a.attributes.artist}),app.shellView.selectMenuItem("artists","sidebar")}})},artists:function(){var a=$('<div class="landing-page"></div>');app.artistsView=new app.ArtistsView,a.html(app.artistsView.render().el),$("#content").html(a),app.ui.setTitle("Artists",{addATag:"#artists",icon:"microphone"}),app.shellView.selectMenuItem("artists","sidebar")},album:function(a){app.ui.setLoading("Album");var b={attributes:{albumid:a}};app.cached.albumView=new app.AlbumView({model:b,type:"album"}),0===$(".album-page").length?$("#content").html(app.cached.albumView.render().el):app.cached.albumView.render(),app.shellView.selectMenuItem("albums","sidebar")},music:function(a,b){void 0===a&&(a="recent");var c={page:a};void 0!==b?c.id=b:app.ui.setLoading("Music",!0),app.filters.renderFilters("music"),$(".music-filters").addClass("active-"+a),app.cached.musicView=new app.MusicView({model:c}),app.cached.musicView.render()},files:function(){app.cached.fileCollection=new app.FileCollection,app.cached.fileCollection.fetch({name:"sources",success:function(a){app.ui.setTitle("Files",{addATag:"#files",icon:"align-justify",subTitle:'<span id="folder-name"></span>'}),app.shellView.selectMenuItem("files","sidebar"),app.cached.filesView=new app.FilesView({model:a}),app.cached.filesView.render()}})},playlist:function(a){var b=this;app.ui.setLoading("Playlist"),app.cached.playlistCustomListSongCollection=new app.PlaylistCustomListSongCollection,app.cached.playlistCustomListSongCollection.fetch({name:a,success:function(c){app.cached.customPlaylistSongListView=new app.CustomPlaylistSongListView({model:c}),b.$content.html(app.cached.customPlaylistSongListView.render().el),app.filters.renderFilters("music"),$(".music-filters").addClass("active-pl active-pl-"+a);var d=app.playlists.getCustomPlaylist(a);app.ui.setTitle("Playlist",{addATag:"#playlist/"+d.id,icon:"music",subTitle:d.name}),app.shellView.selectMenuItem("playlist","sidebar")}})},playlists:function(){app.ui.setTitle("Playlists"),app.shellView.selectMenuItem("playlists","no-sidebar")},thumbsup:function(){app.cached.thumbsUpPage=new app.ThumbsupView,this.$content.html(app.cached.thumbsUpPage.render().$el)},movies:function(a,b){var c=$("#content"),d=app.helpers.getSortParams(),e=$("ul.movie-page-list",c),f=!1,g=!1,h=app.moviePageNum,i=$(window),j=0===e.length;if(d!=app.filters.movieLastSort&&(j=!0),app.filters.movieLastSort=d,b=void 0!==b&&b===!0,f=b!==!0,app.moviePageNum=parseInt(a),app.router.navigate("movies/page/"+a+"/"+d),app.settings.set("movieSort",d),j===!0)app.ui.setLoading("Movies",!0),app.helpers.setFirstSidebarContent(""),app.shellView.selectMenuItem("movies","sidebar"),f=!0;else if(0===app.moviePageNum)return i.scrollTo(0),void(app.moviePageNum=h);app.cached.movieCollection=new app.MovieCollection,app.cached.movieCollection.fetch({fullRange:f,success:function(a){if(a.showNext=!0,app.cached.movieListView=new app.MovieListView({model:a}),j===!0||0===app.moviePageNum||b!==!0)c.html(app.cached.movieListView.render().$el),c.prepend(app.filters.renderFilters("movie")),i.scrollTo(0),app.cached.movieListView.backFromMovie(f,g),f===!0&&g!==!0&&app.moviePageNum>1&&(i.scrollTo("85%"),g=!0),g===!1&&app.image.triggerContentLazy();else{var d=$(".video-list").last();0===d.find("li").length?d.remove():c.append(app.cached.movieListView.render().$el)}app.image.triggerContentLazy()}})},moviesPage:function(a){this.movies(a,!1)},moviesLanding:function(){var a=this;app.ui.setLoading("Movies",!0),app.movieRecentCollection=new app.MovieRecentCollection,app.movieRecentCollection.fetch({success:function(b){app.cached.movieListView=new app.MovieListView({model:b}),a.$content.html(app.cached.movieListView.render().$el),a.$content.prepend(app.filters.renderFilters("movie")),a.$content.prepend(app.image.getFanartFromCollection(b)),a.$content.find(".next-page").remove(),a.$content.find("ul").removeClass("movie-page-list").addClass("movie-recent-list"),app.image.triggerContentLazy(),$(window).scrollTo(0)}})},moviesTag:function(a,b){app.cached.movieTagView=new app.MovieTagListView({model:{type:"movie",tag:a,id:b}}),void 0===b?(app.ui.setLoading("Movies",!0),app.cached.movieTagView.render()):app.cached.movieTagView.renderTagItems()},movieGenre:function(){this.$content.html('<div class="loading-box">Loading</div>');var a=0,b=this,c=new app.VideoGenreCollection;c.fetch({type:"movie",success:function(c){$.each(c.models,function(b,c){c.attributes.label==app.helpers.arg(1)&&(a=parseInt(c.attributes.id))}),a>0&&b.moviesTag("genreid",a)}})},movie:function(a){var b=new app.Movie({id:parseInt(a)}),c=this;app.ui.setLoading("Movie"),b.fetch({success:function(a){c.$content.html(new app.MovieView({model:a}).render().el),app.ui.setTitle("Movies",{addATag:"#mymovies",icon:"film",subTitle:a.attributes.title+" <span>"+a.attributes.year+"</span>"}),app.shellView.selectMenuItem("movie","sidebar")}})},tvshows:function(){var a=$("#content");app.ui.setLoading("TV Shows",!0),app.cached.tvCollection=new app.TvshowAllCollection,app.cached.tvCollection.fetch({success:function(b){app.cached.tvshowListView=new app.TvshowListView({model:b}),a.html(app.cached.tvshowListView.render().$el),a.prepend(app.filters.renderFilters("tvshow")),app.image.triggerContentLazy()}})},tvshowsLanding:function(){var a=$("#content");app.ui.setLoading("TV Shows",!0),app.cached.recentTvCollection=new app.RecentTvepisodeCollection,app.cached.recentTvCollection.fetch({success:function(b){app.cached.recentTvshowListView=new app.TvSeasonListView({model:b,className:"video-list recent-tv-list"}),a.html(app.cached.recentTvshowListView.render().$el),a.prepend(app.filters.renderFilters("tvshow")),a.prepend(app.image.getFanartFromCollection(b)),app.image.triggerContentLazy()}})},tvshowTag:function(a,b){app.cached.tvTagView=new app.TvshowTagListView({model:{type:"tvshow",tag:a,id:b}}),void 0===b?(app.ui.setLoading("TV",!0),app.cached.tvTagView.render()):app.cached.tvTagView.renderTagItems()},tvshow:function(a){var b=new app.TVShow({id:parseInt(a)}),c=this;app.ui.setLoading("TV Show"),b.fetch({success:function(a){c.$content.html(new app.TvshowView({model:a}).render().el),app.ui.setTitle("TVShows",{addATag:"#mytv",icon:"desktop",subTitle:a.attributes.label}),app.shellView.selectMenuItem("tvshow","sidebar")}})},season:function(a,b){var c=new app.TVShow({id:parseInt(a)}),d=this;app.ui.setLoading("Season"),c.fetch({success:function(c){c.attributes.type="season",c.attributes.season=b;var e=app.stores.TvSeasons,f="seasons:"+a;void 0!==e&&void 0!==e[f]&&e[f].length>0&&$.each(e[f],function(a,d){d.season==b&&""!==d.thumbnail&&(c.attributes.thumbnail=d.thumbnail)}),d.$content.html(new app.TvshowView({model:c}).render().el),app.ui.setTitle('<i class="fa fa-desktop"></i><a href="#tvshow/'+c.attributes.tvshowid+'">'+c.attributes.label+"</a>Season "+b),app.shellView.selectMenuItem("tvshow","sidebar")}})},episode:function(a,b,c){var d=new app.TVEpisode({id:parseInt(c)}),e=this;app.ui.setLoading("Episode"),d.fetch({success:function(c){var d=c.attributes;c.attributes.type="episode",c.attributes.tvshowid=a,c.attributes.season=b,e.$content.html(new app.TvshowView({model:c}).render().el),app.ui.setTitle(d.showtitle,{addATag:"#tvshow/"+d.tvshowid,icon:"desktop",subTitle:"Season "+b+" Episode "+d.episode}),app.shellView.selectMenuItem("tvshow","sidebar")}})},pvr:function(){var a=this,b=app.pvr.getTypeFromPath();app.ui.setLoading(b.niceName+" channels",!0),app.cached.pvrChannelCollection=new app.PvrChannelCollection,app.cached.pvrChannelCollection.fetch({type:b.type,success:function(c){app.cached.pvrChannelsView=new app.PvrChannelsView({model:c}),a.$content.html(app.cached.pvrChannelsView.render().$el),a.$content.prepend(app.filters.renderFilters(b.filters))}})},remoteControl:function(){app.playlists.changePlaylistView("xbmc"),app.ui.setTitle("Remote"),app.shellView.selectMenuItem("remote","no-sidebar")},scan:function(a){var b="audio"==a?"AudioLibrary":"VideoLibrary",c=this;app.xbmcController.command(b+".Scan",{},function(){app.notification("Started "+a+" Scan"),app.shellView.selectMenuItem("scan","no-sidebar"),c.$content.html('<div class="loading-box">Scanning '+a+" library</div>"),app.ui.setTitle('<i class="fa fa-refresh"></i> '+a+" scan")})},xbmc:function(a){app.cached.xbmcView=new app.XbmcView({model:a}),$("#content").html(app.cached.xbmcView.render().$el),app.ui.setTitle("XBMC",{addATag:"#xbmc/home"}),app.shellView.selectMenuItem("xbmc","no-sidebar")}}),$(document).on("ready",function(){app.helpers.loadTemplates(app.templates,function(){app.router=new app.Router,Backbone.history.start()}),app.store.libraryCall(function(){$("body").addClass("artists-ready"),app.notification("Artists loaded")},"artistsReady"),app.store.libraryCall(function(){$("body").addClass("audio-library-ready"),app.notification("Library loaded"),"local"==app.settings.get("lastPlayer","xbmc")&&$(".local-tab").trigger("click")},"songsReady")}),app.fields={get:function(a,b){if(void 0!==app.fields.data[a]){var c=app.fields.data[a],d=a+"Full";return void 0!==b&&b===!0&&void 0!==app.fields.data[d]&&-1==$.inArray(app.fields.data[d][0],c)&&$.each(app.fields.data[d],function(a,b){c.push(b)}),c}return[]},data:{artist:["instrument","style","mood","born","formed","description","genre","died","disbanded","yearsactive","musicbrainzartistid","fanart","thumbnail"],album:["title","description","artist","genre","theme","mood","style","type","albumlabel","rating","year","fanart","thumbnail","playcount","genreid","artistid","displayartist"],song:["title","artist","albumartist","genre","year","rating","album","track","duration","playcount","fanart","thumbnail","file","albumid","lastplayed","disc","genreid","artistid","displayartist","albumartistid"],movie:["title","genre","year","tagline","originaltitle","lastplayed","playcount","runtime","thumbnail","file","sorttitle","resume","fanart","dateadded"],movieFull:["rating","director","trailer","plot","plotoutline","writer","studio","mpaa","cast","country","imdbnumber","set","showlink","streamdetails","top250","votes","setid","tag","art"],tvshow:["title","year","genre","playcount","episode","thumbnail","file","season","watchedepisodes"],tvshowFull:["lastplayed","rating","plot","studio","mpaa","cast","imdbnumber","premiered","votes","fanart","originaltitle","sorttitle","episodeguide","dateadded","tag","art"],tvepisode:["title","playcount","runtime","season","episode","originaltitle","showtitle","lastplayed","thumbnail","file","resume","tvshowid","dateadded","uniqueid","fanart"],tvepisodeFull:["art","cast","productioncode","director","plot","votes","rating","writer","firstaired","streamdetails"],tvseason:["season","showtitle","playcount","episode","fanart","thumbnail","tvshowid","watchedepisodes","art"],file:["title","size","mimetype","file","dateadded","thumbnail","artistid","albumid","uniqueid"],playlistItem:["title","artist","albumartist","genre","year","rating","album","track","duration","playcount","director","tagline","plotoutline","originaltitle","lastplayed","mpaa","cast","country","imdbnumber","premiered","runtime","showlink","streamdetails","votes","firstaired","season","episode","showtitle","thumbnail","fanart","file","resume","artistid","albumid","tvshowid","watchedepisodes","disc","tag","art","genreid","displayartist","albumartistid","description","theme","mood","style","albumlabel","sorttitle","uniqueid","dateadded","channel","channeltype","hidden","locked","channelnumber","starttime","endtime"],channel:["thumbnail","channeltype","hidden","locked","channel","lastplayed"]}},app.filters={movieLastSort:"title:ascending",tvshowLastSort:"title:ascending",movieFilters:{title:"Movies",basePath:"#movies/page/",video:!0,paths:[{title:"Recently Added",path:"movies",argOne:"",key:"recent"},{title:"All Movies",path:"movies/page/0/title:ascending",argOne:"page",key:"all"},{title:"Genres",path:"movies/genreid",argOne:"genreid",key:"genreid"},{title:"Years",path:"movies/year",argOne:"year",key:"year"}],sort:["title","date","rating","year","file"]},tvshowFilters:{title:"TV",basePath:"#tv/page/",video:!0,paths:[{title:"Recently Added",path:"tv",argOne:"",key:"recent"},{title:"All TV",path:"tv/page/0/title:ascending",argOne:"page",key:"all"},{title:"Genres",path:"tv/genreid",argOne:"genreid",key:"genreid"}],sort:["title","date","rating","year","file"]},musicFilters:{title:"Music",basePath:"#music",audio:!0,paths:[{title:"Recent",path:"music/recent",key:"recent",argOne:"recent"},{title:"Recently Added",path:"music/recently-added",key:"recently-added",argOne:"recently-added"},{title:"Recently Played",path:"music/recently-played",key:"recently-played",argOne:"recently-played"},{title:"Genres",path:"music/genres",key:"genres",argOne:"genres"},{title:"Years",path:"music/years",key:"years",argOne:"years"}]},getFilters:function(a){return app.filters[a+"Filters"]},addFilterPath:function(a,b){app.filters[a+"Filters"].paths.push(b)},renderFilters:function(a){var b="music"==a?"sidebar-":"";app.shellView.selectMenuItem(a+("music"!=a?"s":""),"sidebar");var c=$("<div/>",{"class":b+"filter-wrapper "+a+"-filters"}),d=$("<div/>",{"class":"links"}),e=$("<div/>",{"class":"sort-wrapper dropdown"}),f=app.filters.getFilters(a),g=app.helpers.getSort(),h=$("body"),i="";if($.each(f.paths,function(a,b){var e=app.helpers.arg(1)==b.argOne,f=e?" active":"";e&&(c.addClass("active-tab-"+b.key),i=b.title),d.append($('<a href="#'+b.path+'" class="btn sublink-'+b.key+f+'">'+b.title+"</a>"))}),void 0!==f.sort){var j=[],k={},l="ascending",m="asc";$.each(f.sort,function(a,b){l=b==g.method?"ascending"==g.order?"descending":"ascending":l,m=app.filters.shortOrder(l),k={title:b+(g.method==b?' <i class="fa fa-angle-'+("asc"!=app.filters.shortOrder(l)?"down":"up")+'"></i>':""),url:f.basePath+"0/"+b+":"+l,"class":"dir-"+l},j.push(k)});var n={key:"sort-items",items:j,pull:"right",buttonIcon:"fa-angle-"+("desc"==app.filters.shortOrder(g.order)?"down":"up"),buttonText:" "+g.method};e.append(app.helpers.makeDropdown(n))}if(void 0!==f.video){var o=$('<button class="btn show-watched-btn" title="Hide watched"><i class="fa fa-check-circle"></i></button>');o.on("click",function(){h.toggleClass("hide-watched"),app.settings.set("hideWatched",h.hasClass("hide-watched"))}),e.append(o),app.settings.get("hideWatched",!1)&&h.addClass("hide-watched")}return"music"==a&&(d.append($("<div />",{id:"sidebar-after"})),app.playlists.addCustomPlayLists(function(a){var b=$("#sidebar-after",d);b.html(a.render().$el)})),c.append(e),app.helpers.setFirstSidebarContent(d),app.ui.setTitle(f.title,{addATag:document.location.hash,icon:app.image.getIcon(a),subTitle:i}),c},shortOrder:function(a,b){return void 0!==b&&b===!0?"ascending"!=a?"asc":"desc":"ascending"==a?"asc":"desc"}},app.image={icons:{music:"music",video:"film",song:"music",artist:"microphone",album:"th-large",tvshow:"desktop",movie:"film"},getIcon:function(a,b){b=void 0!==b&&b===!0;var c=void 0!==this.icons[a]?this.icons[a]:"cloud";return b?'<i class="fa fa-'+c+' entity-icon"></i>':c},url:function(a,b){return b="undefined"==typeof b?"default":b,"space"==b?"theme/images/space.png":void 0===a||""===a?app.image.defaultImage(b):app.settings.get("basePath","/")+"image/"+encodeURIComponent(a)},defaultImage:function(a){var b="";
if("fanart"==a){var c=["wallpaper-443657.jpg","wallpaper-45040.jpg","wallpaper-765190.jpg","wallpaper-84050.jpg"],d=c[app.helpers.getRandomInt(0,c.length-1)];b="theme/images/fanart_default/"+d}else b=app.helpers.varGet("defaultImage");return b},isDefaultImage:function(a){return app.helpers.varGet("defaultImage")==a},getFanartFromCollection:function(a){var b,c=[],d=$("<div />",{id:"art","class":"content-fanart"});return d.on("click",function(){$(this).toggleClass("full-size")}),$.each(a.models,function(a,d){b=d.attributes,""!==b.fanart&&c.push(b)}),c.length>0&&(c=app.helpers.shuffle(c),d.append($("<img />",{src:app.image.url(c[0].fanart)}))),$("#content").prepend(d),d},triggerContentLazy:function(){_.defer(function(){$("#content").find("img").lazyload({threshold:200}),$(window).trigger("scroll")})},addFreewall:function(a){var b=new freewall(a);b.reset({selector:"li",animate:!1,cellW:160,cellH:"230",gutterY:15,gutterX:15,onResize:function(){b.fitWidth()}}),b.fitWidth()},addPosterFreewall:function(a){var b=new freewall(a);b.reset({selector:"li",animate:!1,cellW:170,cellH:"305",gutterY:15,gutterX:15,onResize:function(){b.fitWidth()}}),b.fitWidth()}},app.pager={type:"movie",map:{movie:{allCollection:"MovieAllCollection",collection:"CustomMovieCollection",view:"MovieListView"}},setType:function(a){return this.type=a,this},viewHelpers:function(a,b){var c=app.pager,d=$("body").width()<800,e=d?"0.8":"500px";if(c.type=void 0!==b?b:this.type,c.$el=a,a.find("li").length>0){var f=$('<li class="next-page">More...</li>');c.$el.append(f)}return $(window).smack({threshold:e}).done(function(){$("ul."+c.type+"-page-list").find(".next-page").last().trigger("click")}),c.$el.addClass("page-"+app[c.type+"PageNum"]),c.$el.find("img").lazyload({threshold:200}),c.$el},nextPage:function(a,b){return this.type=void 0!==b?b:this.type,a.remove(),app.router[this.type+"s"](app[this.type+"PageNum"]+1,!0),a},libraryNav:function(a,b,c){var d=!1,e=0,f=0,g=0;return $.each(c,function(c,h){var i=h.attributes,j=a+"id";d===!0&&(e=parseInt(i[j]),d=!1),i[j]==b&&(d=!0,g=f),f=b}),{next:e,prev:g}}},app.settings={settingsKey:"settings",defaultSettings:{init:!0,basePath:"/",hideWatched:!1,lastPlayer:"xbmc",movieSort:"title:ascending"},set:function(a,b){var c=app.settings.allSettings();return c[a]=b,app.storageController.setStorage(app.settings.settingsKey,c),b},get:function(a,b){var c=app.settings.allSettings();return void 0!==c[a]?c[a]:b},allSettings:function(){var a=app.storageController.getStorage(app.settings.settingsKey);return null===a||void 0===a.init?(app.storageController.setStorage(app.settings.settingsKey,app.settings.defaultSettings),app.settings.defaultSettings):a},getBeerUrl:function(){return"https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=ZCGV976794JHE&lc=AU&item_name=Chorus%20Beer%20Fund&currency_code=AUD&bn=PP%2dDonationsBF%3abtn_donate_SM%2egif%3aNonHosted"}},app.ui={setLoading:function(a,b){b=void 0!==b&&b===!0,b&&app.helpers.setFirstSidebarContent(""),$("#content").html('<div class="loading-box">Loading '+a+"</div>"),app.ui.setTitle("Loading",{addATag:"#",icon:"refresh"});var c=$(".backstretch");c.length>0&&$.backstretch("destroy",!1)},setTitle:function(a,b){var c={addATag:!1,tabs:!1,activeTab:0,subTitle:"",icon:!1},d=$.extend(c,b),e=$("#title"),f="";e.empty(),d.icon!==!1&&(f='<i class="fa fa-'+d.icon+'"></i> '),d.addATag&&(e.append($('<a class="title-sub" href="'+d.addATag+'">'+f+a+"</a>")),e.append(d.subTitle));var g=0;if(d.tabs!==!1){var h=$('<div class="nav nav-tabs"></div>');for(var i in d.tabs){var j=$('<a href="'+i+'" class="nav-tab">'+d.tabs[i]+"</a>");h.append(j),g++}e.append(h)}d.addATag||e.append('<div class="title-main">'+f+a+"</div>"),app.currentPageTitle=f+a},getTitle:function(){return app.currentPageTitle},renderNoResult:function(a){$("#content").html('<div class="loading-box no-result">'+(void 0===a?"Nothing found":a)+"</div>")},featureNotBuiltDialog:function(){app.helpers.info("Feature not yet built","This is still just an idea, to help turn it into reality, "+app.ui.beerLink("Beer")+" is always a good incentive :)")},beerLink:function(a){return'<a href="'+app.settings.getBeerUrl()+'" target="_blank">'+a+"</a>"},timerStart:function(){app.playingInterval=setTimeout(app.ui.timerUpdate,1e3)},timerStop:function(){clearTimeout(app.playingInterval)},timerUpdate:function(){var a=app.playerState.xbmc.getNowPlaying();if(app.ui.timerStop(),"playing"==a.status&&void 0!==a.player.time){var b=app.helpers.timeToSec(a.player.time)+1,c=app.helpers.timeToSec(a.player.totaltime),d=Math.ceil(b/c*100),e=app.helpers.secToTime(b);app.cached.nowPlaying.player.time=e,$("#footer .time-cur").html(app.helpers.formatTime(e)),app.shellView.$progressSlider.slider("value",d),app.ui.timerStart()}}},app.Artist=Backbone.Model.extend({initialize:function(){},defaults:{artistid:1,thumbnail:"",fanart:"",artist:"",label:"",description:"",born:"",died:""},sync:function(a,b,c){"read"===a&&app.store.getArtist(parseInt(this.id),function(a){a.attributes.thumbsup=app.playlists.isThumbsUp("artist",a.attributes.artistid),c.success(a.attributes)})}}),app.Album=Backbone.Model.extend({initialize:function(){},defaults:{album:"",albumid:"",thumbnail:"",artist:"",artistid:"",songs:[],albumsitems:[]},sync:function(a){}}),app.Song=Backbone.Model.extend({initialize:function(){},defaults:{label:"",thumbnail:"",albumid:0,artistid:[0],type:"song",playlistId:0,url:"#",subLink:""},sync:function(a){}}),app.PlaylistItem=Backbone.Model.extend({initialize:function(){},defaults:{label:"",thumbnail:"",albumid:0,artistid:[0],songid:"file",file:"",list:"xbmc",playlistId:0,type:"file"}}),app.PlaylistCustomListItem=Backbone.Model.extend({initialize:function(){},defaults:{name:"",items:[],id:0,type:"file"}}),app.PlaylistCustomListItemSong=Backbone.Model.extend({initialize:function(){},defaults:{label:"",thumbnail:"",albumid:0,artistid:[0]}}),app.Tag=Backbone.Model.extend({initialize:function(){},defaults:{title:"",thumbnail:"",type:"music",genreid:0,id:0,url:"#"},sync:function(a){}}),app.File=Backbone.Model.extend({initialize:function(){},defaults:{filetype:"",size:"",mimetype:"",file:"",lastmodified:"",id:0,thumbnail:""},sync:function(a){}}),app.PvrChannel=Backbone.Model.extend({initialize:function(){},defaults:{thumbnail:null,channeltype:null,hidden:null,locked:null,channel:null,lastplayed:null,channelid:0},sync:function(a){}}),app.Movie=Backbone.Model.extend({initialize:function(){},defaults:{movieid:1,thumbnail:"",fanart:"",year:"",url:"#movies",thumbsup:!1,libraryId:1},sync:function(a,b,c){"read"===a&&app.xbmcController.command("VideoLibrary.GetMovieDetails",[parseInt(this.id),app.fields.get("movie",!0)],function(a){var b=a.result.moviedetails;b.thumbsup=app.playlists.getThumbsUp("movie",b.movieid),c.success(b)})}}),app.TVShow=Backbone.Model.extend({initialize:function(){},defaults:{tvshowid:"",label:"",watchedepisodes:"",genre:"",year:"",cast:[],rating:0,url:"#tv",episodeid:""},sync:function(a,b,c){if("read"===a){var d=app.fields.get("tvshow",!0);-1==$.inArray("fanart",d)&&d.push("fanart"),-1==$.inArray("watchedepisodes",d)&&d.push("watchedepisodes"),app.xbmcController.command("VideoLibrary.GetTVShowDetails",[parseInt(this.id),d],function(a){var b=a.result.tvshowdetails;b.thumbsup=app.playlists.getThumbsUp("tvshow",b.tvshowid),b.url="#tvshow/"+b.tvshowid,app.cached.tvseasonCollection=new app.TvseasonCollection,app.cached.tvseasonCollection.fetch({tvshowid:b.tvshowid,success:function(a){b.seasons=a,c.success(b)}})})}}}),app.TVEpisode=Backbone.Model.extend({initialize:function(){},defaults:{album:"",mpaa:"",thumbnail:"",artist:"",genre:[],artistid:"",songs:[],albumsitems:[],url:"#tv",imdbnumber:""},sync:function(a,b,c){if("read"===a){var d=app.fields.get("tvepisode",!0);app.xbmcController.command("VideoLibrary.GetEpisodeDetails",[parseInt(this.id),d],function(a){var b=a.result.episodedetails;b.thumbsup=app.playlists.getThumbsUp("episode",b.episodeid),c.success(b)})}}}),app.Video=Backbone.Model.extend({initialize:function(){},defaults:{album:"",albumid:"",thumbnail:"",artist:"",artistid:"",songs:[],albumsitems:[],url:"#video"},sync:function(a){}}),app.addOns={addon:{}},app.addOns.getSources=function(a){app.xbmcController.command("Addons.GetAddons",["xbmc.addon.audio","unknown","all",["name","thumbnail","enabled"]],function(b){var c=b.result.addons,d=[];for(var e in c){var f=c[e],g={};f.enabled&&(g={file:"plugin://"+f.addonid+"/",title:f.name,filetype:"directory",id:f.addonid,sourcetype:"music",playlistId:app.AudioController.playlistId},f=$.extend(f,g),d.push(f))}app.cached.addonSources=d,a&&a(d)})},app.addOns.ready=function(a){"undefined"!=typeof app.cached.addonSources?a(app.cached.addonSources):app.addOns.getSources(a)},app.addOns.getAddon=function(a){if("undefined"!=typeof app.cached.addonSources)for(var b in app.cached.addonSources){var c=app.cached.addonSources[b],d=app.addOns.slug(c);if(d==a)return c}return{}},app.addOns.invokeAll=function(a,b,c,d){if("undefined"!=typeof app.cached.addonSources)for(var e in app.cached.addonSources){var f=app.cached.addonSources[e],g=app.addOns.slug(f);b=app.addOns.invoke(g,a,b,c,d)}else app.addOns.getSources();return b},app.addOns.invoke=function(a,b,c,d,e){if("undefined"!=typeof app.addOns.addon[a]&&"function"==typeof app.addOns.addon[a][b]){var f=app.addOns.addon[a][b];c=f(c,d,e)}return c},app.addOns.slug=function(a){return a.addonid.split(".").join("")},app.AudioController={playlistId:0,currentPlaylist:{items:[],status:"none"}},app.AudioController.playlistRender=function(a){app.playlists.renderXbmcPlaylist(app.AudioController.playlistId,a)},app.AudioController.playlistAdd=function(a,b,c){var d={};d[a]=b,app.xbmcController.command("Playlist.Add",[app.AudioController.playlistId,d],function(){app.AudioController.getPlaylistItems(function(a){app.AudioController.currentPlaylist=a,c(a)})})},app.AudioController.playlistAddMultiple=function(a,b,c){var d,e=[];for(var f in b)param={},d=b[f],"mixed"==a&&(a="number"==typeof d?"songid":"file"),param[a]=d,e.push({method:"Playlist.Add",params:[app.AudioController.playlistId,param]});app.xbmcController.multipleCommand(e,function(){app.AudioController.getPlaylistItems(function(a){app.AudioController.currentPlaylist=a,c(a)})})},app.AudioController.playlistSwap=function(a,b,c){app.playlists.playlistSwap(app.AudioController.playlistId,"songid",a,b,c)},app.AudioController.playlistClearAdd=function(a,b,c){app.xbmcController.command("Playlist.Clear",[app.AudioController.playlistId],function(){app.notification("Playlist Cleared"),app.AudioController.playlistAdd(a,b,c)})},app.AudioController.playlistClear=function(a){app.xbmcController.command("Playlist.Clear",[app.AudioController.playlistId],function(b){a&&a(b)})},app.AudioController.playlistPlaySongId=function(a){var b=!1;$.each(app.AudioController.currentPlaylist.items,function(c,d){d.id==a&&b===!1&&(app.AudioController.playPlaylistPosition(c,function(){app.AudioController.playlistRender(),app.notification('Now playing "'+d.label+'"')}),b=!0)})},app.AudioController.playSongById=function(a,b,c,d){app.helpers.exists(d)&&d===!0?app.AudioController.playlistClearAdd(b,c,function(){app.AudioController.playlistPlaySongId(a)}):app.AudioController.playlistAdd(b,c,function(){app.AudioController.playlistPlaySongId(a)})},app.AudioController.insertAndPlay=function(a,b,c){app.playlists.insertAndPlay(app.AudioController.playlistId,a,b,c)},app.AudioController.playerOpen=function(a,b,c){app.playlists.playerOpen(app.AudioController.playlistId,a,b,c)},app.AudioController.downloadFile=function(a,b){app.xbmcController.command("Files.PrepareDownload",[a],function(a){b&&b(a.result.details.path)})},app.AudioController.sendPlayerCommand=function(a,b){app.xbmcController.command(a,[app.playerState.xbmc.getNowPlaying("activePlayer"),b],function(){app.playerState.xbmc.fetch()})},app.AudioController.playPlaylistPosition=function(a,b){app.xbmcController.command("Player.Open",[{playlistid:app.AudioController.playlistId,position:a}],function(a){b(a.result)})},app.AudioController.removePlaylistPosition=function(a,b){app.xbmcController.command("Playlist.Remove",[app.AudioController.playlistId,a],function(a){b(a.result)})},app.AudioController.seek=function(a,b){app.xbmcController.command("Player.Seek",[app.playerState.xbmc.getNowPlaying("activePlayer"),a],function(a){app.helpers.exists(b)&&b(a.result)})},app.AudioController.getPlaylistItems=function(a){app.playlists.getXbmcPlaylist(app.AudioController.playlistId,a)},app.AudioController.setVolume=function(a){app.xbmcController.command("Application.SetVolume",[a],function(){})},app.AudioController.audioLibraryScan=function(){app.xbmcController.command("AudioLibrary.Scan",[],function(){})},app.AudioController.setPartyMode=function(a){app.playlists.setPartyMode(app.AudioController.playlistId,a)},soundManager.setup({url:"lib/soundmanager/swf/",flashVersion:9,preferFlash:!1,useHTML5Audio:!0,useFlashBlock:!1,flashLoadTimeout:3e3,debugMode:!1,noSWFCache:!0,debugFlash:!1,onready:function(){app.audioStreaming.init()},ontimeout:function(){console.log("timeout"),soundManager.flashLoadTimeout=0,soundManager.onerror={},soundManager.reboot()}}),$(window).on("shellReady",function(){app.audioStreaming.$body=$("body"),app.audioStreaming.$window=$(window),app.audioStreaming.playList={items:[],playingPosition:0,id:0,repeat:"off",random:"off",mute:!1}}),$(window).on("browserPlayerStart",function(a){app.audioStreaming.playbackInProgress=!0,app.audioStreaming.setTitle("playing",a.label)}),$(window).on("browserPlayerStop",function(){app.audioStreaming.playbackInProgress=!1,app.audioStreaming.setTitle("stop","Nothing Playing")}),app.audioStreaming={localPlay:!1,nowplaying:{init:1},lastPos:0,defaultVol:60,progressEl:"#browser-progress-bar",volumeEl:"#browser-volume",playlistEl:"#playlist-local",playbackInProgress:!1,currentPlaybackId:"browser-none",lastListKey:"lastBrowserList",classLocal:"player-view-local",classXbmc:"player-view-xbmc",classLocalPlaying:"browser-playing",classLocalPaused:"browser-paused",playerReady:function(){},init:function(){$(window).trigger("soundManagerReady"),soundManager.setVolume(app.audioStreaming.defaultVol);var a=app.storageController.getStorage(app.audioStreaming.lastListKey);void 0!==a&&null!==a&&a.length>0&&app.store.libraryCall(function(){app.playlists.playlistGetItems("items",a,function(a){if(void 0!==app.audioStreaming.playList&&(app.audioStreaming.playList.items=a,app.audioStreaming.renderPlaylistItems(),void 0!==a.models&&void 0!==a.models[0])){var b=a.models[0];app.audioStreaming.loadSong(b),app.audioStreaming.updatePlayingState(b.attributes)}})},"songsReady"),app.audioStreaming.progressInit(),app.audioStreaming.volumeInit()},setPlayer:function(a){var b,c=$("body");"xbmc"==a&&(c.addClass(app.audioStreaming.classXbmc).removeClass(app.audioStreaming.classLocal),b=app.playerState.xbmc.getNowPlaying("item"),app.helpers.applyBackstretch(b.fanart,"xbmc")),"local"==a&&(c.removeClass(app.audioStreaming.classXbmc).addClass(app.audioStreaming.classLocal),0===$("ul.browser-playlist-song-list").length&&app.audioStreaming.renderPlaylistItems(),b=app.audioStreaming.getNowPlayingSong(),app.helpers.applyBackstretch(void 0!==b.fanart?b.fanart:"","local"))},getPlayer:function(){return $("body").hasClass(app.audioStreaming.classLocal)?"local":"xbmc"},getNowPlayingSong:function(){if(void 0!==app.audioStreaming.playList&&void 0!==app.audioStreaming.playList.items.models&&void 0!==app.audioStreaming.playList.items.models[app.audioStreaming.playList.playingPosition]){var a=app.audioStreaming.playList.items.models[app.audioStreaming.playList.playingPosition];return a.attributes}return{}},playPosition:function(a){if($("li.browser-player div.playlist-item").removeClass("browser-playing-row"),app.audioStreaming.playList.items.models.length>0&&void 0!==app.audioStreaming.playList.items.models[parseInt(a)]){var b=app.audioStreaming.playList.items.models[parseInt(a)].attributes;app.audioStreaming.playList.playingPosition=a,app.audioStreaming.loadSong({attributes:b},function(){app.audioStreaming.play(),app.notification("Playing "+b.label+" in the browser")})}else app.audioStreaming.stop()},setPlaylistItems:function(a){var b=[];$.each(a.models,function(c,d){"undefined"!=typeof d.attributes.songid&&(b.push(d.attributes.songid),a.models[c].attributes.type="song")}),app.storageController.setStorage(app.audioStreaming.lastListKey,b),app.audioStreaming.playList.items=a},appendPlaylistItems:function(a,b){var c;void 0===app.audioStreaming.playList?c=a:(c=app.audioStreaming.playList.items,void 0===c.models&&(c.models=[]),$.each(a.models,function(a,b){c.models.push(b)}),c.length=c.models.length),app.audioStreaming.setPlaylistItems(c),app.audioStreaming.renderPlaylistItems(),b&&b()},replacePlaylistItems:function(a,b){app.audioStreaming.setPlaylistItems(a),app.audioStreaming.renderPlaylistItems(),app.audioStreaming.loadSong(a.models[0],function(){app.playlists.changePlaylistView("local"),app.audioStreaming.playPosition(0),b&&b()})},renderPlaylistItems:function(){if(void 0!==app.audioStreaming.playList){var a=app.audioStreaming.playList.items,b=new app.CustomPlaylistSongSmallListView({model:a}).render();$(app.audioStreaming.playlistEl).html(b.$el)}},playlistClear:function(a){var b={models:[]};app.audioStreaming.setPlaylistItems(b),a&&a()},playlistRender:function(){app.audioStreaming.renderPlaylistItems()},loadSong:function(a,b){app.audioStreaming.stop();var c=soundManager,d=a.attributes;app.AudioController.downloadFile(d.file,function(a){app.audioStreaming.currentPlaybackId="browser-"+d.songid,app.audioStreaming.localPlay=c.createSound({id:app.audioStreaming.currentPlaybackId,url:a,autoPlay:!1,autoLoad:!0,stream:!0,onerror:function(a){app.helpers.errorHandler("SoundManager failed to load: "+a.type,a)},onplay:function(){$("body").addClass("browser-playing").removeClass("browser-paused"),app.audioStreaming.updatePlayingState(d);var a=$("#browser-volume").slider("value");app.audioStreaming.localPlay.setVolume(a),$(window).trigger("browserPlayerStart",[d])},onstop:function(){app.audioStreaming.playerStateStop()},onpause:function(){$("body").removeClass("browser-playing").addClass("browser-paused"),$(window).trigger("browserPlayerStop",[d])},onresume:function(){$("body").addClass("browser-playing").removeClass("browser-paused"),$(window).trigger("browserPlayerStart",[d])},onfinish:function(){var a=app.audioStreaming.playList,b=a.items.models,c=parseInt(a.playingPosition);if("one"==a.repeat)app.audioStreaming.playPosition(c);else if("on"==a.random){var d=app.helpers.getRandomInt(0,b.length-1);app.audioStreaming.playPosition(d)}else"all"==a.repeat?b.length==c+1&&app.audioStreaming.playPosition(0):b.length>c?app.audioStreaming.playPosition(c+1):app.audioStreaming.stop()},whileplaying:function(){var a=parseInt(this.position)/1e3,b=parseInt(this.duration)/1e3,c=Math.round(a/b*100),e=$("#browser-time"),f=($("#browser-now-playing"),Math.round(void 0!==this.buffered[0]?this.buffered[0].end/this.duration*100:0));app.audioStreaming.nowplaying.player={position:a,duration:b,percentage:c},$(".time-cur",e).html(app.helpers.formatTime(app.helpers.secToTime(Math.floor(a)))),$(".time-total",e).html(app.helpers.formatTime(app.helpers.secToTime(Math.floor(b)))),c!=app.audioStreaming.lastPos&&(f>0&&$("#browser-progress-buffer").css("width",f+"%"),$(app.audioStreaming.progressEl).slider("value",c),app.audioStreaming.updatePlayingState(d)),app.audioStreaming.lastPos=c}}),$(app.audioStreaming.progressEl).hasClass("ui-slider")||(app.audioStreaming.localPlay.setVolume(app.audioStreaming.defaultVol),app.audioStreaming.progressInit(),app.audioStreaming.volumeInit()),b&&b()})},updatePlayingState:function(a){$("#browser-playing-thumb").attr("src",app.image.url(a.thumbnail)),$(".browser-playing-song-title").html(a.label),$(".browser-playing-song-meta").html(a.artist[0]);var b=$("li.browser-player .playlist-pos-"+app.audioStreaming.playList.playingPosition);b.hasClass("browser-playing-row")||b.addClass("browser-playing-row"),app.audioStreaming.setTitle("playing",a.label),app.helpers.applyBackstretch(void 0!==a.fanart?a.fanart:"","local")},bodyRandRepeat:function(){var a=app.audioStreaming.playList;if(void 0!==a.repeat){var b=$("body");"undefined"!=typeof app.audioStreaming.playList&&(b.removeClass("bp-repeat-one").removeClass("bp-repeat-all").removeClass("bp-repeat-off"),b.addClass("bp-repeat-"+a.repeat),b.removeClass("bp-random-on").removeClass("bp-random-off"),b.addClass("bp-random-"+a.random),b.removeClass("bp-mute"),a.mute&&b.addClass("bp-mute"))}},setTitle:function(a,b){"local"==app.audioStreaming.getPlayer()&&(document.title=("playing"==a?"▶ ":"")+(void 0!==b?b+" | ":"")+"Chorus.")},progressInit:function(){$(app.audioStreaming.progressEl).slider({range:"min",step:1,value:0,min:0,max:100,stop:function(a,b){var c=b.value/100*app.audioStreaming.localPlay.duration;c=Math.round(c);var d=soundManager.getSoundById(app.audioStreaming.currentPlaybackId);d.setPosition(c)}})},volumeInit:function(){$(app.audioStreaming.volumeEl).slider({range:"min",step:5,value:app.audioStreaming.defaultVol,min:0,max:100,stop:function(a,b){app.audioStreaming.localPlay.setVolume(b.value)}})},isPlaying:function(){return $("body").hasClass("browser-playing")},togglePlay:function(){app.audioStreaming.localPlay!==!1&&(app.audioStreaming.isPlaying()?app.audioStreaming.pause():app.audioStreaming.play())},play:function(){app.audioStreaming.localPlay!==!1&&(app.audioStreaming.localPlay.play(),app.audioStreaming.setPlayer("local"))},stop:function(){app.audioStreaming.localPlay!==!1&&(app.audioStreaming.playerStateStop(),app.audioStreaming.localPlay.stop())},playerStateStop:function(){$("body").removeClass("browser-playing").removeClass("browser-paused"),$(window).trigger("browserPlayerStop",[])},pause:function(){app.audioStreaming.localPlay!==!1&&app.audioStreaming.localPlay.pause()},prev:function(){if(app.audioStreaming.localPlay!==!1){var a=app.audioStreaming.playList;app.audioStreaming.playPosition(0===a.playingPosition?0:a.playingPosition-1)}},next:function(){if(app.audioStreaming.localPlay!==!1){var a=app.audioStreaming.playList;app.audioStreaming.playPosition(a.playingPosition==a.items.models.length-1?0:a.playingPosition+1)}},mute:function(){if(app.audioStreaming.localPlay!==!1){var a=app.audioStreaming.playList.mute,b=$(app.audioStreaming.volumeEl).slider("value");if(a){var c=app.helpers.varGet("localMuteLastVol",app.audioStreaming.defaultVol);app.audioStreaming.localPlay.setVolume(c),$(app.audioStreaming.volumeEl).slider("value",c)}else app.helpers.varSet("localMuteLastVol",b>5?b:app.audioStreaming.defaultVol),app.audioStreaming.localPlay.setVolume(0),$(app.audioStreaming.volumeEl).slider("value",0);app.audioStreaming.playList.mute=!a,app.audioStreaming.bodyRandRepeat()}},repeat:function(){if(app.audioStreaming.localPlay!==!1){var a,b=app.audioStreaming.playList;switch(b.repeat){case"off":a="all";break;case"all":a="one";break;case"one":a="off"}app.audioStreaming.playList.repeat=a,app.audioStreaming.bodyRandRepeat()}},random:function(){if(app.audioStreaming.localPlay!==!1){var a=app.audioStreaming.playList;app.audioStreaming.playList.random="off"==a.random?"on":"off",app.audioStreaming.bodyRandRepeat()}},deleteBrowserPlaylistSong:function(a){var b=app.audioStreaming.playList.items,c=b.models.filter(function(b){return b.attributes.pos!=a});b.models=c,b.length=c.length,app.audioStreaming.setPlaylistItems(b)},sortableChangePlaylistPosition:function(a){var b=[],c=app.audioStreaming.playList.items;$.each(a,function(a,d){b.push(c.models[d])}),c.models=b,c.length=b.length,app.audioStreaming.setPlaylistItems(c),app.audioStreaming.renderPlaylistItems()}},$(window).on("shellReady",function(){app.keymap.init()}),app.keymap={init:function(){$(document).keydown(function(a){app.keymap.execute(a)})},execute:function(a){if(!$(a.target).is("input, textarea")){var b=app.xbmcController;switch(a.which){case 37:b.input("Left");break;case 38:b.input("Up");break;case 39:b.input("Right");break;case 40:b.input("Down");break;case 8:b.input("Back");break;case 13:b.input("Select");break;case 67:b.input("ContextMenu");break;case 107:var c=app.playerState.xbmc.getNowPlaying("volume").volume+5;app.AudioController.setVolume(c>100?100:Math.ceil(c));break;case 109:var d=app.playerState.xbmc.getNowPlaying("volume").volume-5;app.AudioController.setVolume(0>d?0:Math.floor(d));break;case 32:app.AudioController.sendPlayerCommand("Player.PlayPause","toggle");break;case 88:app.xbmcController.command("Player.Stop",[app.playerState.xbmc.getNowPlaying("activePlayer")]);break;case 84:app.VideoController.toggleSubTitle();break;case 190:app.AudioController.sendPlayerCommand("Player.GoTo","next");break;case 188:app.AudioController.sendPlayerCommand("Player.GoTo","previous");break;default:return}a.preventDefault()}}},app.notifications={wsConn:"ws://"+location.hostname+":9090/jsonrpc?chorus",wsActive:!1,plTimeout:{},inputTimeout:!1,init:function(){var a=app.notifications;if("WebSocket"in window){var b=new WebSocket(a.wsConn);b.onopen=function(){a.getNowPlaying(),console.log("Using Websockets"),app.notifications.wsActive=!0},b.onerror=function(a){console.log("socket error",a)},b.onmessage=function(b){a.onMessage(a.parseResponse(b))},b.onclose=function(a){console.log("socket closed",a),app.notifications.wsActive=!1}}},parseResponse:function(a){return jQuery.parseJSON(a.data)},onClose:function(){app.notifications.wsActive=!1},onMessage:function(a){app.counts[503]=0,app.counts["503total"]=0,app.state="connected";var b=app.notifications,c=$(window);switch(a.method){case"Player.OnPlay":b.getNowPlaying(),app.ui.timerStart();break;case"Player.OnStop":b.getNowPlaying(),app.ui.timerStop();break;case"Player.OnPropertyChanged":console.log(a.params.data),app.cached.nowPlaying.player=$.extend(app.playerState.xbmc.getNowPlaying("player"),a.params.data.property),b.updateState();break;case"Player.OnPause":app.cached.nowPlaying.player.pause=0,b.updateState(),app.ui.timerStop();break;case"Player.OnSeek":b.getNowPlaying();break;case"Playlist.OnClear":case"Playlist.OnAdd":case"Playlist.OnRemove":b.updatePlaylist(a.params.data.playlistid);break;case"Application.OnVolumeChanged":app.cached.nowPlaying.volume=a.params.data,b.updateState();break;case"VideoLibrary.OnScanStarted":break;case"VideoLibrary.OnScanFinished":app.notification("Video Library scan complete"),"scan"==app.helpers.arg(0)&&$("#content").html('<div class="loading-box">Video Library Scan Complete</div>');break;case"AudioLibrary.OnScanStarted":break;case"AudioLibrary.OnScanFinished":app.notification("Audio Library scan complete"),"scan"==app.helpers.arg(0)&&$("#content").html('<div class="loading-box">Audio Library Scan Complete</div>');break;case"Input.OnInputRequested":c.trigger("Input.OnInputRequested");var d=60;app.notifications.inputTimeout=setTimeout(function(){var a="<p>About "+d+' seconds ago, an input dialog opened on xbmc and it is still open! To prevent a mainframe implosion, you should probably give me some text. I don\'t really care what it is at this point, why not be creative? Do you have a <a href="http://goo.gl/PGE7wg" target="_blank">word of the day</a>? I won\'t tell...</p>';app.xbmcController.inputRequestedDialog(a)},1e3*d);break;case"Input.OnInputFinished":c.trigger("Input.OnInputFinished"),clearTimeout(app.notifications.inputTimeout),app.helpers.dialogClose();break;case"System.OnQuit":app.notification("XBMC has quit")}},getNowPlaying:function(){app.playerState.xbmc.fetchRemote(function(a){app.shellView.updateState(a)},!0)},updateState:function(){app.shellView.updateState(app.playerState.xbmc.getNowPlaying())},updatePlaylist:function(a){clearTimeout(app.notifications.plTimeout),app.notifications.plTimeout=setTimeout(function(){0===a?app.AudioController.playlistRender():1==a&&app.VideoController.playlistRender()},1e3)}},app.playerState={xbmc:{getNowPlaying:function(a){var b={activePlayer:0,status:"notPlaying",playingItemChanged:!1,volume:{volume:50,muted:!1},player:{repeat:"off",shuffled:!1,partymode:!1},item:{thumbnail:"",fanart:"",id:0,label:"Nothing Playing",songid:0,episodeid:0,album:"",albumid:"file",file:"",duration:0,type:"song"}},c=app.cached.nowPlaying;return void 0!==c&&(b=$.extend(b,c)),void 0!==a?b[a]:b},fetch:function(){var a=$("body"),b="notconnected";app.state==b?a.addClass(b):a.removeClass(b),app.playerState.xbmc.fetchRemote(function(a){app.shellView.updateState(a)},!app.notifications.wsActive)},fetchRemote:function(a,b){void 0===b&&(b=!1);var c=4;if(app.counts["503total"]>30&&(c=6,app.notification("No connection to XBMC for 10mins! I'll check if it's there less often now ")),app.counts["503total"]>70&&(c=12,app.notification("No connection to XBMC for 30mins! I'm pretty sure it has gone walkabout")),app.counts[503]>c&&(app.counts[503]=0,app.counts["503total"]++),0!==app.counts[503])return app.counts[503]++,app.state="notconnected",void(3==app.counts[503]&&app.notification("Lost connection to XBMC"));app.counts[503]=1;var d={item:app.fields.get("playlistItem"),player:["playlistid","speed","position","totaltime","time","percentage","shuffled","repeat","canrepeat","canshuffle","canseek","partymode"]},e={status:"notPlaying"},f=[];f=[{method:"Player.GetActivePlayers",params:[]}],b&&f.push({method:"Application.GetProperties",params:[["volume","muted"]]}),app.xbmcController.multipleCommand(f,function(c){var g=c[0];if(app.counts[503]=0,app.counts["503total"]=0,app.state="connected",app.AudioController.activePlayers=g.result,b){var h=c[1];e.volume=h.result}g.result.length>0||b?(e.activePlayer=void 0!==g.result[0]?g.result[0].playerid:0,app.state="playing",f=[{method:"Player.GetProperties",params:[e.activePlayer,d.player]}],b&&f.push({method:"Player.GetItem",params:[e.activePlayer,d.item]}),app.xbmcController.multipleCommand(f,function(c){e.status="playing",e.player=c[0].result,g.result.length>0&&b&&(e.item=c[1].result.item,e.item.list="xbmc"),app.cached.nowPlaying=$.extend(app.cached.nowPlaying,e),a&&a(app.playerState.xbmc.getNowPlaying())})):(app.cached.nowPlaying=$.extend(app.cached.nowPlaying,e),a(app.playerState.xbmc.getNowPlaying()))})}},local:{},common:{}},app.playlists={storageKeyLists:"playlist:lists",storageKeyThumbsUp:"playlist:thumbsUp"},$(window).on("shellReady",function(){app.playlists.getThumbsUp(),$(".playlist-actions-wrapper",this.$el).html(app.helpers.makeDropdown(app.helpers.menuTemplates("playlistShell")))}),app.playlists.playlistGetItems=function(a,b,c){var d=[],e={};switch(a){case"xbmc":e=new app.PlaylistCollection,e.fetch({success:function(a){a=app.playlists.addFileFieldToSongCollection(a),c(a)}});break;case"song":e=new app.CustomSongCollection,e.fetch({items:[b],success:function(a){a=app.playlists.addFileFieldToSongCollection(a),c(a)}});break;case"album":e=new app.SongFilteredXbmcCollection({filter:{albumid:b}}),e.fetch({success:function(a){res=app.playlists.addFileFieldToSongCollection(a),c(res)}});break;case"artist":e=new app.SongFilteredXbmcCollection({filter:{artistid:b}}),e.fetch({success:function(a){res=app.playlists.addFileFieldToSongCollection(a),c(res)}});break;case"movie":e=new app.CustomMovieCollection,e.fetch({items:b,success:function(a){c(a)}});break;case"tvshow":e=new app.TvepisodeCollection,e.fetch({tvshowid:b,success:function(a){c(a)}});break;case"season":e=new app.TvepisodeCollection;var f=b.split(":");e.fetch({tvshowid:f[0],season:f[1],success:function(a){c(a)}});break;case"list":e=new app.PlaylistCustomListSongCollection,e.fetch({name:b,success:function(a){a=app.playlists.addFileFieldToSongCollection(a),c(a)}});break;case"thumbsup":e=new app.ThumbsUpCollection,e.fetch({name:b,success:function(a){a=app.playlists.addFileFieldToSongCollection(a),c(a)}});break;case"items":e=new app.CustomSongCollection,e.fetch({items:b,success:function(a){a=app.playlists.addFileFieldToSongCollection(a),c(a)}})}return c?void c(d):d},app.playlists.playlistAddItems=function(a,b,c,d,e){app.playlists.playlistGetItems(c,d,function(c){if(0!==c.length){var d=[];switch($.each(c.models,function(a,b){b.attributes.songid&&d.push("file"==b.attributes.songid?b.attributes.file:b.attributes.songid)
}),e="undefined"!=typeof e?e:function(){},a){case"xbmc":"append"==b?app.AudioController.playlistAddMultiple("mixed",d,function(){app.AudioController.playlistRender(),app.playlists.changePlaylistView("xbmc"),e()}):app.AudioController.playlistClear(function(){app.AudioController.playlistAddMultiple("mixed",d,function(){app.AudioController.playlistRender(),app.playlists.changePlaylistView("xbmc"),app.AudioController.playPlaylistPosition(i,function(){app.AudioController.playlistRender(),e()})})});break;case"local":"append"==b?app.audioStreaming.appendPlaylistItems(c,e):app.audioStreaming.replacePlaylistItems(c,e);break;case"lists":app.playlists.saveCustomPlayListsDialog("local",d)}}})},app.playlists.addFileFieldToSongCollection=function(a){return $.each(a.models,function(b,c){var d=app.store.getSongBy("id",c.attributes.songid);null!==d&&(c.attributes.file=d.file,a.models[b]=c)}),a},app.playlists.sortableChangePlaylistPosition=function(a,b){var c=$(b.item[0]).find("div.playlist-item"),d={},e=c.closest("ul.playlist"),f=1==c.data("playlistId")?"video":"audio",g=c.data("type");if(e.find("div.playlist-item").each(function(a,b){$d=$(b),$d.data("path")===c.data("path")&&(d={from:c.data("id"),to:a})}),void 0!==d.from&&d.from!==d.to){var h="audio"==f?app.AudioController:app.VideoController;h.playlistSwap(d.from,d.to,function(){h.playlistRender(),c.removeClass(".playing-row")},g)}},app.playlists.changeCustomPlaylistPosition=function(a,b){var c=$(b.item[0]).find("div.playlist-item"),d={},e=c.closest("ul.playlist");e.find("div.playlist-item").each(function(a,b){$d=$(b),$d.data("path")===c.data("path")&&(d={from:c.data("path"),to:a})}),void 0!==d.from&&d.from!==d.to&&app.AudioController.playlistSwap(d.from,d.to,function(){app.AudioController.playlistRender()})},app.playlists.changePlaylistView=function(a){var b=$("#sidebar-second"),c=$(".playlist-primary-tab[data-pane='"+a+"']");$(".playlist-primary-tab").removeClass("active"),c.addClass("active"),$(".sidebar-pane",b).hide(),$("#playlist-"+a,b).show(),("local"==a||"xbmc"==a)&&app.audioStreaming.setPlayer(a)},app.playlists.saveCustomPlayListsDialog=function(a,b,c,d){a="undefined"==typeof a?"xbmc":a,b="undefined"==typeof b?[]:b,d="undefined"==typeof d?!0:d;var e=app.playlists.getCustomPlaylist(),f="";for(var g in e)f+='<li data-id="'+e[g].id+'">'+e[g].name+"</li>";"undefined"!=typeof c&&c===!0&&(f="");var h='<p>Create a new playlist<br /><input class="form-text" type="text" id="newlistname" /> <button class="btn bind-enter" id="savenewlist">Save</button></p>'+(""!==f?'<p>Or add to an existing list</p><ul id="existinglists">'+f+"</ul>":"");app.helpers.dialog(h,{title:"Add to a playlist"}),$("#savenewlist").on("click",function(){var c=$("#newlistname").val(),e=app.playlists.saveCustomPlayLists("new",c,a,b);app.helpers.dialogClose(),d&&(document.location="#playlist/"+e.id),app.notification("Playlist updated")}),$("#existinglists li").on("click",function(){var c=$(this).data("id"),e=app.playlists.saveCustomPlayLists("existing",c,a,b);app.helpers.dialogClose(),d&&(document.location="#playlist/"+e.id),app.notification("Playlist updated")})},app.playlists.saveCustomPlayLists=function(a,b,c,d){var e=[],f=app.playlists.getCustomPlaylist(),g=0,h={},i=0;switch("xbmc"==c?_.each(app.cached.xbmcPlaylist,function(a){"file"==a.id?(a=app.addOns.invokeAll("parseFileRecord",a),e.push(a)):e.push(a.id)}):e=d,a){case"new":for(i in f){var j=f[i];g<j.id&&(g=j.id)}var k=g+1;h={items:e,name:b,id:k},f.push(h);break;case"existing":for(i in f)if(b==f[i].id){for(var l in e)f[i].items.push(e[l]);h=f[i]}}return app.storageController.setStorage(app.playlists.storageKeyLists,f),app.playlists.updateCustomPlayLists(),h},app.playlists.addCustomPlayLists=function(a){app.cached.playlistCustomListsView=new app.PlaylistCustomListCollection,app.cached.playlistCustomListsView.fetch({success:function(b){app.cached.playlistCustomListsView=new app.PlaylistCustomListsView({model:b}),a(app.cached.playlistCustomListsView)}})},app.playlists.getCustomPlaylist=function(a){var b=app.storageController.getStorage(app.playlists.storageKeyLists),c=null!==b?b:[],d=[],e=0;for(e in c){var f=c[e];"undefined"!=typeof f&&null!==f&&d.push(f)}if("undefined"!=typeof a)for(e in d)if(a==d[e].id)return d[e];return d},app.playlists.deleteCustomPlaylist=function(a){var b=app.playlists.getCustomPlaylist(),c=[];for(var d in b)item=b[d],item.id!=a&&(c[d]=item);app.storageController.setStorage(app.playlists.storageKeyLists,c),app.playlists.updateCustomPlayLists()},app.playlists.deleteCustomPlaylistSong=function(a,b){var c=app.playlists.getCustomPlaylist(a),d=[];for(var e in c.items)b!=e&&d.push(c.items[e]);app.playlists.replaceCustomPlayList(a,d)},app.playlists.updateCustomPlayLists=function(){app.playlists.addCustomPlayLists(function(a){$("#sidebar-after").html(a.render().el)})},app.playlists.replaceCustomPlayList=function(a,b){var c={};if("thumbsup"==a)c=app.storageController.getStorage(app.playlists.storageKeyThumbsUp),c.song={items:b},app.storageController.setStorage(app.playlists.storageKeyThumbsUp,c);else{if(a=parseInt(a),c=app.playlists.getCustomPlaylist(),b.length>0)for(var d in c)c[d].id==a&&(c[d].items=b);app.storageController.setStorage(app.playlists.storageKeyLists,c)}},app.playlists.getDropdown=function(){var a=[],b=app.helpers.arg(0),c={append:"Add to playlist",replace:"Replace playlist","browser-replace":"Play in browser","export":"Export Playlist"};"thumbsup"!=b&&(c.delete="Delete");for(var d in c)a.push({url:"#","class":b+"-"+d,title:c[d]});return app.helpers.makeDropdown({key:b,items:a,pull:"right"})},app.playlists.setThumbsUp=function(a,b,c){var d=app.playlists.getThumbsUp(),e=d[b],f=[],g=!1,h={items:[]},i=0;switch(("undefined"==typeof e||"undefined"==typeof e.items)&&(e=h),a){case"add":for(i in e.items)e.items[i]==c&&(g=!0);g||e.items.push(c);break;case"remove":for(i in e.items){var j=e.items[i];null!==j&&app.playlists.getThumbsUpId(j)!=c&&f.push(j)}e.items=f}d[b]=e,app.storageController.setStorage(app.playlists.storageKeyThumbsUp,d),app.playlists.getThumbsUp()},app.playlists.getThumbsUpId=function(a){return"object"==typeof a?a.id:a},app.playlists.getThumbsUp=function(a){var b=app.storageController.getStorage(app.playlists.storageKeyThumbsUp),c=null!==b?b:{},d=0,e=0;app.cached.thumbsUp={};for(d in c){app.cached.thumbsUp[d]={items:c[d].items,lookup:{}};var f=[];for(e in c[d].items){var g=c[d].items[e];null!==g&&(f.push(g),app.cached.thumbsUp[d].lookup[app.playlists.getThumbsUpId(g)]=!0)}c[d].items=f}return"undefined"!=typeof a?c[a]:c},app.playlists.isThumbsUp=function(a,b){return"undefined"!=typeof app.cached.thumbsUp&&"undefined"!=typeof app.cached.thumbsUp[a]&&"undefined"!=typeof app.cached.thumbsUp[a].lookup[b]},app.playlists.isAnyThumbsUp=function(){var a=app.storageController.getStorage(app.playlists.storageKeyThumbsUp);return null!==a},app.playlists.getXbmcPlaylist=function(a,b){app.xbmcController.command("Playlist.GetItems",[a,app.fields.get("playlistItem")],function(c){var d=c.result;d.playlistId=a,void 0!==d.items&&$.each(d.items,function(b){d.items[b].playlistId=a}),b(d)})},app.playlists.playlistClear=function(a,b){app.xbmcController.command("Playlist.Clear",[a],function(a){b&&b(a)})},app.playlists.playlistPlayPosition=function(a,b,c){app.playlists.playerOpen(a,"position",b,c)},app.playlists.playerOpen=function(a,b,c,d){var e={},f=[];"position"==b&&(e.playlistid=a),e[b]=c,f.push(e),app.VideoController.playlistId==a&&f.push({resume:!0}),app.xbmcController.command("Player.Open",f,function(a){d&&d(a.result)})},app.playlists.renderXbmcPlaylist=function(a,b){app.playlists.getXbmcPlaylist(a,function(c){app.cached.xbmcPlaylist=c.items;var d=$("#playlist-xbmc");app.playlistView=new app.PlaylistView({model:{playlistId:a,models:c.items}}),d.html(app.playlistView.render().el),app.notifications.wsActive||app.playerState.xbmc.fetchRemote(function(a){app.shellView.updateState(a)}),app.helpers.exists(b)&&b(c)})},app.playlists.setPartyMode=function(a,b){var c=app.playerState.xbmc.getNowPlaying("player");if(c.partymode===!1){var d=0===a?"music":"video";app.playlists.playerOpen(a,"partymode",d,function(a){app.notification("Partymode on"),b&&b(a.result)})}else app.xbmcController.command("Player.setPartyMode",[a,!1],function(a){app.notification("Partymode off"),b&&b(a.result)})},app.playlists.playlistSwap=function(a,b,c,d,e){app.playlists.getXbmcPlaylist(a,function(f){var g=f.items[c],h={},i=1==a?app.VideoController:app.AudioController;void 0!==g.id&&"number"==typeof g.id?h[b]=g.id:h.file=g.file,i.removePlaylistPosition(c,function(){app.xbmcController.command("Playlist.Insert",[a,d,h],function(){i.getPlaylistItems(function(a){i.currentPlaylist=a,e(a)})})})})},app.playlists.insertAndPlay=function(a,b,c,d){var e=app.playerState.xbmc.getNowPlaying("player"),f="undefined"!=typeof e.position?e.position:0,g=f+1,h={};h[b]=c,"notPlaying"==app.playerState.xbmc.getNowPlaying("status")||"stopped"==app.playerState.xbmc.getNowPlaying("status")?app.playlists.playlistClear(a,function(){app.xbmcController.command("Playlist.Insert",[a,g,h],function(b){app.playlists.playlistPlayPosition(a,g,function(){d&&d(b)})})}):app.xbmcController.command("Playlist.Insert",[a,g,h],function(b){app.playlists.playlistPlayPosition(a,g,function(){d&&d(b)})})},app.playlists.playStream=function(){},_.defer(function(){app.pvr.setIsEnabled(function(a){a&&app.pvr.addPaths()})}),app.pvr={types:["tv","radio"],limits:{start:0,end:5e3},enabled:!1,playChannel:function(a,b){var c=[{channelid:a}];app.xbmcController.command("Player.Open",c,function(a){b(a)})},setIsEnabled:function(a){var b=["xbmc.pvrclient","unknown",!0];app.xbmcController.command("Addons.GetAddons",b,function(b){app.pvr.enabled=void 0!==b.result.addons,a(app.pvr.enabled)})},getAllChannels:function(){app.pvr.getChannelGroups(type,function(a){$.each(a,function(b,c){app.pvr.getChannels(c.id,function(c){a[b].channels=c})})})},getTypeFromPath:function(){var a={type:"alltv",filters:"tvshow",niceName:"LiveTV"};return"radio"==app.helpers.arg(1)&&(a={type:"allradio",filters:"music",niceName:"Radio"}),a},getChannels:function(a,b){app.xbmcController.command("PVR.GetChannels",[a,app.fields.get("channel")],function(a){b(a.result.channels)})},getChannelGroups:function(a,b){app.xbmcController.command("PVR.GetChannelGroups",[a],function(a){b(a.result.channelgroups)})},addPaths:function(){app.filters.addFilterPath("tvshow",{title:"Live TV",path:"tv/live",key:"live",argOne:"live"}),app.filters.addFilterPath("music",{title:"Digital Radio",path:"music/radio",key:"radio",argOne:"radio"})}},app.setDetail={songParams:["songid","title","artist","albumartist","genre","year","rating","album","track","disc","duration","comment"],artistParams:["artistid","artist","instrument","style","mood","born","formed","description","genre","died","disbanded","yearsactive"],albumParams:["albumid","title","artist","description","genre","theme","mood","style","type","albumlabel","rating","year"],episodeParams:["episodeid","title","playcount","runtime","director","plot","rating","votes","lastplayed","writer","firstaired","productioncode","season","episode"],save:function(){}},app.storageController={nameSpace:"chorusStorage:"},app.storageController.getStorage=function(a,b){var c=$.totalStorage(app.storageController.nameSpace+a);return b?void b(c):c},app.storageController.setStorage=function(a,b,c){$.totalStorage(app.storageController.nameSpace+a,b);return c?void c(b):b},app.VideoController={playlistId:1,currentPlaylist:[],subtitle:"on"},app.VideoController.playVideoId=function(a,b,c,d){app.VideoController.playlistClear(function(){app.VideoController.addToPlaylist(a,b,"add",function(){app.VideoController.playPlaylistPosition(0,function(){app.VideoController.resumeVideo(c,d)})})})},app.VideoController.addToPlaylist=function(a,b,c,d){var e={};e[b]=a,"add"==c&&app.xbmcController.command("Playlist.Add",[app.VideoController.playlistId,e],function(a){d(a.result)})},app.VideoController.playlistAdd=function(a,b,c){app.VideoController.addToPlaylist(b,a,"add",c)},app.VideoController.playPlaylistPosition=function(a,b){app.playlists.playlistPlayPosition(app.VideoController.playlistId,a,b)},app.VideoController.insertAndPlay=function(a,b,c){app.playlists.insertAndPlay(app.VideoController.playlistId,a,b,c)},app.VideoController.playerOpen=function(a,b,c){app.playlists.playerOpen(app.VideoController.playlistId,a,id,c)},app.VideoController.playlistClear=function(a){app.playlists.playlistClear(app.VideoController.playlistId,a)},app.VideoController.getPlaylistItems=function(a){app.playlists.getXbmcPlaylist(app.VideoController.playlistId,a)},app.VideoController.playlistRender=function(a){app.playlists.renderXbmcPlaylist(app.VideoController.playlistId,a)},app.VideoController.removePlaylistPosition=function(a,b){app.xbmcController.command("Playlist.Remove",[app.VideoController.playlistId,a],function(a){b(a.result)})},app.VideoController.playlistSwap=function(a,b,c,d){var e="movie"==d?"movieid":"episodeid";app.playlists.playlistSwap(app.VideoController.playlistId,e,a,b,c)},app.VideoController.movieLoadMultiple=function(a,b){app.xbmcController.entityLoadMultiple("movie",a,b)},app.VideoController.playlistAddMultiple=function(a,b,c){var d,e=[];for(var f in b)param={},d=b[f],"mixed"==a&&(a="number"==typeof d?a:"file"),param[a]=d,e.push({method:"Playlist.Add",params:[app.VideoController.playlistId,param]});app.xbmcController.multipleCommand(e,function(){app.VideoController.getPlaylistItems(function(a){app.VideoController.currentPlaylist=a,c(a)})})},app.VideoController.setPartyMode=function(a){app.playlists.setPartyMode(app.VideoController.playlistId,a)},app.VideoController.tvshowAdd=function(a,b){var c={};if("episode"==a.type)return void app.VideoController.addToPlaylist(a.episodeid,"episodeid","add",b);var d=new app.TvepisodeCollection,e=[];c.tvshowid=parseInt(a.tvshowid),"season"==a.type&&(c.season=a.season),c.success=function(a){for(var c in a.models)e.push(a.models[c].attributes.episodeid);app.VideoController.playlistAddMultiple("episodeid",e,b)},d.fetch(c)},app.VideoController.tvshowPlay=function(a,b){app.VideoController.playlistClear(function(){app.VideoController.tvshowAdd(a,function(){app.playlists.changePlaylistView("xbmc"),app.VideoController.playPlaylistPosition(0,function(){app.VideoController.resumeVideo(a,b)})})})},app.VideoController.resumeVideo=function(a,b){void 0!==a.resume&&a.resume.position>0?app.VideoController.seek(Math.round(a.resume.position/a.resume.total*100),b):b&&b()},app.VideoController.seek=function(a,b){app.xbmcController.command("Player.Seek",[app.VideoController.playlistId,a],function(a){app.helpers.exists(b)&&b(a.result)})},app.VideoController.toggleSubTitle=function(){var a="on"==app.VideoController.subtitle?"off":"on";app.xbmcController.command("Player.SetSubtitle",[app.VideoController.playlistId,a],function(){app.VideoController.subtitle=a})},app.VideoController.watchedStatus=function(a){var b={status:"no",progress:0};switch(a.type){case"movie":case"episode":0!==a.resume.position?(b.status="progress",b.progress=Math.round(a.resume.position/a.resume.total*100)):a.playcount>0&&(b.status="yes");break;case"season":case"tvshow":a.watchedepisodes>0&&(a.watchedepisodes==a.episode?b.status="yes":(b.status="progress",b.progress=Math.round(a.watchedepisodes/a.episode*100)))}return b},app.VideoController.stream=function(a,b){var c="videoPlayer.html?player="+a,d=!1;void 0!==b.downloadUrl&&""!==b.downloadUrl&&(c=c+"&src="+encodeURIComponent(b.downloadUrl),d=!0);var e=window.open(c,"_blank","toolbar=no, scrollbars=no, resizable=yes, width=925, height=545, top=100, left=100");d||app.AudioController.downloadFile(b.file,function(a){e.location=c+"&src="+encodeURIComponent(a)})},app.VideoController.setWatched=function(a,b,c,d){var e=c[b+"id"],f=void 0===c.title?c.label:c.title,g="episode"==b?"SetEpisodeDetails":"SetMovieDetails",h=a===!0?1:0;app.xbmcController.command("VideoLibrary."+g,[e,f,h],function(){app.VideoController.invalidateCache(b,c),app.helpers.exists(d)&&d(a)})},app.VideoController.toggleWatched=function(a,b,c){var d=!1;0===parseInt(b.playcount)&&(d=!0),app.VideoController.setWatched(d,a,b,c)},app.VideoController.invalidateCache=function(a,b){if("movie"==a)delete app.stores.movies;else if("episode"==a){var c;c="episodes:"+b.tvshowid+":"+b.season,void 0!==app.stores.TvEpisodes&&void 0!==app.stores.TvEpisodes[c]&&delete app.stores.TvEpisodes[c],c="seasons:"+b.tvshowid,void 0!==app.stores.TvSeasons&&void 0!==app.stores.TvSeasons[c]&&delete app.stores.TvSeasons[c]}},$.jsonRPC.setup({endPoint:app.jsonRpcUrl}),app.xbmcController={},app.xbmcController.command=function(a,b,c,d){var e={success:function(a){c&&c(a)},error:function(c){app.helpers.errorHandler("xbmc command call: "+a,[c,b]),d&&d([c,b])}};void 0!==b&&b.length>0&&(e.params=b),$.jsonRPC.request(a,e)},app.xbmcController.input=function(a,b,c){app.xbmcController.command("Input."+a,[],b,c)},app.xbmcController.multipleCommand=function(a,b){$.jsonRPC.batchRequest(a,{success:function(a){for(var c in a)"undefined"!=typeof a[c].error;b&&b(a)},error:function(){}})},app.xbmcController.entityLoadMultiple=function(a,b,c){var d={song:{method:"AudioLibrary.GetSongDetails",id:"songid",returnKey:"songdetails",fields:app.fields.get("song")},movie:{method:"VideoLibrary.GetMovieDetails",id:"movieid",returnKey:"moviedetails",fields:app.fields.get("movie")},tvshow:{method:"VideoLibrary.GetTVShowDetails",id:"tvshowid",returnKey:"tvshowdetails",fields:app.fields.get("tvshow")}};if(void 0===d[a]||void 0===b)return[];var e=[],f=d[a],g={};for(var h in b){var i=b[h];"number"==typeof i?e.push({method:f.method,params:[i,f.fields]}):(g={position:h,albumid:"file",artistid:"file",album:"",artist:"",duration:0},item=$.extend(g,i),item.id=i.file,item[f.id]="file",b[h]=item)}return e.length>0?app.xbmcController.multipleCommand(e,function(a){var d={},e=[];_.each(a,function(a){if("undefined"!=typeof a.result){var b=a.result[f.returnKey];d[b[f.id]]=b}});for(var g in b){var h=b[g];"number"==typeof h&&"undefined"!=typeof d[h]&&(b[g]=d[h])}var i=0;for(var j in b){var k=b[j];"object"==typeof k&&(k.position=i,e.push(k),i++)}c(e)}):c(b),b},app.xbmcController.inputRequestedDialog=function(a){0===$(".ui-widget-overlay").length&&app.helpers.prompt(a,function(a){app.xbmcController.command("Input.SendText",[a],function(){app.notification(a+" sent")})})},app.SongXbmcCollection=Backbone.Collection.extend({url:app.jsonRpcUrl,rpc:new Backbone.Rpc({errorHandler:function(a){app.helpers.errorHandler("xbmc song call",a)},namespaceDelimiter:""}),model:app.Song,arg1:["file"],arg2:{start:0,end:5e4},arg3:{sort:{method:"dateadded",order:"descending"}},methods:{read:["AudioLibrary.GetSongs","arg1","arg2","arg3"]},parse:function(a){return $.each(a.songs,function(b,c){a.songs[b].id=c.songid}),a.songs}}),app.SongFilteredXbmcCollection=Backbone.Collection.extend({url:app.jsonRpcUrl,rpc:new Backbone.Rpc({errorHandler:function(a){app.helpers.errorHandler("xbmc song filtered call",a)},namespaceDelimiter:""}),model:app.Song,arg1:app.fields.get("song"),arg2:{start:0,end:500},arg3:{sort:{method:"dateadded",order:"descending"}},arg4:function(){return this.models[0].attributes.filter},methods:{read:["AudioLibrary.GetSongs","arg1","arg2","arg3","arg4"]},parse:function(a){return a.songs}}),app.AlbumXbmcCollection=Backbone.Collection.extend({url:app.jsonRpcUrl,rpc:new Backbone.Rpc({errorHandler:function(a){app.helpers.errorHandler("xbmc album call",a)},namespaceDelimiter:""}),model:app.Album,arg1:app.fields.get("album"),arg2:{start:0,end:15e3},arg3:{sort:{method:"dateadded",order:"descending"}},methods:{read:["AudioLibrary.GetAlbums","arg1","arg2","arg3"]},parse:function(a){return a.albums}}),app.AlbumFilteredXbmcCollection=Backbone.Collection.extend({url:app.jsonRpcUrl,rpc:new Backbone.Rpc({errorHandler:function(a){app.helpers.errorHandler("xbmc album call",a)},namespaceDelimiter:""}),model:app.Album,arg1:app.fields.get("album"),arg2:{start:0,end:15e3},arg3:{sort:{method:"album",order:"ascending"}},arg4:function(){return this.models[0].attributes.filter},methods:{read:["AudioLibrary.GetAlbums","arg1","arg2","arg3","arg4"]},parse:function(a){return a.albums}}),app.AlbumRecentlyAddedXbmcCollection=Backbone.Collection.extend({url:app.jsonRpcUrl,rpc:new Backbone.Rpc({errorHandler:function(a){app.helpers.errorHandler("xbmc album call",a)},namespaceDelimiter:""}),model:app.Album,arg1:app.fields.get("album"),arg2:{start:0,end:200},methods:{read:["AudioLibrary.GetRecentlyAddedAlbums","arg1","arg2"]},parse:function(a){return void 0===a.albums?[]:($.each(a.albums,function(b){a.albums[b].recent="added"}),a.albums)}}),app.AlbumRecentlyPlayedXbmcCollection=Backbone.Collection.extend({url:app.jsonRpcUrl,rpc:new Backbone.Rpc({errorHandler:function(a){app.helpers.errorHandler("xbmc album call",a)},namespaceDelimiter:""}),model:app.Album,arg1:app.fields.get("album"),arg2:{start:0,end:200},methods:{read:["AudioLibrary.GetRecentlyPlayedAlbums","arg1","arg2"]},parse:function(a){return void 0===a.albums?[]:($.each(a.albums,function(b){a.albums[b].recent="played"}),app.helpers.buildUrls(a.albums,"album","albumid"))}}),app.ArtistXbmcCollection=Backbone.Collection.extend({url:app.jsonRpcUrl,rpc:new Backbone.Rpc({errorHandler:function(a){app.helpers.errorHandler("xbmc artist call",a)},namespaceDelimiter:""}),model:app.Artist,arg1:!0,arg2:app.fields.get("artist"),arg3:{start:0,end:1e4},arg4:{sort:{method:"artist"}},methods:{read:["AudioLibrary.GetArtists","arg1","arg2","arg3","arg4"]},parse:function(a){return void 0===a.artists?[]:app.helpers.buildUrls(a.artists,"artist","artistid")}}),app.MovieXbmcCollection=Backbone.Collection.extend({url:app.jsonRpcUrl,rpc:new Backbone.Rpc({errorHandler:function(a){app.helpers.errorHandler("xbmc movie call",a)},namespaceDelimiter:""}),model:app.Movie,arg1:["year","thumbnail","resume","playcount"],arg2:function(){return this.models[0].attributes.range},arg3:function(){return this.models[0].attributes.sort},methods:{read:["VideoLibrary.GetMovies","arg1","arg2","arg3"]},parse:function(a){return void 0===a.movies?[]:app.helpers.buildUrls(a.movies,"movie","movieid")}}),app.AllMovieXbmcCollection=Backbone.Collection.extend({url:app.jsonRpcUrl,rpc:new Backbone.Rpc({errorHandler:function(a){app.helpers.errorHandler("xbmc movie call",a)},namespaceDelimiter:""}),model:app.Movie,methods:{read:["VideoLibrary.GetMovies"]},parse:function(a){return void 0===a.movies?[]:app.helpers.buildUrls(a.movies,"movie","movieid")}}),app.AllTvshowXbmcCollection=Backbone.Collection.extend({url:app.jsonRpcUrl,rpc:new Backbone.Rpc({errorHandler:function(a){app.helpers.errorHandler("xbmc tv call",a)},namespaceDelimiter:""}),model:app.TVShow,arg1:app.fields.get("tvshow"),arg2:{start:0,end:1e4},arg3:function(){return this.models[0].attributes.sort},methods:{read:["VideoLibrary.GetTVShows","arg1","arg2","arg3"]},parse:function(a){return app.helpers.buildUrls(a.tvshows,"tvshow","tvshowid")}}),app.TvSeasonXbmcCollection=Backbone.Collection.extend({url:app.jsonRpcUrl,rpc:new Backbone.Rpc({errorHandler:function(a){app.helpers.errorHandler("xbmc movie call",a)},namespaceDelimiter:""}),model:app.TVShow,arg1:["year","thumbnail","season"],arg2:function(){return this.models[0].attributes.season},methods:{read:["VideoLibrary.GetSeasons","arg1","arg2"]},parse:function(a){return app.helpers.buildUrls(a.seasons,"tvshow","tvshowid")}}),app.MovieCollection=Backbone.Collection.extend({model:app.Movie,cached:[],fullyLoaded:!1,lastOrder:"",lastSort:"",sync:function(a,b,c){if("read"===a){var d=this,e="undefined"!=typeof c.fullRange&&c.fullRange===!0;app.cached.moviesPage=new app.MovieAllCollection,app.cached.moviesPage.fetch({success:function(){var a=d.cachedPagination(app.moviePageNum,e);if(a!==!1)return void c.success(a);var b={range:app.helpers.createPaginationRange(app.moviePageNum,e),sort:app.helpers.getSort()};"undefined"==typeof app.stores.movies&&(app.stores.movies={}),app.stores.movies[app.moviePageNum]=[],app.cached.movieXbmcCollection=new app.MovieXbmcCollection(b),app.cached.movieXbmcCollection.fetch({success:function(a){return e&&0!==app.moviePageNum||$.each(a.models,function(a,b){app.stores.movies[app.moviePageNum].push(b)}),a.models.length>app.itemsPerPage&&(d.fullyLoaded=!0),c.success(a.models),a.models}})}})}},cachedPagination:function(a,b){var c=app.helpers.getSort();if((this.lastSort!=c.method||this.lastOrder!=c.order)&&delete app.stores.movies,this.lastSort=c.method,this.lastOrder=c.order,void 0===app.stores.movies||void 0===app.stores.movies[a]||0===app.stores.movies[a].length)return!1;var d=app.stores.movies[a],e=[];if(b){for(i=0;a>=i;i++){if(void 0===app.stores.movies[i])return!1;for(var f in app.stores.movies[i])e.push(app.stores.movies[i][f])}d=e}return d}}),app.MovieRecentCollection=Backbone.Collection.extend({model:app.Movie,cached:[],fullyLoaded:!1,sync:function(a,b,c){var d=[app.fields.get("movie"),{end:100,start:0}];app.xbmcController.command("VideoLibrary.GetRecentlyAddedMovies",d,function(a){c.success(a.result.movies)})}}),app.MovieFilteredCollection=Backbone.Collection.extend({model:app.Movie,sync:function(a,b,c){void 0===app.stores.moviesFiltered&&(app.stores.moviesFiltered={});var d={sort:{method:"title"}},e=[app.fields.get("movie"),{end:500,start:0},d,c.filter],f="movies:key:filter";for(var g in c.filter)f="movies:"+g+":"+c.filter[g];void 0!==app.stores.moviesFiltered[f]?c.success(app.stores.moviesFiltered[f]):app.xbmcController.command("VideoLibrary.GetMovies",e,function(a){app.stores.moviesFiltered[f]=a.result.movies,c.success(a.result.movies)})}}),app.MovieAllCollection=Backbone.Collection.extend({model:app.Movie,sync:function(a,b,c){if("undefined"==typeof app.stores.allMovies){var d=new app.AllMovieXbmcCollection;d.fetch({success:function(a){a.models.sort(function(a,b){return app.helpers.aphabeticalSort(a.attributes.label,b.attributes.label)}),app.stores.allMoviesLookup={};for(var b in a.models){var d=a.models[b].attributes;d.loaded=!1,app.stores.allMoviesLookup[d.movieid]=d,a.models[b].attributes=d}app.stores.allMovies=a.models,c.success(a.models),$(window).trigger("allMoviesCached")}})}else c.success(app.stores.allMovies)}}),app.CustomMovieCollection=Backbone.Collection.extend({model:app.Movie,sync:function(a,b,c){app.xbmcController.entityLoadMultiple("movie",c.items,function(a){c.success(a)})}}),app.VideoGenreCollection=Backbone.Collection.extend({model:app.Tag,sync:function(a,b,c){var d=[c.type,["title","thumbnail"],{start:0,end:5e5},{method:"label",order:"ascending"}],e=[];app.xbmcController.command("VideoLibrary.GetGenres",d,function(a){$.each(a.result.genres,function(a,b){b.label=""===b.label?"- none -":b.label,b.id=b.genreid,b.type="movieGenre",b.url="#"+("tvshow"==c.type?"tv":c.type+"s")+"/genreid/"+b.id,e.push(b)}),c.success(e)})}}),app.VideoYearCollection=Backbone.Collection.extend({model:app.Tag,sync:function(a,b,c){var d,e=new Date,f=[];for(i=e.getFullYear();i>=1900;i--)d={id:i,type:"year",url:"#"+c.type+"s/year/"+i,label:i},f.push(d);c.success(f)}}),app.TvshowAllCollection=Backbone.Collection.extend({model:app.TVShow,lastOrder:"",lastSort:"",sync:function(a,b,c){var d=app.helpers.getSort();if((this.lastSort!=d.method||this.lastOrder!=d.order)&&delete app.stores.allTvshows,this.lastSort=d.method,this.lastOrder=d.order,"undefined"==typeof app.stores.allTvshows){var e=new app.AllTvshowXbmcCollection({sort:d});e.fetch({success:function(a){app.stores.allTvshowsLookup={};for(var b in a.models){var d=a.models[b].attributes;d.loaded=!1,app.stores.allTvshowsLookup[d.tvshowid]=d,a.models[b].attributes=d}app.stores.allTvshows=a.models,c.success(a.models),$(window).trigger("allTvshowsCached")}})}else c.success(app.stores.allTvshows)}}),app.TvseasonCollection=Backbone.Collection.extend({model:app.TVShow,sync:function(a,b,c){void 0===app.stores.TvSeasons&&(app.stores.TvSeasons={});var d=[c.tvshowid,["season","playcount","watchedepisodes","episode","thumbnail","tvshowid"]],e="seasons:"+c.tvshowid;void 0!==app.stores.TvSeasons[e]?c.success(app.stores.TvSeasons[e]):app.xbmcController.command("VideoLibrary.GetSeasons",d,function(a){for(var b in a.result.seasons)a.result.seasons[b].url="#tvshow/"+c.tvshowid+"/"+a.result.seasons[b].season;app.stores.TvSeasons[e]=a.result.seasons,c.success(a.result.seasons)})}}),app.TvepisodeCollection=Backbone.Collection.extend({model:app.TVShow,sync:function(a,b,c){void 0===app.stores.TvEpisodes&&(app.stores.TvEpisodes={});var d=[],e="episodes:"+c.tvshowid+":"+c.season;d.push(parseInt(c.tvshowid)),void 0!==c.season&&(d.push(parseInt(c.season)),d.push(app.fields.get("tvepisode"))),void 0!==app.stores.TvEpisodes[e]?c.success(app.stores.TvEpisodes[e]):app.xbmcController.command("VideoLibrary.GetEpisodes",d,function(a){for(var b in a.result.episodes)a.result.episodes[b].url="#tvshow/"+c.tvshowid+"/"+c.season+"/"+a.result.episodes[b].episodeid;a.result.episodes.sort(function(a,b){return app.helpers.aphabeticalSort(a.label,b.label)}),app.stores.TvEpisodes[e]=a.result.episodes,c.success(a.result.episodes)})}}),app.RecentTvepisodeCollection=Backbone.Collection.extend({model:app.TVShow,sync:function(a,b,c){void 0===app.stores.TvEpisodesRecent&&(app.stores.TvEpisodesRecent={});var d=[];d.push(app.fields.get("tvepisode")),d.push({end:1e4,start:0}),d.push({method:"date",ignorearticle:!0,order:"descending"}),app.xbmcController.command("VideoLibrary.GetRecentlyAddedEpisodes",d,function(a){var b=new app.TvshowAllCollection;b.fetch({success:function(){for(var b in a.result.episodes){var d=a.result.episodes[b],e=app.stores.allTvshowsLookup[d.tvshowid];a.result.episodes[b].url="#tvshow/"+d.tvshowid+"/"+d.season+"/"+d.episodeid,a.result.episodes[b].thumbnail=void 0!==e?e.thumbnail:""}app.stores.TvEpisodesRecent=a.result.episodes,c.success(a.result.episodes)}})})}}),app.TvshowFilteredCollection=Backbone.Collection.extend({model:app.TVShow,sync:function(a,b,c){void 0===app.stores.tvshowsFiltered&&(app.stores.tvshowsFiltered={});var d={sort:{method:"title"}},e=[app.fields.get("tvshow"),{end:500,start:0},d,c.filter],f="tvshows:key:filter";for(var g in c.filter)f="tvshows:"+g+":"+c.filter[g];void 0!==app.stores.tvshowsFiltered[f]?c.success(app.stores.tvshowsFiltered[f]):app.xbmcController.command("VideoLibrary.GetTVShows",e,function(a){app.stores.tvshowsFiltered[f]=a.result.tvshows,c.success(a.result.tvshows)})}}),app.ArtistCollection=Backbone.Collection.extend({model:app.Artist,sync:function(a,b,c){if("read"===a){var d="undefined"==typeof c.type?"all":c.type;"all"==d&&app.store.allArtists(function(a){c.success(a.models)}),"rand"==d&&app.store.randomArtists(function(a){c.success(a)})}}}),app.AlbumsCollection=Backbone.Collection.extend({model:app.Album,sync:function(a,b,c){"read"===a&&(app.notification("Loading Albums"),app.store.allAlbums(function(a){c.success(a.models)}))}}),app.AlbumCollection=Backbone.Collection.extend({model:app.Album,sync:function(a,b,c){"read"===a&&(app.notification("Loading "+c.type+"s"),app.store.getAlbums(parseInt(c.id),c.type,function(a){c.success(a)}))}}),app.SongCollection=Backbone.Collection.extend({model:app.Song,sync:function(a,b,c){"read"===a&&c.success(app.stores.allSongs.models)}}),app.PlaylistCollection=Backbone.Collection.extend({model:app.PlaylistItem,sync:function(a,b,c){"read"===a&&app.AudioController.getPlaylistItems(function(a){c.success(a.items)})}}),app.PlaylistCustomListCollection=Backbone.Collection.extend({model:app.PlaylistCustomListItem,sync:function(a,b,c){if("read"===a){var d=app.playlists.getCustomPlaylist(),e=[],f=1;for(var g in d){var h=d[g];h.id=f,e.push(h),f++}c.success(e)}}}),app.PlaylistCustomListSongCollection=Backbone.Collection.extend({model:app.PlaylistCustomListItemSong,sync:function(a,b,c){if("read"===a){var d=app.playlists.getCustomPlaylist(c.name);app.xbmcController.entityLoadMultiple("song",d.items,function(a){c.success(a)})}}}),app.ThumbsUpCollection=Backbone.Collection.extend({model:app.PlaylistCustomListItemSong,sync:function(a,b,c){if("read"===a){var d=app.playlists.getThumbsUp(c.name);if(void 0===d||null===d||0===d.length)return c.success([]),{items:[]};
switch(c.name){case"song":app.xbmcController.entityLoadMultiple("song",d.items,function(a){c.success(a)});break;case"artist":app.store.multipleArtists(d.items,function(a){c.success(a)});break;case"album":app.store.multipleAlbums(d.items,function(a){c.success(a)});break;case"movie":app.xbmcController.entityLoadMultiple("movie",d.items,function(a){c.success(a)});break;case"tvshow":app.xbmcController.entityLoadMultiple("tvshow",d.items,function(a){c.success(a)});break;case"dir":}}}}),app.CustomSongCollection=Backbone.Collection.extend({model:app.Song,sync:function(a,b,c){"read"===a&&app.xbmcController.entityLoadMultiple("song",c.items,function(a){c.success(a)})}}),app.RecentAlbumCollection=Backbone.Collection.extend({model:app.Song,sync:function(a,b,c){if("read"===a){var d=c.type;if(void 0!==app.stores.recentAlbums)return void c.success(app.stores.recentAlbums[d]);var e={added:[],played:[],all:[]},f={};app.cached.recentlyAddedAlbums=new app.AlbumRecentlyAddedXbmcCollection,app.cached.recentlyAddedAlbums.fetch({success:function(a){e.added=a.models,app.cached.recentlyPlayedAlbums=new app.AlbumRecentlyPlayedXbmcCollection,app.cached.recentlyPlayedAlbums.fetch({success:function(a){e.played=a.models,$.each(e.added,function(a,b){e.all.push(b),f[b.attributes.albumid]=!0}),$.each(e.played,function(a,b){void 0===f[b.attributes.albumid]&&e.all.push(b)}),app.stores.recentAlbums=e,c.success(e[d])}})}})}}}),app.AudioGenreCollection=Backbone.Collection.extend({model:app.Tag,sync:function(a,b,c){"read"===a&&(void 0!==app.stores.audioGenres&&c.success(app.stores.audioGenres),app.xbmcController.command("AudioLibrary.GetGenres",[["title"],{start:0,end:5e5},{method:"label",order:"ascending"}],function(a){$.each(a.result.genres,function(b,c){c.type="musicGenre",c.id=c.genreid,c.url="#music/genres/"+c.id,a.result.genres[b]=c}),app.stores.audioGenres=a.result.genres,c.success(a.result.genres)}))}}),app.AudioYearCollection=Backbone.Collection.extend({model:app.Tag,sync:function(a,b,c){"read"===a&&app.store.getAlbumYears(function(a){c.success(a)})}}),app.AlbumYearCollection=Backbone.Collection.extend({model:app.Album,sync:function(a,b,c){"read"===a&&app.store.getAlbumsByYear(c.year,function(a){c.success(a)})}}),app.MemoryStore=function(a){this.state={ready:!1,msg:"connecting"},app.stores={songs:[],albums:[],artists:[],genres:[],all:[],allArtists:[]},this.syncAudio=function(){var a=this;a.songsIndexed=!1,a.songsIndexing=!1,a.albumsIndexed=!1,a.albumsIndexed=!1,this.allArtists(),this.allAlbums(),this.indexSongs()},this.indexSongs=function(a){var c=this;c.songsIndexed===!0?b(a,c):c.songsIndexing!==!0&&(c.songsIndexing=!0,this.allSongs=new app.SongXbmcCollection,this.allSongs.fetch({success:function(d){app.stores.allSongs=d,c.songsIndexed=!0,c.state={ready:!0,msg:"songs ready"},$(window).trigger("songsReady"),b(a,c)}}))},this.libraryCall=function(a,b){"undefined"==typeof b&&(b="songsReady"),app.store.state.ready===!0?a():$(window).bind(b,a)},this.allArtists=function(a){var c=this;if(c.artistsIndexed===!0){var d=app.stores.allArtists;return b(a,d),d}this.allXbmcArtists=new app.ArtistXbmcCollection,this.allXbmcArtists.fetch({success:function(d){d.models.sort(function(a,b){return app.helpers.aphabeticalSort(a.attributes.label,b.attributes.label)}),app.stores.allArtists=d,c.msg="artists ready",$(window).trigger("artistsReady"),c.artistsIndexed=!0;var e=app.stores.allArtists;return b(a,e),e}})},this.allAlbums=function(a){var c=this;if(c.albumsIndexed===!0){var d=app.stores.allAlbums;return b(a,d),d}this.allXbmcAlbums=new app.AlbumXbmcCollection,this.allXbmcAlbums.fetch({success:function(d){app.stores.allAlbums=d,c.msg="albums ready",$(window).trigger("albumsReady"),c.albumsIndexed=!0;var e=app.stores.allAlbums;return b(a,e),e}})},this.multipleArtists=function(a,c){0!==a.length&&this.allArtists(function(d){var e=d.models.filter(function(b){return-1!=$.inArray(b.attributes.artistid,a)});b(c,e)})},this.getAlbumsByGenre=function(a,c){this.allAlbums(function(d){var e=d.models.filter(function(b){return-1!=$.inArray(a,b.attributes.genreid)});b(c,e)})},this.getAlbumsByYear=function(a,c){this.allAlbums(function(d){var e=d.models.filter(function(b){return a==b.attributes.year});b(c,e)})},this.getAlbumYears=function(a){var c=[],d={};this.allAlbums(function(e){$.each(e.models,function(a,b){d[b.attributes.year]=!0});for(var f in d)c.push({label:f,id:f,type:"year",url:"#music/years/"+f});b(a,c)})},this.getSongBy=function(a,c,d){var e=app.stores.allSongs.models,f=null;return $.each(e,function(b,d){if(null===f){var e=d.attributes;"id"==a&&e.id==c?f=e:"file"==a&&e.file==c?f=e:"title"==a&&e.label==c?f=e:"title"==a&&e.label.toLowerCase().indexOf(c.toLowerCase())>-1&&(f=e)}}),b(d,f),f},this.multipleAlbums=function(a,c){0!==a.length&&this.allAlbums(function(d){var e=d.models.filter(function(b){return-1!=$.inArray(b.attributes.albumid,a)});b(c,e)})},this.randomArtists=function(a){this.allArtists(function(c){var d=c.models,e=_.shuffle(d),f=[],g=30,h=0;_.each(e,function(a){g>h&&0!==a.attributes.fanart.length&&0!==a.attributes.thumbnail.length&&(f.push(a),h++)}),f.length<g&&_.each(e,function(a){g>h&&0!==a.attributes.thumbnail.length&&(f.push(a),h++)}),b(a,f)})},this.getArtist=function(a,c){this.allArtists(function(){$.each(app.stores.allArtists.models,function(d,e){"undefined"!=typeof e.attributes&&e.attributes.artistid==a&&b(c,e)})})},this.getAlbums=function(a,c,d){var e={},f=[],g=this,h=c+a,i=c+"id",j=c+"s";if(app.helpers.exists(app.stores[j])&&app.helpers.exists(app.stores[j][h])&&app.helpers.exists(app.stores[j][h].albumsitems)&&(f=app.stores[j][h].albumsitems,b(d,f)),0===f.length){e[i]=a;var k=new app.SongFilteredXbmcCollection({filter:e});k.fetch({success:function(a){f=g.parseArtistSongsToAlbums(a.models),app.stores[j][h]={albumsitems:f},b(d,f)}})}},this.parseArtistSongsToAlbums=function(a){var b={},c=[];for(var d in a){var e=a[d],f="undefined"!=typeof e.attributes?e.attributes:{},g="album"+f.albumid;if("undefined"==typeof b[g]){b[g]={};var h=["album","albumid","thumbnail","artist","artistid"];for(var i in h){var j=h[i];void 0!==f[j]&&(b[g][j]=f[j])}b[g].songs=[]}b[g].songs.push(e)}for(d in b)c.push(b[d]);return c},this.syncAudio(a);var b=function(a,b){a&&setTimeout(function(){a(b)})}},app.store=new app.MemoryStore(function(){}),app.FileCollection=Backbone.Collection.extend({model:app.File,sync:function(a,b,c){"read"===a&&("sources"==c.name?this.getAllSources(c.success):this.getDirectory(c.sourcetype,c.name,c.success))},getAllSources:function(a){var b,c=this,d=[];c.getAddonSources(function(e){d.push({method:"Files.GetSources",params:["music"]}),d.push({method:"Files.GetSources",params:["video"]}),app.xbmcController.multipleCommand(d,function(d){b=[],b=b.concat([{type:"heading",id:"music",filetype:"heading"}]),b=b.concat(c.parseData(d[0].result.sources,"music")),b=b.concat([{type:"heading",id:"video",filetype:"heading"}]),b=b.concat(c.parseData(d[1].result.sources,"video")),b=b.concat([{type:"heading",id:"addons",filetype:"heading"}]),b=b.concat(e),a(b)})})},getAddonSources:function(a){app.addOns.getSources(a)},getDirectory:function(a,b,c){var d=this;app.xbmcController.command("Files.GetDirectory",[b,a,app.fields.get("file"),{method:"title",order:"ascending"}],function(b){var e=d.parseData(b.result.files,a);c(e)})},parseData:function(a,b){for(var c in a){var d=a[c];("undefined"==typeof d.filetype||""===d.filetype)&&(d.filetype="directory"),("undefined"==typeof d.id||0===d.id)&&(d.id=d.file),"directory"==d.filetype?d.title=d.label:d[d.type+"id"]=d.id,("undefined"==typeof d.title||""===d.title)&&(d.title=d.label),d.controller="music"==b?"AudioController":"VideoController",d.sourcetype=b,"video"==b&&"movie"==d.type&&(d.filetype="file"),void 0!==d.mimetype&&"application/octet-stream"==d.mimetype&&(d.type="stream"),d=app.addOns.invokeAll("parseFileRecord",d),a[c]=d}return a}}),app.PvrChannelCollection=Backbone.Collection.extend({model:app.PvrChannel,sync:function(a,b,c){app.pvr.getChannels(c.type,function(a){c.success(a)})}}),app.AlbumView=Backbone.View.extend({initialize:function(){},render:function(){var a=this;return this.$el.html(this.template(this.model.attributes)),a.albumList=new app.AlbumCollection,a.albumList.fetch({id:this.model.attributes.albumid,type:"album",success:function(b){a.albumsView=new app.AlbumsList({model:b,className:"album-list"});{var c=b.models[0].attributes,d="#sidebar-first .album-row-"+c.albumid;$("#album-list").html(a.albumsView.render().el)}app.ui.setTitle('<a href="#artist/'+c.artistid+'">'+c.artist+"</a>"+c.album),$("#sidebar-first .album-small-row").removeClass("active"),0===$(d).length?(a.albumArtistView=new app.AlbumArtistView({model:b.models[0]}),app.helpers.setFirstSidebarContent(a.albumArtistView.render().el)):$(d).addClass("active")}}),this}}),app.AlbumArtistView=Backbone.View.extend({tagName:"div",className:"album-artist-item",initialize:function(){this.artistModel=new app.Artist({id:this.model.attributes.artistid,fields:app.fields.get("artist")}),this.artistAlbums={}},render:function(){var a=this;return this.artistModel.fetch({success:function(b){a.$el.html(a.template(b.attributes)),a.albumList=new app.AlbumCollection,a.albumList.fetch({id:b.attributes.artistid,type:"artist",success:function(b){a.albumsView=new app.SmallAlbumsList({model:b}),$("#sidebar-first .other-albums").html(a.albumsView.render().el),$(".album-row-"+a.model.attributes.albumid).addClass("active")}})}}),this}}),app.AlbumsList=Backbone.View.extend({tagName:"div",className:"artist-list-view",initialize:function(){var a=this;this.model.on("reset",this.render,this),this.model.on("add",function(b){a.$el.append(new app.AlbumItemView({model:b}).render().el)})},render:function(){return this.$el.empty(),_.each(this.model.models,function(a){this.$el.append(new app.AlbumItemView({model:a}).render().el)},this),this}}),app.AlbumItemView=Backbone.View.extend({tagName:"div",initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.close,this)},render:function(){return this.$el.html(this.template(this.model.attributes)),$(".album-info",this.$el).html(new app.AlbumItemSmallView({model:this.model}).render().$el),$(".tracks",this.$el).html(new app.SongListView({model:{models:this.model.attributes.songs}}).render().el),this}}),app.SmallAlbumsList=Backbone.View.extend({tagName:"ul",className:"album-list-small",render:function(){return this.$el.empty(),_.each(this.model.models,function(a){this.$el.append(new app.AlbumItemSmallView({model:a}).render().el)},this),this}}),app.AlbumItemSmallView=Backbone.View.extend({tagName:"li",className:"album-small-item card",events:{"click .album-play":"playAlbum","click .album-add":"addAlbum","click .album-thumbsup":"thumbsUp","click .actions-wrapper":"viewAlbum","click .album-menu":"menu"},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.close,this)},render:function(){var a=this.model.attributes;return a.title="undefined"!=typeof a.label?a.label:a.album,a.url="#album/"+a.albumid,a.img=app.image.url(a.thumbnail),a.recenttext="undefined"!=typeof a.recent?"Recently "+a.recent:"",a.artisturl=""!==a.artistid?"#artist/"+a.artistid:"#artists",this.$el.html(this.template(a)),app.image.isDefaultImage(a.img)||this.$el.addClass("has-thumb"),app.playlists.isThumbsUp("album",a.albumid)&&this.$el.addClass("thumbs-up"),"undefined"!=typeof a.recent&&this.$el.addClass("recent"),this},menu:function(a){a.stopPropagation(),a.preventDefault();var b=app.helpers.menuTemplates("album",this.model.attributes);app.helpers.menuDialog(b)},playAlbum:function(a){a.stopPropagation(),a.preventDefault();var b=this.model.attributes;"local"==app.audioStreaming.getPlayer()?app.playlists.playlistAddItems("local","replace","album",b.albumid):app.AudioController.playlistClearAdd("albumid",b.albumid,function(){app.AudioController.playPlaylistPosition(0,function(){app.AudioController.playlistRender()})})},addAlbum:function(a){a.stopPropagation(),a.preventDefault();var b=this.model.attributes;"local"==app.audioStreaming.getPlayer()?app.playlists.playlistAddItems("local","append","album",b.albumid):app.AudioController.playlistAdd("albumid",b.albumid,function(){app.notification(b.album+" added to the playlist"),app.AudioController.playlistRender()})},thumbsUp:function(a){a.stopPropagation(),a.preventDefault();var b=this.model.attributes,c=b.albumid,d=app.playlists.isThumbsUp("album",c)?"remove":"add",e=$(a.target).closest(".card");app.playlists.setThumbsUp(d,"album",c),e.toggleClass("thumbs-up")},viewAlbum:function(a){a.stopPropagation(),a.preventDefault();var b=this.model.attributes.albumid;window.location="#album/"+b}}),app.ArtistView=Backbone.View.extend({events:{"click .artist-play":"playArtist","click .artist-add":"addArtist","click .artist-thumbsup":"thumbsUp","click .artist-fanart":"toggleFanart","click .artist-menu":"menu"},initialize:function(){this.artistsList||(this.artistsList=new app.ArtistCollection,this.artistsListView=new app.AristsListView({model:this.artistsList,className:"artist-list"}))},render:function(){this.$el.html(this.template(this.model.attributes)),$("#artist-meta",this.el).html(new app.ArtistSummaryView({model:this.model}).render().el),$(".artist-row").removeClass("active");var a=$(".artist-row-"+this.model.id);return a.length>0&&(a.addClass("active"),$("#sidebar-first .sidebar-content").scrollTo(a)),this},menu:function(a){a.stopPropagation(),a.preventDefault();var b=app.helpers.menuTemplates("artist",this.model.attributes);app.helpers.menuDialog(b)},playArtist:function(){var a=this.model.attributes;"local"==app.audioStreaming.getPlayer()?app.playlists.playlistAddItems("local","replace","artist",a.artistid):app.AudioController.playlistClearAdd("artistid",a.artistid,function(){app.AudioController.playPlaylistPosition(0,function(){app.AudioController.playlistRender()})})},addArtist:function(){var a=this.model.attributes;"local"==app.audioStreaming.getPlayer()?app.playlists.playlistAddItems("local","append","artist",a.artistid):app.AudioController.playlistAdd("artistid",a.artistid,function(){app.notification(a.artist+" added to the playlist"),app.AudioController.playlistRender()})},thumbsUp:function(a){var b=(this.model.attributes,this.model.attributes.artistid),c=app.playlists.isThumbsUp("artist",b)?"remove":"add",d=$(a.target).closest(".artist-actions");app.playlists.setThumbsUp(c,"artist",b),d.toggleClass("thumbs-up")},toggleFanart:function(a){$(a.target).parent().toggleClass("full-size")}}),app.ArtistSummaryView=Backbone.View.extend({events:{"click p.description":"expandDetail"},initialize:function(){this.model.on("change",this.render,this)},render:function(){this.$el.html(this.template(this.model.attributes));var a=this;return a.albumList=new app.AlbumCollection,a.albumList.fetch({id:this.model.attributes.artistid,type:"artist",success:function(b){a.albumsView=new app.AlbumsList({model:b,className:"album-list"}),$("#album-list").html(a.albumsView.render().el);var c=app.helpers.parseArtistSummary(b);$(".artist-list .active .artist-meta").html(c),""!==a.model.attributes.fanart}}),this},expandDetail:function(){$(".artist-detail").toggleClass("full")}}),app.ArtistsView=Backbone.View.extend({initialize:function(){},render:function(){return this.$el.html(this.template()),this.renderSidebar(),this.artistsRand=new app.ArtistCollection,this.artistsRand.fetch({type:"rand",success:function(a){this.artistsRandView=new app.AristsRandView({model:a,className:"rand-list"}),$("#main-content").html(this.artistsRandView.render().el),app.image.addFreewall("ul.rand-list")}}),this},renderSidebar:function(){0===$(".artist-list .artist").length&&(this.artistsList=new app.ArtistCollection,this.artistsList.fetch({success:function(a){this.artistsListView=new app.AristsListView({model:a,className:"artist-list swiper-wrapper"}),app.helpers.setFirstSidebarContent(this.artistsListView.render().el)}}))}}),app.AristsListView=Backbone.View.extend({tagName:"ul",className:"nav nav-list",initialize:function(){var a=this;this.model.on("reset",this.render,this),this.model.on("add",function(b){a.$el.append(new app.ArtistListItemView({model:b}).render().el)})},render:function(){return this.$el.empty(),_.each(this.model.models,function(a){this.$el.append(new app.ArtistListItemView({model:a}).render().el)},this),this}}),app.ArtistListItemView=Backbone.View.extend({tagName:"li",className:"artist",events:{"click .play-artist":"playArtist"},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.close,this)},render:function(){var a=this.model.attributes;return a.subtext="undefined"!=typeof a.genre?a.genre.join(", "):"",this.$el.html(this.template(a)),this},playArtist:function(a){a.preventDefault();var b=this.model.attributes;"local"==app.audioStreaming.getPlayer()?app.playlists.playlistAddItems("local","replace","artist",b.artistid):app.AudioController.playlistClearAdd("artistid",b.artistid,function(){app.AudioController.playPlaylistPosition(0,function(){app.AudioController.playlistRender()})})}}),app.AristsRandView=Backbone.View.extend({tagName:"ul",className:"random-block",initialize:function(){var a=this;this.model.on("reset",this.render,this),this.model.on("add",function(b){a.$el.append(new app.ArtistLargeItemView({model:b}).render().el)})},render:function(){return this.$el.empty(),_.each(this.model.models,function(a){this.$el.append(new app.ArtistLargeItemView({model:a}).render().el)},this),this}}),app.ArtistLargeItemView=Backbone.View.extend({tagName:"li",className:"artist-item-large card card-large",initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.close,this)},events:{"click .artist-play":"playArtist","click .artist-add":"addArtist","click .artist-thumbsup":"thumbsUp","click .actions-wrapper":"viewArtist","click .artist-menu":"menu"},render:function(){var a=this.model.attributes;return a.title="undefined"!=typeof a.label?a.label:a.artist,a.url="#album/"+a.artistid,a.img=""!==a.fanart?a.fanart:a.thumbnail,this.$el.html(this.template(a)),app.image.isDefaultImage(a.img)||this.$el.addClass("has-thumb"),app.playlists.isThumbsUp("artist",a.artistid)&&this.$el.addClass("thumbs-up"),this},menu:function(a){a.stopPropagation(),a.preventDefault();var b=app.helpers.menuTemplates("artist",this.model.attributes);app.helpers.menuDialog(b)},playArtist:function(a){a.stopPropagation(),a.preventDefault();var b=this.model.attributes;"local"==app.audioStreaming.getPlayer()?app.playlists.playlistAddItems("local","replace","artist",b.artistid):app.AudioController.playlistClearAdd("artistid",b.artistid,function(){app.AudioController.playPlaylistPosition(0,function(){app.notification("Now playing "+b.artist),app.AudioController.playlistRender()})})},addArtist:function(a){a.stopPropagation(),a.preventDefault();var b=this.model.attributes;"local"==app.audioStreaming.getPlayer()?app.playlists.playlistAddItems("local","append","artist",b.artistid):app.AudioController.playlistAdd("artistid",b.artistid,function(){app.notification(b.artist+" added to the playlist"),app.AudioController.playlistRender()})},thumbsUp:function(a){a.stopPropagation(),a.preventDefault();var b=this.model.attributes,c=b.artistid,d=app.playlists.isThumbsUp("artist",c)?"remove":"add",e=$(a.target).closest(".card");app.playlists.setThumbsUp(d,"artist",c),e.toggleClass("thumbs-up")},viewArtist:function(a){a.stopPropagation(),window.location="#artist/"+this.model.attributes.artistid}}),app.ContactView=Backbone.View.extend({render:function(){return this.$el.html(this.template()),this}}),app.CustomPlaylistSongListView=Backbone.View.extend({tagName:"ul",className:"playlist-song-list",events:{"click .playlist-append":"appendPlaylist","click .playlist-replace":"replacePlaylist","click .playlist-browser-replace":"browserReplacePlaylist","click .playlist-delete":"deleteCustomListPlaylist","click .playlist-export":"exportCustomListPlaylist","click .thumbsup-append":"appendThumbsup","click .thumbsup-replace":"replaceThumbsup","click .thumbsup-browser-replace":"browserReplacePlaylist"},initialize:function(){},render:function(){var a=app.helpers.arg();"playlist"==a[0]&&(this.list=app.playlists.getCustomPlaylist(a[1])),"thumbsup"==a[0]&&(this.list=app.playlists.getThumbsUp("song")),this.$el.empty();var b=0;_.each(this.model.models,function(a){a.attributes.list=this.list,a.attributes.position=b,this.$el.append(new app.CustomPlaylistSongView({model:a}).render().el),b++},this),this.playlistBinds();var c=app.playlists.getDropdown();return this.$el.prepend(c),$(".playlist-actions",this.$el).prepend("<small>"+this.model.models.length+" items</small>"),this},playlistBinds:function(){var a=this;$sortableCustom=this.$el,$sortableCustom.sortable({placeholder:"playlist-item-placeholder",handle:".song-title",items:"> li",axis:"y",update:function(){var b=[],c="thumbsup"==app.helpers.arg(0)?"thumbsup":app.helpers.arg(1),d=$("ul.playlist-song-list, ul.song-thumbsup-list");d.find("div.playlist-item").each(function(c,d){var e=a.list.items[$(d).data("pos")];b.push(e)}),app.playlists.replaceCustomPlayList(c,b)}}).disableSelection()},appendPlaylist:function(a){a.preventDefault();var b=app.playlists.getCustomPlaylist(this.list.id);this.addCustomListToPlaylist(b.items),app.notification("Playlist updated")},replacePlaylist:function(a){a.preventDefault();var b=this.list.id,c=app.playlists.getCustomPlaylist(b);this.replacePlaylistItems(c.items)},browserReplacePlaylist:function(a){a.preventDefault(),"thumbsup"==app.helpers.arg(0)?app.playlists.playlistAddItems("local","replace","thumbsup","song"):app.playlists.playlistAddItems("local","replace","list",this.list.id)},deleteCustomListPlaylist:function(a){a.preventDefault();var b=this.list;app.helpers.confirm("Delete playlist for good? This cannot be undone",function(){app.playlists.deleteCustomPlaylist(b.id);var a=$("#content");a.find(".playlist-song-list").length>0&&a.html('<div class="loading-box">Playlist removed</div>')})},appendThumbsup:function(a){a.preventDefault();var b=app.playlists.getThumbsUp("song");this.addCustomListToPlaylist(b.items),app.notification("Playlist updated")},replaceThumbsup:function(a){a.preventDefault();var b=app.playlists.getThumbsUp("song");this.replacePlaylistItems(b.items)},replacePlaylistItems:function(a){var b=this;app.helpers.confirm("Replace the current xbmc playlist with this list?",function(){app.AudioController.playlistClear(function(){b.addCustomListToPlaylist(a,function(){app.AudioController.playPlaylistPosition(0,function(){app.AudioController.playlistRender(),app.notification("Playlist updated and playing")})})})})},addCustomListToPlaylist:function(a,b){for(var c in a)"number"!=typeof a[c]&&(a[c]=a[c].file);app.AudioController.playlistAddMultiple("mixed",a,function(a){app.AudioController.playlistRender(),app.playlists.changePlaylistView("xbmc"),b&&b(a)})},exportCustomListPlaylist:function(a){a.preventDefault(),app.ui.featureNotBuiltDialog()}}),app.CustomPlaylistSongSmallListView=Backbone.View.extend({tagName:"ul",className:"browser-playlist-song-list",render:function(){this.$el.empty();var a=0;return _.each(this.model.models,function(b){var c=b.attributes;c.pos=a,c.items=[],c.list="local",c.id||(c.id=c.songid),b.attributes=c,this.$el.append(new app.PlaylistItemView({model:c,className:"playlist-item browser-player"}).render().$el),a++},this),this.playlistBinds(),this},playlistBinds:function(){var a=this.$el,b=this;a.sortable({placeholder:"playlist-item-placeholder",handle:".playlist-play",items:"> li",axis:"y",update:function(){var a=[];b.$el.find("div.playlist-item").each(function(b,c){a.push($(c).data("id"))}),app.audioStreaming.sortableChangePlaylistPosition(a)}}).disableSelection()}}),app.CustomPlaylistSongView=Backbone.View.extend({tagName:"li",className:"song-row",events:{"dblclick .song-title":"loadSong","click .song-play":"playSong","click .song-add":"addSong","click .song-thumbsup":"thumbsUp","click .song-remove":"removeSong","click .song-menu":"menu"},initialize:function(){},render:function(){return"undefined"==typeof this.model.attributes.position?this:(app.playlists.isThumbsUp("song",this.model.attributes.songid)&&this.$el.addClass("thumbs-up"),this.$el.html(this.template(this.model.attributes)),this)},menu:function(){app.helpers.menuDialog(app.helpers.menuTemplates("song",this.model.attributes))},playSong:function(){var a=this.model.attributes,b=app.helpers.getSongKey(a);"local"==app.audioStreaming.getPlayer()?app.playlists.playlistAddItems("local","append","song",a.songid,function(){app.audioStreaming.playPosition(app.audioStreaming.playList.items.models.length-1)}):(app.playlists.changePlaylistView("xbmc"),app.AudioController.insertAndPlay(b.type,b.id,function(){app.notification(a.label+" added to the playlist"),app.AudioController.playlistRender()}))},addSong:function(){var a=this.model.attributes,b=app.helpers.getSongKey(a);"local"==app.audioStreaming.getPlayer()?app.playlists.playlistAddItems("local","append","song",a.songid,function(){}):app.AudioController.playlistAdd(b.type,b.id,function(){app.notification(a.label+" added to the playlist"),app.AudioController.playlistRender()})},thumbsUp:function(a){var b=this.model.attributes.songid,c=app.playlists.isThumbsUp("song",b)?"remove":"add",d=$(a.target).closest("li");app.playlists.setThumbsUp(c,"song",b),d.toggleClass("thumbs-up")},removeSong:function(a){var b=this.model.attributes.position,c=this.model.attributes.list.id,d=$(a.target);app.playlists.deleteCustomPlaylistSong(c,b),d.closest("li").slideUp(function(){$(this).remove()})},downloadSong:function(a){var b=this.model.attributes.file;a.preventDefault(),app.AudioController.downloadFile(b,function(a){window.location=a})},addToCustomPlaylist:function(a){a.preventDefault();var b=this.model.attributes,c=app.helpers.getSongKey(b),d="file"==c.type?b:b.songid;app.playlists.saveCustomPlayListsDialog(c.type,[d])}}),app.ExplorerView=Backbone.View.extend({tagName:"div",className:"explorer-wrapper",initialize:function(){},events:{},render:function(){},renderList:function(){},parsePath:function(){}}),app.FilesView=Backbone.View.extend({tagName:"ul",className:"files-list",initialize:function(){this.mixedView=new app.MixedView({model:{key:"filesPage"}})},events:{"click .entity-heading":"sidebarToggleContent"},render:function(){this.$el.empty();var a=$("#content"),b=this,c=$("#files-container",a),d=$('<ul class="files-music"></ul>'),e=$('<ul class="file-lists"></div>');return 0===c.length?(a.html(this.template(this.model)),_.each(this.model.models,function(a){e.append("heading"==a.attributes.type?b.mixedView.getHeading(a.attributes.id,a.attributes.id):new app.FileView({model:a}).render().el)}),app.helpers.setFirstSidebarContent(e)):(b.model.models.sort(function(a,b){return app.helpers.aphabeticalSort(a.attributes.title,b.attributes.title)}),_.each(this.model.models,function(a){""===a.attributes.filetype||"directory"==a.attributes.filetype?this.$el.append(new app.FileView({model:a}).render().el):d.append(new app.FileView({model:a}).render().el)},this),c.html(""!==d.html()?d:'<p class="loading-box">No media found in this folder</p>')),this},sidebarToggleContent:function(a){$(a.target)}}),app.FilesListView=Backbone.View.extend({tagName:"ul",className:"files-list",initialize:function(){},render:function(){return this.$el.empty(),this.model.models.sort(function(a,b){return app.helpers.aphabeticalSort(a.attributes.title,b.attributes.title)}),_.each(this.model.models,function(a){this.$el.append(new app.FileView({model:a}).render().el)},this),this}}),app.FileView=Backbone.View.extend({tagName:"li",className:"file-row",events:{"dblclick .file-item":"playDir","click .file-play":"playDir","click .file-type-directory":"clickDir","click .file-add":"addDir","click .file-menu":"menu"},initialize:function(){},render:function(){var a=this.model.attributes;return a.title=void 0===a.title?a.name:a.title,this.$el.html(this.template(a)),this.$el=app.addOns.invokeAll("postProcessFileView",this.$el,a),this},menu:function(a){a.preventDefault();var b=(this.model.attributes,this);b.getDialog()},getDialog:function(){var a=this.model.attributes,b=this;"music"==a.sourcetype?(a.label=a.title,app.helpers.menuDialog(app.helpers.menuTemplates("song",a))):app.helpers.menuDialog(b.getVideoDialog(a))},getVideoDialog:function(a){return{title:a.label,key:"video",omitwrapper:!0,items:[{url:"#","class":"video-download",title:"Download URL",callback:function(){app.AudioController.downloadFile(file.file,function(a){app.helpers.info("Download Url","<p>"+a+"</p>")})}},{url:"#","class":"video-stream",title:"Stream Video",callback:function(){app.VideoController.stream("html5",a)}}]}},clickDir:function(a){a.stopPropagation();var b=this.model.attributes,c=b.file,d=this,e=$(a.target).parent();app.addOns.invokeAll("clickDir",b),$("#sidebar-first li").removeClass("lowest"),e.addClass("loading"),app.cached.fileCollection=new app.FileCollection,app.cached.fileCollection.fetch({sourcetype:b.sourcetype,name:c,success:function(a){var c=new app.FilesView({model:a}).render().$el;0===d.$el.find("ul.files-list").length&&d.$el.append(c),e.addClass("lowest").removeClass("loading"),$("#folder-name").html(b.label)}})},fileGetTypeId:function(a){var b={key:"file",value:a.file};return("album"==a.type||"artist"==a.type||"movie"==a.type||"episode"==a.type)&&"application/octet-stream"!=a.mimetype&&(b.key=a.type+"id",b.value=a.id),"directory"==a.type&&(b.key=a.type),b},playDir:function(a){a.stopPropagation();var b=this.model.attributes,c=app[b.controller],d=this.fileGetTypeId(b);c.insertAndPlay(d.key,d.value,function(){app.notification(b.label+" added to the playlist"),c.playlistRender()})},addDir:function(a){a.stopPropagation();var b=this.model.attributes,c=this.fileGetTypeId(b),d=app[b.controller];d.playlistAdd(c.key,c.value,function(){app.notification(b.label+" added to the playlist"),d.playlistRender()})},downloadSong:function(a){var b=this.model.attributes.file;a.preventDefault(),app.AudioController.downloadFile(b,function(a){window.location=a})},addToCustomPlaylist:function(a){a.preventDefault();var b=this.model.attributes;app.playlists.saveCustomPlayListsDialog("file",[b])}}),app.HomeView=Backbone.View.extend({events:{"click #logo":"showMeBtnClick"},render:function(){return this.$el.html(this.template(this.model)),this},showMeBtnClick:function(){}}),app.MixedView=Backbone.View.extend({tagName:"div",className:"mixed-wrapper",entities:["artist","album","song","movie","tvshow"],initialize:function(){},events:{},render:function(){var a=this,b=a.model.key,c=$('<div class="'+b+"-page mixed-page "+b+'-results-content"></div>'),d="";return $.each(this.entities,function(e,f){var g=b+"-"+f+"s";if(void 0!==a.model.callbacks[f]){d='<div class="mixed-pane mixed-pane-'+e+'" id="'+g+'">'+a.getHeading(f,"Looking for "+f+"s","loading")+"</div>",c.append(d);var h=a.model.callbacks[f];h()}}),c.append('<div id="'+b+'-bottom"></div>'),this.$el.html(c),this},setCallbacks:function(a){this.model.callbacks=a},addEntity:function(a){-1==$.inArray(a,this.entities)&&this.entities.push(a)},setEntities:function(a){this.model.entities=a},renderPane:function(a,b,c){var d=this,e=d.model.key,f=$("#"+e+"-"+a+"s");if(f.empty(),0===b.models.length)this.noResult(a);else{f.html(this.getHeading(a,a+"s","has-results"));var g=new app[c]({model:b,className:a+"-"+e+"-list "+a+"-list"});f.append(g.render().$el),this.lazyLoadImages(f)}},noResult:function(a){0===$("."+a+"-type-heading").length&&$("#"+this.model.key+"-bottom").append(this.getHeading(a,"No "+a+" matches","no-result")),$("#"+this.model.key+"-"+a+"s").empty()},getHeading:function(a,b,c){return'<h3 class="'+a+"-type-heading "+this.model.key+"-heading entity-heading "+c+'">'+app.image.getIcon(a,!0)+b+"</h3>"},lazyLoadImages:function(){$("img.content-lazy").each(function(a,b){$d=$(b),""!==$d.data("original")&&$d.attr("src",$d.data("original"))})}}),app.MoviesView=Backbone.View.extend({initialize:function(){},render:function(){return this}}),app.MovieListView=Backbone.View.extend({tagName:"ul",className:"video-list movie-page-list",initialize:function(){var a=this;
this.model.on("reset",this.render,this),this.model.on("add",function(b){a.$el.append(new app.MovieListItemView({model:b}).render().el)})},events:{"click .next-page":"nextPage"},render:function(){return this.$el.empty(),_.each(this.model.models,function(a){this.$el.append(new app.MovieListItemView({model:a}).render().el)},this),void 0!==this.model.showNext&&this.model.showNext===!0&&(this.$el=app.pager.viewHelpers(this.$el,"movie")),this},nextPage:function(){var a=$(".next-page").last();app.pager.nextPage(a,"movie")},backFromMovie:function(a,b){var c=$(window);if(a===!0&&"undefined"!=typeof app.vars.backHash){var d=app.vars.backHash.split("/");"#movie"==d[0]&&(c.scrollTo($(".movie-row-"+d[1]),0,{offset:-200}),b=!0)}return b}}),app.MovieListItemView=Backbone.View.extend({tagName:"li",className:"movie-item-content",events:{"click .movie-play":"playMovie","click .movie-add":"addMovie","click .movie-thumbsup":"thumbsUp","click .movie-menu":"menu","click .actions-wrapper":"view","click .movie-watched":"toggleWatched"},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.close,this)},render:function(){var a=this.model.attributes;return a.label?(a.type="movie",a.watched=app.VideoController.watchedStatus(a),a.thumbsup=app.playlists.isThumbsUp("movie",a.movieid),this.$el.html(this.template(a)),this):this},view:function(){document.location="#movie/"+this.model.attributes.movieid},menu:function(a){a.stopPropagation(),a.preventDefault();var b=app.helpers.menuTemplates("movie",this.model.attributes);app.helpers.menuDialog(b)},thumbsUp:function(a){a.stopPropagation(),a.preventDefault();var b=this.model.attributes,c=app.playlists.isThumbsUp("movie",b.movieid)?"remove":"add",d=$(a.target).closest(".movie-actions");app.playlists.setThumbsUp(c,"movie",b.movieid),d.toggleClass("thumbs-up")},playMovie:function(a){a.preventDefault(),a.stopPropagation(),app.VideoController.playVideoId(this.model.attributes.movieid,"movieid",this.model.attributes,function(){app.VideoController.playlistRender()})},addMovie:function(a){a.preventDefault(),a.stopPropagation(),app.VideoController.addToPlaylist(this.model.attributes.movieid,"movieid","add",function(){app.VideoController.playlistRender()})},toggleWatched:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target).closest(".card");this.model.attributes.playcount=b.hasClass("watched-yes")?1:0,app.VideoController.toggleWatched("movie",this.model.attributes,function(a){a===!0?b.addClass("watched-yes").removeClass("watched-no"):b.addClass("watched-no").removeClass("watched-yes")})}}),app.MovieView=Backbone.View.extend({allMovieCache:[],initialize:function(){var a=this,b=new app.MovieAllCollection;b.fetch({success:function(b){a.allMovieCache=b}})},events:{"click .library-back":"libraryBack","click .library-next":"libraryNext","click .movie-play":"playMovie","click .movie-add":"addMovie","click .movie-thumbsup":"thumbsUp","click .movie-stream":"stream","click .movie-menu":"menu"},render:function(){var a=this,b=this.model.attributes;return b.type="movie",b.thumbsup=app.playlists.isThumbsUp("movie",b.movieid),b.watched=app.VideoController.watchedStatus(b),this.$el.html(this.template(b)),_.defer(function(){var c=$("#fanart-background",a.$el),d=app.image.url(b.fanart,"fanart");c.backstretch(d)}),this},libraryBack:function(a){a.preventDefault(),window.history.back()},libraryNext:function(a){a.preventDefault();var b=app.pager.libraryNav("movie",this.model.attributes.id,this.allMovieCache.models);b.next>0&&(document.location="#movie/"+b.next)},menu:function(a){a.stopPropagation(),a.preventDefault();var b=app.helpers.menuTemplates("movie",this.model.attributes);app.helpers.menuDialog(b)},thumbsUp:function(a){a.stopPropagation(),a.preventDefault();var b=this.model.attributes,c=app.playlists.isThumbsUp("movie",b.movieid)?"remove":"add",d=$(a.target).closest(".movie-actions");app.playlists.setThumbsUp(c,"movie",b.movieid),d.toggleClass("thumbs-up")},playMovie:function(a){a.preventDefault(),app.VideoController.playVideoId(this.model.attributes.movieid,"movieid",this.model.attributes,function(){app.VideoController.playlistRender()})},addMovie:function(a){a.preventDefault(),app.VideoController.addToPlaylist(this.model.attributes.movieid,"movieid","add",function(){app.VideoController.playlistRender()})},stream:function(a){a.preventDefault();var b=$(a.target).data("player");app.VideoController.stream(b,this.model.attributes)}}),app.MovieTagListView=Backbone.View.extend({tagName:"div",className:"movie-tag-list",initialize:function(){var a=this.model.type,b=this.model.tag;this.tagType=a+b},render:function(){var a,b=this,c=$("#content"),d="";return"genreid"==this.model.tag?(d="Genres",a=new app.VideoGenreCollection):(d="Years",a=new app.VideoYearCollection),app.ui.setTitle("Movies",{addATag:"#movies",icon:"film",subTitle:d}),a.fetch({type:"movie",success:function(a){a.type=b.tagType,app.cached.genresView=new app.TagsView({model:a}),c.html(app.cached.genresView.render().$el),c.prepend(app.filters.renderFilters("movie")),b.renderTagItems()}}),this},renderTagItems:function(){if(void 0!==this.model.id&&""!==this.model.id){var a,b=this.model.id,c=this.tagType,d=this.model.tag,e={};e[d]=parseInt(b),0===$(".tag-type-"+c).length?this.render():(a=new app.TagsView({model:this.model}),a.renderTagItems(this.model,"MovieFilteredCollection","MovieListView"))}}}),app.MusicView=Backbone.View.extend({tagName:"div",className:"music-page",initialize:function(){this.model.viewStyle=this.getViewStyle()},events:{"click .view-cards":"viewCards","click .view-songs":"viewSongs"},render:function(){var a=$(".tag-list");switch(this.model.page){case"recently-played":this.recentPlayed();break;case"recent":this.recent();break;case"recently-added":this.recentAdded();break;case"genres":a.length>0?this.genre(this.model.id):this.genres();break;case"years":a.length>0?this.year(this.model.id):this.years()}return this},recent:function(){var a=$("#content");app.cached.recentAlbumCollection=new app.RecentAlbumCollection,app.cached.recentAlbumCollection.fetch({type:"all",success:function(b){b.models=app.helpers.shuffle(b.models),app.cached.recentAlbumsView=new app.SmallAlbumsList({model:b,className:"album-list-landing"}),a.html(app.cached.recentAlbumsView.render().el),a.prepend(app.image.getFanartFromCollection(b))}})},recentAdded:function(){var a=this;return app.cached.recentlyAddedAlbums=new app.AlbumRecentlyAddedXbmcCollection,app.cached.recentlyAddedAlbums.fetch({success:function(b){var c=$("#content"),d=$("<div />",{"class":"album-style as-"+a.model.viewStyle});$.each(b.models,function(b,c){d.append(a.renderFullAlbum(c))}),a.$el.empty(),a.$el.append(a.renderViewToggle()),a.$el.append(d),a.$el.prepend(app.image.getFanartFromCollection(b)),c.html(a.$el)}}),this},recentPlayed:function(){var a=this;return app.cached.recentlyPlayedAlbums=new app.AlbumRecentlyPlayedXbmcCollection,app.cached.recentlyPlayedAlbums.fetch({success:function(b){var c=$("#content"),d=$("<div />",{"class":"album-style as-"+a.model.viewStyle});$.each(b.models,function(b,c){d.append(a.renderFullAlbum(c))}),a.$el.empty(),a.$el.append(a.renderViewToggle()),a.$el.append(d),a.$el.prepend(app.image.getFanartFromCollection(b)),c.html(a.$el)}}),this},genres:function(){var a=this;a.genreList=new app.AudioGenreCollection,a.genreList.fetch({success:function(b){b.type="musicGenres",app.cached.genresView=new app.TagsView({model:b}),$("#content").html(app.cached.genresView.render().$el),""!==app.helpers.arg(2)&&a.genre(app.helpers.arg(2))}})},genre:function(a){var b;b=new app.AlbumFilteredXbmcCollection({filter:{genreid:parseInt(a)}}),b.fetch({success:function(b){b.models.sort(function(a,b){return app.helpers.aphabeticalSort(a.attributes.label,b.attributes.label)});var c=$("#tag-container-"+a),d=new app.SmallAlbumsList({model:b,className:"album-list-landing"});c.html(d.render().el),c.closest(".tag-list-item").addClass("open"),$(window).scrollTo(c.parent(),0,{offset:{top:-50}})}})},years:function(){var a=this;a.yearList=new app.AudioYearCollection,a.yearList.fetch({success:function(b){b.models.sort(function(a,b){return app.helpers.aphabeticalSort(b.attributes.label,a.attributes.label)}),b.type="musicYears",app.cached.yearsView=new app.TagsView({model:b}),$("#content").html(app.cached.yearsView.render().$el),""!==app.helpers.arg(2)&&a.year(app.helpers.arg(2))}})},year:function(a){var b;b=new app.AlbumYearCollection,b.fetch({year:parseInt(a),success:function(b){b.models.sort(function(a,b){return app.helpers.aphabeticalSort(a.attributes.label,b.attributes.label)});var c=new app.SmallAlbumsList({model:b,className:"album-list-landing"}),d=$("#tag-container-"+a);d.html(c.render().el),d.closest(".tag-list-item").addClass("open"),$(window).scrollTo(d.parent(),0,{offset:{top:-50}})}})},renderFullAlbum:function(a){var b=this,c=a.attributes,d=$("<div />",{id:"full-album-row-"+c.albumid});return b.albumList=new app.AlbumCollection,b.albumList.fetch({id:c.albumid,type:"album",success:function(b){a=b.models[0];var c=a.attributes.albumid;$("#full-album-row-"+c).html(new app.AlbumItemView({model:a}).render().el)}}),d},getViewStyle:function(){return app.settings.get("list-style-"+this.model.page,"cards")},viewCards:function(){$(".album-style").removeClass("as-songs").addClass("as-cards"),$(".view-toggles .btn").removeClass("active"),$(".btn.view-cards").addClass("active"),app.settings.set("list-style-"+this.model.page,"cards")},viewSongs:function(){$(".album-style").addClass("as-songs").removeClass("as-cards"),$(".view-toggles .btn").removeClass("active"),$(".btn.view-songs").addClass("active"),app.settings.set("list-style-"+this.model.page,"songs")},renderViewToggle:function(){var a=this.getViewStyle();return'<div class="view-toggles"> <button class="btn view-songs '+("songs"==a?"active":"")+'"><i class="fa fa-list"></i></button><button class="btn view-cards '+("cards"==a?"active":"")+'"><i class="fa fa-th-large"></i></button></div>'}}),app.playerStateView=Backbone.View.extend({runForce:12,initialize:function(){void 0===app.counts.runCount&&(app.counts.runCount=0),this.$body=$("body"),this.$nowPlaying=$("#now-playing")},render:function(){var a=app.playerState.xbmc.getNowPlaying(),b=$(window),c=app.helpers.varGet("lastPlaying","");this.$songs=$(".song"),"playing"==a.status&&this.isUrl(a.item.file)&&this.runForce<=app.counts.runCount&&(app.playerState.xbmc.fetchRemote(function(){},!0),app.counts.runCount=0),a.playingItemChanged=c!=this.playingKey(a),a.status="notPlaying"==a.status?"stopped":app.helpers.exists(a.player.speed)&&0===a.player.speed?"paused":a.status,app.state=a.status,app.cached.nowPlaying=a,app.helpers.varSet("lastPlaying",this.playingKey(a)),this.bodyClasses(),this.$songs.removeClass("playing-row"),"playing"==a.status||"paused"==a.status?(this.nowPlayingMinor(),a.playingItemChanged&&(this.nowPlayingMajor(),b.trigger("playingItemChange",a)),"playing"==a.status&&app.counts.runCount++):this.notPlaying(),this.playerCron(),b.trigger("playerUpdate",a)},playingKey:function(a){return this.isUrl(a.item.file)?a.item.label:void 0!==a.item?void 0!==a.item.file?a.item.file:a.item.type+a.item.id:null},isUrl:function(a){return 0===a.lastIndexOf("http://",0)||0===a.lastIndexOf("https://",0)},bodyClasses:function(){var a=app.playerState.xbmc.getNowPlaying();this.$body.removeClass("playing").removeClass("paused").removeClass("notPlaying").removeClass("random-on").removeClass("random-off").removeClass("partymode-on").removeClass("repeat-off").removeClass("repeat-all").removeClass("repeat-one").addClass(a.status).addClass("random-"+(a.player.shuffled===!0?"on":"off")).addClass("repeat-"+a.player.repeat),a.player.partymode===!0&&this.$body.addClass("partymode-on"),this.$body.removeClass(function(a,b){return(b.match(/\bactivePlayer\S+/g)||[]).join(" ")}).addClass("activePlayer-"+a.activePlayer)},nowPlayingMinor:function(){this.tagPlayingRow(),this.setTitle();{var a=app.playerState.xbmc.getNowPlaying(),b=$("#time"),c=0,d=0,e=app.helpers.parseArtistsArray(a.item);$(".playlist .playing-row")}$(".playing-song-meta").html(e),$(".progress-"+a.item.type+"-"+a.item.id).css("width",Math.ceil(a.player.percentage)+"%"),1==a.activePlayer?(d=a.player.totaltime,c=a.player.time):0===a.activePlayer&&(d=app.helpers.secToTime(parseInt(a.item.duration)),c=a.player.time),b.find(".time-cur").html(app.helpers.formatTime(c)),b.find(".time-total").html(app.helpers.formatTime(d)),"episode"==a.item.type&&app.VideoController.invalidateCache("episode",a.item)},nowPlayingMajor:function(){var a=app.playerState.xbmc.getNowPlaying();if(this.$nowPlaying.find("#playing-thumb").css("background-image","url('"+app.image.url(a.item.thumbnail)+"')"),1==app.cached.nowPlaying.activePlayer&&this.$nowPlaying.find("#playing-thumb").attr("#remote"),$(".playing-song-title").html(a.item.label).attr("title",a.item.album).attr("href","#album/"+a.item.albumid),"#"==location.hash||""===location.hash&&"xbmc"==app.audioStreaming.getPlayer()){var b=$(".backstretch img"),c=b.attr("src"),d=app.image.url(a.item.fanart,"fanart");b.length>0&&c!=d&&$.backstretch(d)}$(".playing-fanart").css("background-image",'url("'+app.image.url(a.item.fanart,"fanart")+'")');var e;e=0===app.playerState.xbmc.getNowPlaying("activePlayer")?app.AudioController:app.VideoController,e.playlistRender(function(){$sb=$("#sidebar-second"),$(".playlist-pos-"+a.player.position,$sb).scrollTo($(".playing-row"),0,{offset:{top:-11}})})},tagPlayingRow:function(){var a=app.playerState.xbmc.getNowPlaying();this.$songs.each(function(b,c){var d=$(c);d.attr("data-songid")!=a.item.id||d.hasClass("playlist-item")?d.hasClass("playlist-item")&&(d.data("id")!=a.player.position||d.parent().hasClass("browser-player")||d.data("playlistId")!=a.activePlayer||d.addClass("playing-row")):d.addClass("playing-row")})},setTitle:function(){var a=app.cached.nowPlaying,b=a.item.label;"xbmc"==app.audioStreaming.getPlayer()&&(document.title=("playing"==a.status?"▶ ":"")+(void 0!==b?b+" | ":"")+"Chorus.")},notPlaying:function(){var a=app.cached.nowPlaying;document.title="Chorus.",$(".playing-song-title").html("Nothing Playing"),$(".playing-song-meta").html(""),$("ul.playlist div.playlist-item.playing-row").removeClass("playing-row"),app.shellView.$progressSlider.slider("value",0),this.$nowPlaying.find("#playing-thumb").attr("src",app.image.url("")).attr("title","").parent().attr("href","#albums");var b=$("#time");b.find(".time-cur").html("0"),b.find(".time-total").html("0:00"),app.shellView.$volumeSlider.slider("value",a.volume.volume)},playerCron:function(){var a=app.cached.nowPlaying,b=app.helpers.varGet("lastState",""),c="undefined"==typeof b||"undefined"==typeof b.volume,d={},e="",f="";$("a.ui-slider-handle",app.shellView.$volumeSlider).hasClass(".ui-slider-active")||(app.shellView.$volumeSlider.slider("value",a.volume.volume),0===a.volume.volume?$("body").addClass("muted"):$("body").removeClass("muted")),(c||"undefined"==typeof b.player||b.player.repeat!=a.player.repeat)&&(d=$(".player-repeat"),e=d.attr("title"),f="off"==a.player.repeat?"Repeat is off":"Currently repeating "+a.player.repeat,e!=f&&d.attr("title",f)),(c||b.player.shuffled!=a.player.shuffled)&&(d=$(".player-random"),e=d.attr("title"),f="Random is "+(a.player.shuffled===!0?"On":"Off"),e!=f&&d.attr("title",f)),app.helpers.varSet("lastState",a)}}),app.PlaylistView=Backbone.View.extend({tagName:"div",className:"playlist-wrapper",events:{"click .player-audio":"viewAudio","click .player-video":"viewVideo"},initialize:function(){},render:function(){this.$el.empty();var a=0,b=$('<ul class="active-player-tabs"></ul>'),c=$('<ul class="playlist"></ul>'),d="undefined"!=typeof this.model.playlistId?this.model.playlistId:0;return _.each(this.model.models,function(b){b.pos=a,a++,b.playlistId=d,c.append(new app.PlaylistItemView({model:b}).render().el)},this),this.$el.append(c),app.playlists.getThumbsUp(),b.append('<li class="player-audio'+(0===d?" active":"")+'">Audio</li>'),b.append('<li class="player-video'+(1==d?" active":"")+'">Video</li>'),this.$el.prepend(b),this.$el.addClass("plid-"+d),$sortable=$("ul.playlist",this.$el),$sortable.sortable({placeholder:"playlist-item-placeholder",handle:".playlist-play",items:"> li",axis:"y",update:function(a,b){app.playlists.sortableChangePlaylistPosition(a,b)}}).disableSelection(),this},viewAudio:function(){app.AudioController.playlistRender()},viewVideo:function(){app.VideoController.playlistRender()}}),app.PlaylistItemView=Backbone.View.extend({tagName:"li",className:"playlist-item",events:{"dblclick .playlist-play":"playPosition","click .removebtn":"removePosition","click .playbtn":"playPosition","click .repeating":"cycleRepeat","click .playlist-song-thumbsup":"thumbsUp","click .playlist-song-menu":"menu"},initialize:function(){},render:function(){var a=this.model,b=app.playerState.xbmc.getNowPlaying();return a.id="undefined"!=typeof a.id?a.id:"file",a.albumid="undefined"!=typeof a.albumid?a.albumid:"file",a.subLink=this.buildSubLink(a),a.url="file"!=a.albumid?"#album/"+a.albumid:app.helpers.buildUrl(a.type,a.id,a),this.$el.html(this.template(a)),"playing"!=b.status&&"paused"!=b.status||b.player.playlistid!=a.playlistId||b.player.position!=a.pos||$(".playlist-item",this.$el).addClass("playing-row"),"file"==this.model.id&&$(".song",this.$el).data("file",a.file),$(".song",this.$el).data("playlistId",a.playlistId),"file"!=this.model.id&&app.playlists.isThumbsUp("song",this.model.id)&&this.$el.addClass("thumbs-up"),this},menu:function(){app.helpers.menuDialog(1==this.model.playlistId?app.helpers.menuTemplates("movie",this.model):app.helpers.menuTemplates("song",this.model))},playPosition:function(){if("local"==this.model.list)app.audioStreaming.playPosition(this.model.pos);else{var a=1==this.model.playlistId?app.VideoController:app.AudioController;a.playPlaylistPosition(this.model.pos,function(){a.playlistRender()})}},removePosition:function(){if("local"==this.model.list)app.audioStreaming.deleteBrowserPlaylistSong(this.model.pos),app.audioStreaming.renderPlaylistItems();else{var a=1==this.model.playlistId?app.VideoController:app.AudioController;a.removePlaylistPosition(this.model.pos,function(){a.playlistRender()})}},cycleRepeat:function(){$("#footer").find(".player-repeat").trigger("click")},thumbsUp:function(a){a.stopPropagation();var b=this.model.id,c=1==this.model.playlistId?"video":"song",d=app.playlists.isThumbsUp(c,b)?"remove":"add",e=$(a.target).closest("li");app.playlists.setThumbsUp(d,c,b),e.toggleClass("thumbs-up")},buildSubLink:function(a){var b,c,d;if("song"==a.type){if(a.albumArtistString="undefined"!=typeof a.albumartist&&"undefined"!=typeof a.albumartist[0]?a.albumartist[0]:"",a.artistString="undefined"!=typeof a.artist&&"undefined"!=typeof a.artist[0]?a.artist[0]:"",d="Track: "+this.model.track+" Duration: "+app.helpers.formatTime(app.helpers.secToTime(this.model.duration)),b="#search/"+(""!==a.albumArtistString?a.albumArtistString:a.artistString),c=""!==a.artistString?a.artistString:a.albumArtistString,""===a.artistString&&""===a.albumArtistString)return""}else if("movie"==a.type)c=a.year,b="#movies/year/"+a.year,d="More movies from "+c;else{if("episode"!=a.type)return"";c="S"+a.season+" E"+a.episode+" - "+a.showtitle,b="#tvshow/"+a.tvshowid+"/"+a.season,d="More episodes from season"+a.season}return'<a title="'+d+'" href="'+b+'">'+c+"</a>"}}),app.PlaylistCustomListsView=Backbone.View.extend({tagName:"ul",className:"custom-lists",events:{"dblclick li":"replacePlaylist"},initialize:function(){},render:function(){this.$el.empty();var a=0,b=this;_.each(this.model.models,function(b){b.pos=a,a++;var c=new app.PlaylistCustomListItemView({model:b}).render();this.$el.append(c.el)},this),this.$el.prepend('<li class="list-heading"><i class="fa fa-file"></i> Lists</li>');var c=$('<span class="menu lists-menu"><i class="fa fa-ellipsis-v"></i></span>');return c.on("click",function(){b.showDialog()}),$(".list-heading",this.$el).append(c),this},showDialog:function(){var a={title:"Custom Lists",key:"customList",omitwrapper:!0,items:[{url:"#","class":"lists-new",title:"Add a new list",callback:function(){app.playlists.saveCustomPlayListsDialog("song",[],!0)}},{url:"#","class":"lists-remove-all",title:"Delete all lists",callback:function(){app.helpers.confirm("Are you sure? This will remove ALL browser playlists and cannot be undone!",function(){app.storageController.setStorage(app.playlists.storageKeyLists,[]),app.notification("All playlists removed, refresh your browser")})}},{url:"#","class":"lists-import",title:"Import a list",callback:function(){app.ui.featureNotBuiltDialog()}}]};app.helpers.menuDialog(a)}}),app.PlaylistCustomListItemView=Backbone.View.extend({tagName:"li",className:"list-item",events:{"dblclick .name":"replacePlaylist"},initialize:function(){},render:function(){return this.$el.html(this.template(this.model.attributes)),"playlist"==app.helpers.arg(0)&&app.helpers.arg(1)==this.model.attributes.id&&this.$el.find("a").addClass("active"),this}}),app.PvrChannelsView=Backbone.View.extend({tagName:"ul",className:"channel-list",initialize:function(){},render:function(){return this.$el.empty(),_.each(this.model.models,function(a){this.$el.append(new app.PvrChannelListItem({model:a}).render().$el)},this),this}}),app.PvrChannelListItem=Backbone.View.extend({tagName:"li",className:"row-item",events:{"dblclick .name":"play","click .channel-play":"play","click .channel-thumbsup":"thumbsUp","click .channel-menu":"menu"},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.close,this)},render:function(){return app.playlists.isThumbsUp("channel",this.model.attributes.channelid)&&this.$el.addClass("thumbs-up"),this.$el.html(this.template(this.model.attributes)),this},play:function(){app.pvr.playChannel(this.model.attributes.channelid,function(){})},thumbsUp:function(){},menu:function(){}}),app.RemoteView=Backbone.View.extend({tagName:"div",className:"xbmc-remote-wrapper",initialize:function(){},events:{"click .input-button":"inputButton","click .player-button":"playerButton","click .power-button":"powerButton"},render:function(){var a={playing:!1,item:{}};this.$el.html(this.template(a));var b=app.playerState.xbmc.getNowPlaying();return $(".playing-fanart",this.$el).css("background-image",'url("'+app.image.url(b.item.fanart,"fanart")+'")'),$(".fa",this.$el).disableSelection(),this},inputButton:function(a){var b=$(a.target),c=b.data("type");app.xbmcController.input(c)},playerButton:function(a){var b=$(a.target),c=b.data("type"),d=app.playerState.xbmc.getNowPlaying();switch(c){case"Stop":app.xbmcController.command("Player.Stop",[d.activePlayer])}},powerButton:function(){app.helpers.menuDialog(this.powerDialogItems())},powerDialogItems:function(){return{title:"Power Down",key:"powerDown",omitwrapper:!0,items:[{url:"#","class":"xbmc-quit",title:"Quit XBMC",callback:function(){app.xbmcController.command("Application.Quit")}},{url:"#","class":"system-hibernate",title:"Hibernate",callback:function(){app.xbmcController.command("System.Hibernate")}},{url:"#","class":"system-reboot",title:"Reboot",callback:function(){app.xbmcController.command("System.Reboot")}},{url:"#","class":"system-shutdown",title:"Shutdown",callback:function(){app.xbmcController.command("System.Shutdown")}},{url:"#","class":"system-nothing",title:"None of the above",callback:function(){}}]}}}),app.searchView=Backbone.View.extend({initialize:function(){var a={key:"search",callbacks:{}};this.mixedView=new app.MixedView({model:a})},songsLoaded:!1,render:function(){var a=this.model.key,b=this;if(a.length>1){app.router.navigate("#search/"+a),app.shellView.selectMenuItem("search","no-sidebar");var c={song:function(){b.searchSongs(a)},artist:function(){b.searchArtists(a)},album:function(){b.searchAlbums(a)},tvshow:function(){b.searchTv(a)},movie:function(){b.searchMovies(a)},addon:function(){b.searchAddOns(a)}};b.mixedView.addEntity("addon"),b.mixedView.setCallbacks(c);var d=$("#content"),e=this.mixedView.render().$el;d.html(e),app.ui.setTitle('<a href="#search">Search </a>'),b.searchAddOns(a)}},searchAddOns:function(a){app.addOns.ready(function(){var b=$("#search-addons");b.empty(),app.addOns.invokeAll("searchAddons",b,a)})},searchArtists:function(a){this.searchSectionPreLoadRender(a,"artist","ArtistCollection","AristsRandView")},searchAlbums:function(a){this.searchSectionPreLoadRender(a,"album","AlbumsCollection","SmallAlbumsList")},searchMovies:function(a){var b=this,c=new app.MovieAllCollection;c.fetch({success:function(){b.searchSectionRender(a,"movie","MovieAllCollection","CustomMovieCollection","MovieListView")}})},searchTv:function(a){var b=this;b.searchSectionPreLoadRender(a,"tvshow","TvshowAllCollection","TvshowListView")},searchSongs:function(a){var b=this;b.songsLoaded===!0?b.searchSectionRender(a,"song","SongCollection","CustomSongCollection","SongListView"):app.store.libraryCall(function(){b.searchSectionRender(a,"song","SongCollection","CustomSongCollection","SongListView"),b.songsLoaded=!0},"songsReady")},stringMatchFilter:function(a,b){var c=a.attributes.label;return c.toLowerCase().indexOf(b.toLowerCase())>-1},searchSectionRender:function(a,b,c,d,e){var f=$("#search-"+b+"s"),g=this,h=[],i=b+"id";app.cached["search"+c]=new app[c],app.cached["search"+c].fetch({success:function(c){f.empty();var j=c.models.filter(function(b){return g.stringMatchFilter(b,a)});if(_.each(j,function(a){h.push(a.attributes[i])}),h.length>0){var k=new app[d];k.fetch({items:h,success:function(a){_.defer(function(){g.mixedView.renderPane(b,a,e)})}})}else _.defer(function(){g.mixedView.noResult(b)})}})},searchSectionPreLoadRender:function(a,b,c,d){var e=this,f=[];app.cached["search"+c]=new app[c],app.cached["search"+c].fetch({success:function(c){f=c.models.filter(function(b){return e.stringMatchFilter(b,a)}),c.models=f,_.defer(function(){e.mixedView.renderPane(b,c,d)})}})}}),app.ShellView=Backbone.View.extend({initialize:function(){var a=$(window),b=$("body"),c=this;app.cached.keyupTimeout=0,c.pageChange(location.hash,"#init"),a.bind("hashchange",function(a){var b=location.hash,d=app.vars.lastHash,e="undefined"==typeof d?"#":d;b!=e&&c.pageChange(b,e),app.vars.backHash=d,app.vars.lastHash=b,$(window).trigger("pageChange",[a,b,e])}),a.bind("scroll",function(){a.scrollTop()>50?b.addClass("fixed-header"):b.removeClass("fixed-header")})},render:function(){this.$el.html(this.template());return app.AudioController.playlistRender(),this.$progressSlider=$("#progress-bar",this.el),this.$progressSlider.slider({range:"min",value:0,min:0,max:100,start:function(){app.ui.timerStop()},stop:function(a,b){app.AudioController.seek(b.value),app.ui.timerStart()}}),this.$volumeSlider=$("#volume",this.el),this.$volumeSlider.slider({range:"min",value:0,min:0,max:100,stop:function(a,b){app.AudioController.setVolume(b.value)}}),$("img.content-lazy").lazyload({event:"contentLazy"}),app.playerState.xbmc.fetchRemote(function(){setInterval(app.playerState.xbmc.fetch,5e3),app.ui.timerStart(),app.notifications.init()},!0),this.$el.append((new app.RemoteView).render().$el),this},events:{"keyup #search":"onkeyupSearch","click #search-this":"search","keypress #search":"onkeypressSearch","click #logo":"home","click .player-prev":"playerPrev","click .player-next":"playerNext","click .player-play":"playerPlay","click .player-mute":"playerMute","click .player-repeat":"playerRepeat","click .player-random":"playerRandom","click .song-image":"remoteControl","click .playlist-primary-tab":"primaryTabClick","click .save-playlist":"savePlayList","click .clear-playlist":"clearPlaylist","click .refresh-playlist":"refreshPlaylist","click .new-custom-playlist":"newCustomPlaylist","click .party-mode":"partyMode","click .about-dialog":"about","click .browser-view-xbmc":"viewXbmc","click .browser-view-local":"viewLocal","click .browser-player-play":"localTogglePlay","click .browser-player-prev":"localPrev","click .browser-player-next":"localNext","click .browser-player-repeat":"localRepeat","click .browser-player-random":"localRandom","click .browser-player-mute":"localMute","click .toggle-ss":"toggleSidebarSecondVisibility","click .toggle-vol":"toggleVolumeVisibility","click .toggle-search":"toggleSearchVisibility"},pageChange:function(){var a=app.helpers.arg(0);$("body").removeClass(function(a,b){return(b.match(/\bsection\S+/g)||[]).join(" ")}).addClass("section-"+a)},primaryTabClick:function(a){$thisTab=$(a.target),$thisTab.hasClass("playlist-primary-tab")||($thisTab=$thisTab.closest("li.playlist-primary-tab"));var b=$thisTab.data("pane");app.playlists.changePlaylistView(b),("xbmc"==b||"local"==b)&&app.settings.set("lastPlayer",b)},search:function(){var a=$("#search");app.cached.searchView=new app.searchView({model:{key:a.val()}}),app.cached.searchView.render()},onkeyupSearch:function(){var a=200;$("#search").keyup(function(){clearTimeout(app.cached.keyupTimeout),app.cached.keyupTimeout=setTimeout(function(){document.location="#search/"+encodeURIComponent($("#search").val())},a)})},onkeypressSearch:function(a){13===a.keyCode&&a.preventDefault()},selectMenuItem:function(a,b){var c=$("body"),d="undefined"!=typeof b&&"sidebar"==b?"open":"close";if(app.helpers.toggleSidebar(d),"home"==a?c.addClass("home"):($(".backstretch").length>0&&$(".backstretch").remove(),c.removeClass("home")),a){var e=$(".mainnav",this.el),f=e.find("li.nav-"+a);e.find("li").removeClass("active"),f.addClass("active")}},playerPrev:function(){app.AudioController.sendPlayerCommand("Player.GoTo","previous")},playerNext:function(){app.AudioController.sendPlayerCommand("Player.GoTo","next")},playerPlay:function(){app.AudioController.sendPlayerCommand("Player.PlayPause","toggle")},playerRepeat:function(){app.AudioController.sendPlayerCommand("Player.SetRepeat","cycle")},playerRandom:function(){app.AudioController.sendPlayerCommand("Player.SetShuffle","toggle")},remoteControl:function(a){"remote"==app.helpers.arg(0)?(a.preventDefault(),window.history.back()):document.location="#remote"},playerMute:function(){var a,b=this.$volumeSlider.slider("value"),c=$("body");b>0?(this.lastVol=b,app.AudioController.setVolume(0),this.$volumeSlider.slider("value",0),c.addClass("muted")):(a=app.helpers.exists(this.lastVol)&&this.lastVol>0?this.lastVol:50,app.AudioController.setVolume(a),this.$volumeSlider.slider("value",a),c.removeClass("muted"))},updateState:function(a){app.cached.playerState=new app.playerStateView({model:a}),app.cached.playerState.render()},savePlayList:function(a){a.preventDefault(),app.playlists.saveCustomPlayListsDialog()},refreshPlaylist:function(a){a.preventDefault(),this.getController().playlistRender()},newCustomPlaylist:function(a){a.preventDefault(),app.playlists.saveCustomPlayListsDialog("song",[])},partyMode:function(a){a.preventDefault();var b=this;this.getController().setPartyMode(function(){b.updateState()})},clearPlaylist:function(a){a.preventDefault();var b=this.getController();b.playlistClear(function(){b.playlistRender()})},getController:function(){var a={};return a="local"==app.audioStreaming.getPlayer()?app.audioStreaming:$(".plid-1").length>0?app.VideoController:app.AudioController},about:function(a){a.preventDefault(),app.helpers.aboutDialog()},scanLibrary:function(){},viewXbmc:function(a){a.preventDefault(),app.audioStreaming.setPlayer("xbmc")},viewLocal:function(a){a.preventDefault(),app.audioStreaming.setPlayer("local")},localTogglePlay:function(a){a.preventDefault(),app.audioStreaming.togglePlay()},localPrev:function(a){a.preventDefault(),app.audioStreaming.prev()},localNext:function(a){a.preventDefault(),app.audioStreaming.next()},localRepeat:function(a){a.preventDefault(),app.audioStreaming.repeat()},localRandom:function(a){a.preventDefault(),app.audioStreaming.random()},localMute:function(a){a.preventDefault(),app.audioStreaming.mute()},toggleSidebarSecondVisibility:function(){$("body").toggleClass("ss-open")},toggleVolumeVisibility:function(){$("body").toggleClass("vol-open")},toggleSearchVisibility:function(){$("body").toggleClass("search-open")
}}),app.SongListView=Backbone.View.extend({tagName:"ul",className:"song-list",initialize:function(){},render:function(){return this.$el.empty(),_.each(this.model.models,function(a){this.$el.append(new app.SongView({model:a}).render().$el)},this),this}}),app.SongView=Backbone.View.extend({tagName:"li",className:"song-row",events:{"dblclick .song-title":"playSong","click .song-play":"playSong","click .song-add":"addSong","click .song-thumbsup":"thumbsUp","click .song-menu":"menu"},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.close,this)},render:function(){return app.playlists.isThumbsUp("song",this.model.attributes.songid)&&this.$el.addClass("thumbs-up"),this.$el.html(this.template(this.model.attributes)),this},menu:function(){app.helpers.menuDialog(app.helpers.menuTemplates("song",this.model.attributes))},playSong:function(){var a=this.model.attributes;"local"==app.audioStreaming.getPlayer()?app.playlists.playlistAddItems("local","append","song",a.songid,function(){app.audioStreaming.playPosition(app.audioStreaming.playList.items.models.length-1)}):(app.playlists.changePlaylistView("xbmc"),app.AudioController.insertAndPlay("songid",a.songid,function(){app.notification(a.label+" added to the playlist"),app.AudioController.playlistRender()}))},addSong:function(){var a=this.model.attributes;"local"==app.audioStreaming.getPlayer()?app.playlists.playlistAddItems("local","append","song",a.songid):app.AudioController.playlistAdd("songid",a.songid,function(){app.notification(a.label+" added to the playlist"),app.AudioController.playlistRender()})},thumbsUp:function(a){var b=this.model.attributes.songid,c=app.playlists.isThumbsUp("song",b)?"remove":"add",d=$(a.target).closest("li");app.playlists.setThumbsUp(c,"song",b),d.toggleClass("thumbs-up")}}),app.TagsView=Backbone.View.extend({tagName:"div",className:"tag-list",initialize:function(){},events:{},render:function(){return this.$el.empty(),_.each(this.model.models,function(a){this.$el.append(new app.TagItemView({model:a}).render().el)},this),this.$el.addClass("tag-type-"+this.model.type),this},renderTagItems:function(a,b,c){if(void 0!==a.id&&""!==a.id){var d,e=a.id,f=a.tag,g={};g[f]=parseInt(e);var h=$("#tag-container-"+e),i=h.parent();i.addClass("open"),h.html('<div class="inline-loading">Loading the '+i.find(".tag-label").html()+" "+a.type+"s...</div>"),d=new app[b],d.fetch({filter:g,success:function(a){var b=new app[c]({model:a});h.html(b.render().$el),app.image.triggerContentLazy(),$(window).scrollTo(i,0,{offset:{top:-40}})}})}}}),app.TagItemView=Backbone.View.extend({tagName:"div",className:"tag-list-item",initialize:function(){},events:{"click .tag-label":"toggleItems"},render:function(){var a=this.model.attributes;return this.$el.empty(),this.$el.append($("<a />",{html:a.label,href:a.url,"class":"tag-label","data-id":a.id})),this.$el.append($("<div />",{id:"tag-container-"+a.id,"class":"tag-container"})),this},toggleItems:function(a){var b=this.model.attributes,c=$("#tag-container-"+b.id).closest(".tag-list-item");c.hasClass("open")&&(a.preventDefault(),c.removeClass("open"))}}),app.ThumbsupView=Backbone.View.extend({initialize:function(){var a={key:"thumbsup",callbacks:{}};this.mixedView=new app.MixedView({model:a})},songsLoaded:!1,render:function(){var a=this,b=app.playlists.isAnyThumbsUp();if(app.shellView.selectMenuItem("thumbsup","no-sidebar"),app.ui.setTitle('<i class="fa fa-thumbs-up"></i> Thumbs Up'),b){var c={song:function(){a.getItems("song","CustomPlaylistSongListView")},artist:function(){a.getItems("artist","AristsRandView")},album:function(){a.getItems("album","SmallAlbumsList")},tvshow:function(){a.getItems("tvshow","TvshowListView")},movie:function(){a.getItems("movie","MovieListView")}};a.mixedView.setCallbacks(c),this.$el.html(this.mixedView.render().$el)}else{var d='<div class="help-page"></h3><h3 class="entity-heading"><i class="fa fa-thumbs-up entity-icon" title="Don\'t click this Thumb! thumbs are on albums, songs, movies, etc."></i> Click a thumb to start</h3></div>';this.$el.html(d)}return this},getItems:function(a,b){var c=this,d=new app.ThumbsUpCollection;d.fetch({name:a,success:function(d){_.defer(function(){0===d.models.length?c.mixedView.noResult(a):c.mixedView.renderPane(a,d,b)})}})}}),app.TvshowsView=Backbone.View.extend({initialize:function(){},render:function(){return this}}),app.TvshowListView=Backbone.View.extend({tagName:"ul",className:"video-list tvshow-page-list",initialize:function(){var a=this;this.model.on("reset",this.render,this),this.model.on("add",function(b){a.$el.append(new app.TvshowListItemView({model:b}).render().el)})},events:{"click .next-page":"nextPage"},render:function(){return this.$el.empty(),_.each(this.model.models,function(a){this.$el.append(new app.TvshowListItemView({model:a}).render().el)},this),this.$el.find("img").lazyload({threshold:200}),this},nextPage:function(a){app.pager.nextPage($(a.target),"tvshow")},backFromTvshow:function(a,b){var c=$(window);if(a===!0&&"undefined"!=typeof app.vars.backHash){var d=app.vars.backHash.split("/");"#tvshow"==d[0]&&(c.scrollTo($(".tvshow-row-"+d[1]),0,{offset:-200}),b=!0)}return b}}),app.TvshowListItemView=Backbone.View.extend({tagName:"li",className:"tvshow-item-content",events:{"click .tvshow-play":"playTvshow","click .tvshow-add":"add","click .tvshow-thumbsup":"thumbsUp","click .actions-wrapper":"view"},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.close,this)},render:function(){this.model.attributes.type="tvshow";var a=this.model.attributes;return a.label?(a.watched=app.VideoController.watchedStatus(a),a.thumbsup=app.playlists.isThumbsUp("tvshow",a.tvshowid),this.$el.html(this.template(a)),this):this},view:function(){document.location="#tvshow/"+this.model.attributes.tvshowid},add:function(a){a.preventDefault(),a.stopPropagation();var b=this.model.attributes;app.VideoController.tvshowAdd(b,function(){app.VideoController.playlistRender()})},play:function(a){a.preventDefault(),a.stopPropagation();var b=this.model.attributes;app.VideoController.tvshowPlay(b,function(){app.VideoController.playlistRender()})},thumbsUp:function(a){a.preventDefault(),a.stopPropagation();var b=this.model.attributes,c=app.playlists.isThumbsUp("tvshow",b.tvshowid)?"remove":"add",d=$(a.target).closest(".tvshow-actions");app.playlists.setThumbsUp(c,"tvshow",b.tvshowid),d.toggleClass("thumbs-up")}}),app.TvshowView=Backbone.View.extend({allTvshowCache:[],initialize:function(){var a=this,b=new app.TvshowAllCollection;b.fetch({success:function(b){a.allTvshowCache=b}})},events:{"click .library-back":"libraryBack","click .library-next":"libraryNext","click .tvshow-play":"play","click .tvshow-add":"add","click .tvshow-thumbsup":"thumbsUp","click .tv-stream":"stream","click .tvshow-menu":"menu"},render:function(){var a=this.model.attributes,b=this;return a.type=void 0!==a.type?a.type:"tvshow",a.thumbsup=app.playlists.isThumbsUp("tvshow",a.tvshowid),a.widethumb="episode"==a.type?a.thumbnail:a.fanart,a.watchedText=b.watchedStatsParse(),a.watched=app.VideoController.watchedStatus(a),this.$el.html(this.template(a)),_.defer(function(){var b=$("#fanart-background",this.$el),c=app.image.url(a.fanart,"fanart");b.backstretch(c)}),"tvshow"==a.type&&a.seasons.length>0&&(app.cached.tvSeasonListView=new app.TvSeasonListView({model:a.seasons}),$("#seasons",b.$el).html(app.cached.tvSeasonListView.render().$el)),("season"==a.type||"episode"==a.type)&&(app.cached.tvepisodeCollection=new app.TvepisodeCollection,app.cached.tvepisodeCollection.fetch({tvshowid:a.tvshowid,season:a.season,success:function(c){c.length>0&&(app.cached.tvSeasonListView=new app.TvSeasonListView({model:c}),$("#seasons",b.$el).html(app.cached.tvSeasonListView.render().$el).addClass("episodes"),"episode"==a.type&&$(".row-episode-"+a.episodeid,b.$el).addClass("active"))}})),this},libraryBack:function(a){a.preventDefault(),window.history.back()},libraryNext:function(a){a.preventDefault();var b=app.pager.libraryNav("tvshow",this.model.attributes.tvshowid,this.allTvshowCache.models);b.next>0&&(document.location="#tvshow/"+b.next)},menu:function(a){a.stopPropagation(),a.preventDefault();var b=app.helpers.menuTemplates("tvshow",this.model.attributes);app.helpers.menuDialog(b)},thumbsUp:function(a){a.stopPropagation(),a.preventDefault();var b=this.model.attributes,c=app.playlists.isThumbsUp("tvshow",b.tvshowid)?"remove":"add",d=$(a.target).closest(".tvshow-actions");app.playlists.setThumbsUp(c,"tvshow",b.tvshowid),d.toggleClass("thumbs-up")},play:function(a){a.preventDefault(),a.stopPropagation(),app.VideoController.tvshowPlay(this.model.attributes,function(){app.VideoController.playlistRender()})},add:function(a){a.preventDefault(),a.stopPropagation(),app.VideoController.tvshowAdd(this.model.attributes,function(){app.VideoController.playlistRender()})},stream:function(a){a.preventDefault();var b=$(a.target).data("player");app.VideoController.stream(b,this.model.attributes)},watchedStatsParse:function(){var a=this.model.attributes;switch(a.type){case"tvshow":}return"text"}}),app.TvSeasonListView=Backbone.View.extend({tagName:"ul",className:"video-list tvseason-page-list",initialize:function(){},render:function(){return this.$el.empty(),"tvshow"==app.helpers.arg(0)&&this.model.models.sort(function(a,b){return""!==a.attributes.episodeid?app.helpers.aphabeticalSort(a.attributes.episode,b.attributes.episode):app.helpers.aphabeticalSort(a.attributes.season,b.attributes.season)}),_.each(this.model.models,function(a){a.attributes.type=""!==a.attributes.episodeid?"episode":"season",this.$el.append(new app.TvSeasonListItemView({model:a}).render().el)},this),this}}),app.TvSeasonListItemView=Backbone.View.extend({tagName:"li",className:"tv-item-content",events:{"click .actions-wrapper":"view","click .tv-play":"play","click .tv-watched":"toggleWatched","click .tv-add":"add"},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.close,this)},render:function(){var a=this.model.attributes,b="episode"==a.type;return a.watched=app.VideoController.watchedStatus(a),a.subText=b?"Episode "+a.episode:a.episode+" Episodes",a.label=b&&""!==a.title?a.title:a.label,this.$el.html(this.template(a)),this},view:function(){document.location=this.model.attributes.url},play:function(a){a.preventDefault(),a.stopPropagation(),app.VideoController.tvshowPlay(this.model.attributes,function(){app.VideoController.playlistRender()})},add:function(a){a.preventDefault(),a.stopPropagation(),app.VideoController.tvshowAdd(this.model.attributes,function(){app.VideoController.playlistRender()})},toggleWatched:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target).closest(".card");this.model.attributes.playcount=b.hasClass("watched-yes")?1:0,app.VideoController.toggleWatched("episode",this.model.attributes,function(a){a===!0?b.addClass("watched-yes").removeClass("watched-no"):b.addClass("watched-no").removeClass("watched-yes")})}}),app.TvshowTagListView=Backbone.View.extend({tagName:"div",className:"tvshow-tag-list",initialize:function(){var a=this.model.type,b=this.model.tag;this.tagType=a+b},render:function(){var a,b=this,c=$("#content"),d="";return"genreid"==this.model.tag?(d="Genres",a=new app.VideoGenreCollection):d="Years",app.ui.setTitle("TV",{addATag:"#mytv",icon:"desktop",subTitle:d}),c.html('<div class="loading-box">Loading TV</div>'),a.fetch({type:"tvshow",success:function(a){a.type=b.tagType,app.cached.genresView=new app.TagsView({model:a}),c.html(app.cached.genresView.render().$el),c.prepend(app.filters.renderFilters("tvshow")),b.renderTagItems()}}),this},renderTagItems:function(){if(void 0!==this.model.id&&""!==this.model.id){var a={};if(a[this.model.tag]=parseInt(this.model.id),0===$(".tag-type-"+this.tagType).length)this.render();else{var b=new app.TagsView({model:this.model});b.renderTagItems(this.model,"TvshowFilteredCollection","TvshowListView")}}},watchCTA:function(){}}),app.XbmcView=Backbone.View.extend({tagName:"div",className:"xbmc-page",initialize:function(){},render:function(){var a={jsonrpc:"An interface to deal directly with the xbmc jsonrpc",storage:"Local Storage Data Dump",changelog:"Updates to Chorus"};switch(this.model){case"jsonrpc":return this.$el=(new app.XbmcJSONrpcView).render().$el,this;case"storage":return this.$el=(new app.XbmcLocalDumpView).render().$el,this;case"changelog":return this.$el=(new app.XbmcChorusChangeLog).render().$el,this}this.$el=$('<ul class="page-list"></ul>');for(var b in a){var c=$("<li>").append('<h3><a href="#xbmc/'+b+'">'+b+"</a></h3>").append("<p>"+a[b]+"</p>");this.$el.append(c)}return this}}),app.XbmcLocalDumpView=Backbone.View.extend({tagName:"div",className:"xbmc-page",initialize:function(){},render:function(){var a=[app.playlists.storageKeyLists,app.playlists.storageKeyThumbsUp],b=this;return this.$el.empty(),$(a).each(function(a,c){var d=$("<pre>");d.prependTo("<h2>"+c+"</h2>"),app.storageController.getStorage(c,function(a){console.log(a);var e={};e[c]=a,d.html(JSON.stringify(e,null,4)),b.$el.append(d)})}),this}}),app.XbmcChorusChangeLog=Backbone.View.extend({tagName:"div",className:"xbmc-page changelog",render:function(){var a=this;return this.$el.html("Loading ChangeLog"),$.get("changelog.txt",function(b){a.$el.html(app.nl2br(b)),app.ui.setTitle('<a href="#xbmc/home">XBMC</a>Chorus ChangeLog')}),this}}),app.XbmcJSONrpcView=Backbone.View.extend({tagName:"div",className:"xbmc-page",events:{"change #method":"changeMethod","click #doit":"executeQuery"},initialize:function(){},render:function(){app.ui.setTitle('<a href="#xbmc/home">XBMC</a>jsonRPC'),this.$el.empty();var a='<h3>JSONrpc tester</h3><p class="alert alert-warning">Use this to test out commands on the api, be careful - you could break something</p><div id="execute"><strong>Method:</strong> <select id="method"><option>Loading...</option></select> <span id="method-name"></span><div id="description">Loading</div><span id="params"></span></div><h3>Result</h3><pre id="result"></pre>';return this.$el.html(a),this.$select=$("#method",this.$el),this.$res=$("#result",this.$el),this.$params=$("#params",this.$el),this.executeForm(),this},executeForm:function(){var a=this;app.xbmcController.command("JSONRPC.Introspect",[],function(b){app.cached.Introspect=b.result,a.$select.empty();for(var c in b.result.methods)a.$select.append($("<option>",{value:c,text:c}));console.log(b),a.$res.html(JSON.stringify(b,null,4)),a.changeMethod(),a.$select.chosen({search_contains:!0})})},changeMethod:function(){var a=this.$select.val(),b=app.cached.Introspect.methods[a];this.$params.empty(),$("#description",this.$el).html(b.description),$("#method-name",this.$el).html(a);for(var c in b.params){var d=b.params[c],e=$("<div />"),f={};d.$ref&&(d.type=app.cached.Introspect.types[d.$ref]),d.type="undefined"==typeof d.type?"":d.type;var g=("undefined"==typeof d.description?"":d.description+"\n\r")+(""!==d.type?JSON.stringify(d.type,null,2):"");if("undefined"!=typeof d.type.enums&&d.type.enums.length>0){f=$("<select>");for(var h in d.type.enums)f.append($("<option>",{value:d.type.enums[h],text:d.type.enums[h]}));f.addClass("select")}else f=$("<input>",{type:"text",value:"",placeholder:d.default});f.addClass("paramEl"),e.append($("<label>"+d.name+(d.required?"*":"")+(this.isEncoded("t",d,f)?" (JSON Encoded)":"")+"</label> ")).append(f).append($("<pre>"+g+"</pre>")).addClass("param "+(d.required?"required":"")),this.$params.append(e)}var i=$("<div />").addClass("param actions").append('<button class="btn" id="doit">Execute</button>');this.$params.append(i),this.$res.html(JSON.stringify(b,null,4))},executeQuery:function(){var a=$("#params .paramEl"),b=this.$select.val(),c=app.cached.Introspect.methods[b],d=[],e=this;a.each(function(a,b){var f=$(b).val(),g=c.params[a];console.log(f),e.isEncoded(f,g,$(b))&&(f=$.parseJSON(f),console.log(f)),f.length>0&&d.push(f)}),console.log(d),app.xbmcController.command(b,d,function(a){console.log(a),e.$res.html(JSON.stringify(a,null,4)).removeClass("error"),$.scrollTo(e.$res)},function(a){e.$res.html(JSON.stringify(a,null,4)).addClass("error"),$.scrollTo(e.$res)})},isEncoded:function(a,b,c){return console.log(b),"integer"==b.type.type?!1:!c.hasClass("select")&&""!==a&&("object"==typeof b.type||"array"==b.type)}}),app.addOns.addon.pluginaudioradio_de={key:"pluginaudioradio_de",id:"plugin.audio.radio_de",label:"Radio Station",getAddon:function(){return app.addOns.getAddon(app.addOns.addon.pluginaudioradio_de.key)},getSearchPath:function(){return"plugin://plugin.audio.radio_de/stations/search/"},parseFileRecord:function(a){var b=app.addOns.addon.pluginaudioradio_de;return b.isRadio(a)&&"file"==a.filetype,a},clickDir:function(a){var b=app.addOns.addon.pluginaudioradio_de;return b.isRadio(a)&&a.file==b.getSearchPath()&&app.xbmcController.inputRequestedDialog("Enter the name of a station"),a},searchAddons:function(a,b){var c=$("<div></div>"),d=app.addOns.addon.pluginaudioradio_de,e=$("<div>",{"class":"addon-box",id:"radio-search"}),f=(d.getAddon(),$(d.searchHeading(d.label+" search for: <span>"+b+"</span>","radio"))),g=d.cache("get",b,!1);g!==!1?(c.html(g.render().$el),c.prepend(f)):(e.append(d.searchHeading("Search "+d.label+"s for: <span>"+b+"</span>","radio can-click")),c.append(e),$("#radio-search",c).on("click",function(){c.html($(d.searchHeading("Searching "+d.label+"s for: <span>"+b+"</span>","loading"))),d.getSearchResults(b,function(a){c.html(a.render().$el),c.prepend(f),d.cache("set",b,a)})})),$("#search-addons").append(c)},searchHeading:function(a,b){var c='<i class="fa fa-rss entity-icon" style="background-color: #44aa5b"></i>';return'<h3 class="search-heading entity-heading '+b+'">'+c+a+"</h3>"},cache:function(a,b,c){switch("undefined"==typeof app.cached.radioSearch&&(app.cached.radioSearch={}),a){case"get":return"undefined"==typeof app.cached.radioSearch[b]?c:app.cached.radioSearch[b];case"set":return app.cached.radioSearch[b]=c,app.cached.radioSearch[b]}},getSearchResults:function(a,b){var c=app.addOns.addon.pluginaudioradio_de,d=c.getSearchPath(),e=d+encodeURIComponent(a);app.cached.fileCollection=new app.FileCollection,app.cached.fileCollection.fetch({sourcetype:"music",name:e,success:function(a){app.cached.fileListView=new app.FilesListView({model:a}),b(app.cached.fileListView)}})},isRadio:function(a){return-1!=a.file.indexOf("plugin.audio.radio_de")}},app.addOns.addon.pluginaudiosoundcloud={getAddon:function(){return app.addOns.getAddon("pluginaudiosoundcloud")},getSearchPath:function(){return"plugin://plugin.audio.soundcloud/SearchTracks?url=plugin%3A%2F%2Fmusic%2FSoundCloud%2Ftracks%2Fsearch&oauth_token=&mode=13"},parseFileRecord:function(a){return app.addOns.addon.pluginaudiosoundcloud.isSoundCloud(a)&&(a.file=a.file.replace("plugin://plugin.audio.soundcloud/","plugin://plugin.audio.soundcloud/"+encodeURIComponent(a.label)+"+")),a},clickDir:function(a){return app.addOns.addon.pluginaudiosoundcloud.isSoundCloud(a)&&"Search"==a.title&&app.addOns.addon.pluginaudiosoundcloud.doSearchDialog(),a},postProcessFileView:function(a,b){var c=app.addOns.addon.pluginaudiosoundcloud;if(c.isSoundCloud(b)){var d=c.getAddon();if(b.file==d.file){var e=$(".file-actions",a);e.html('<button class="btn" id="soundcloudSearch"><i class="icon-search"></i></button>'),$("#soundcloudSearch",e).on("click",function(a){a.stopPropagation(),c.doSearchDialog();var b=c.getSearchPath();app.cached.fileCollection=new app.FileCollection,app.cached.fileCollection.fetch({sourcetype:"music",name:b,success:function(a){app.cached.filesSearchView=new app.FilesView({model:a}).render()}})}),a.find(".file-item").addClass("show-actions")}}return a},searchAddons:function(a,b){var c=$("<div></div>"),d=app.addOns.addon.pluginaudiosoundcloud,e=$("<div>",{"class":"addon-box",id:"sc-search"}),f=(d.getAddon(),$(d.searchHeading("SoundCloud search for: <span>"+b+"</span>","soundcloud"))),g=d.cache("get",b,!1);g!==!1?(c.html(g.render().$el),c.prepend(f)):(e.append(d.searchHeading("Search SoundCloud for: <span>"+b+"</span>","soundcloud can-click")),c.append(e),$("#sc-search",c).on("click",function(){c.html($(d.searchHeading("Searching SoundCloud for: <span>"+b+"</span>","loading"))),d.getSearchResults(b,function(a){c.html(a.render().$el),c.prepend(f),d.cache("set",b,a)})})),$("#search-addons").append(c)},searchHeading:function(a,b){var c='<i class="fa fa-cloud entity-icon" style="background-color: #FF4C00"></i>';return'<h3 class="search-heading entity-heading '+b+'">'+c+a+"</h3>"},cache:function(a,b,c){switch("undefined"==typeof app.cached.soundCloudSearch&&(app.cached.soundCloudSearch={}),a){case"get":return"undefined"==typeof app.cached.soundCloudSearch[b]?c:app.cached.soundCloudSearch[b];case"set":return app.cached.soundCloudSearch[b]=c,app.cached.soundCloudSearch[b]}},doSearchDialog:function(){app.helpers.prompt("What do you want to search for?",function(a){app.xbmcController.command("Input.SendText",[a],function(){$("#folder-name").html('Search for "'+a+'"');var b="Searching for "+a;$("#files-container").html('<div class="loading-box">'+b+"</div>")})})},getSearchResults:function(a,b){{var c=app.addOns.addon.pluginaudiosoundcloud.getSearchPath(),d=c+"&q="+a;$(window)}app.cached.fileCollection=new app.FileCollection,app.cached.fileCollection.fetch({sourcetype:"music",name:d,success:function(a){app.cached.fileListView=new app.FilesListView({model:a}),b(app.cached.fileListView)}})},isSoundCloud:function(a){return-1!=a.file.indexOf("plugin.audio.soundcloud")}};